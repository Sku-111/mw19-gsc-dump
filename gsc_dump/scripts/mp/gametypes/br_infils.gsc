// IW8 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

main()
{
    level.brlatespawnplayer = ::latespawnplayer;
    level.stop_wave = _id_1300F();
    setdvarifuninitialized( "br_infil_anim_enable_third_camera", 1 );
    setdvarifuninitialized( "br_infil_play_jump_anims", 1 );
    setdvarifuninitialized( "br_infil_bot_jumpmaster", 0 );
    level.infilselectionmethod = "";
    level.infilcanusemap = 0;

    if ( istrue( getdvarint( "br_spawnSelectionInfil", 0 ) ) )
    {
        level.infilselectionmethod = getdvar( "scr_br_infilselectionmethod", "exclusion" );
        level.infilcanusemap = 1;
        level.get_bomb_interaction_ent_cut_hint = getdvarint( "scr_br_canSoloJump", 1 );
    }

    if ( istrue( level.br_infils_disabled ) && scripts\mp\gametypes\br_public.gsc::usefailcapacitymsg() )
        level thread laser_vfx_think( undefined, 0 );

    initspawnexclusionpois();
    initinfillocationselectionhandlers();
}

_id_1300F()
{
    var_0 = 2;
    var_1 = getdvarint( "scr_br_infilType", var_0 );

    if ( var_1 == 1 )
    {
        if ( level.mapname != "mp_don4" && level.mapname != "mp_don4_pm" && level.mapname != "mp_br_mechanics" && !scripts\cp_mp\utility\game_utility::turretdisabled() || scripts\cp_mp\utility\game_utility::validateprojectileent() )
            var_1 = 2;
    }
    else if ( var_1 == 2 )
    {
        if ( level.mapname == "mp_don4" || scripts\cp_mp\utility\game_utility::turretdisabled() || scripts\cp_mp\utility\game_utility::validateprojectileent() )
            var_1 = 1;
        else if ( level.mapname != "mp_wz_island" && level.mapname != "mp_br_mechanics" )
            var_1 = 0;
    }

    return var_1;
}

remove_munition_on_use()
{
    var_0 = undefined;
    var_1 = undefined;

    if ( scripts\mp\gametypes\br_public.gsc::tv_station_intro_already_played() )
    {
        var_0 = 0.0;
        var_1 = 0.0;
    }
    else if ( scripts\mp\gametypes\br_public.gsc::usefailcapacitymsg() )
    {
        var_0 = 0.45;
        var_1 = 0.6;
    }
    else
    {
        var_0 = 3.45;
        var_1 = 0.6;
    }

    return [ var_0, var_1 ];
}

setplayerprematchallows()
{
    scripts\mp\utility\player::enableplayerforspawnlogic( 0 );
    self allowmelee( 0 );
    self disableoffhandweapons();
    level.freefallstartcb = ::freefallstartfunc;
}

freefallstartfunc()
{
    self allowmelee( 1 );
    self enableoffhandweapons();
    thread scripts\cp_mp\parachute::_id_126CB();
}

stop_player_trigger_monitor()
{
    self endon( "disconnect" );

    if ( self.class == "" )
    {
        self.class = "custom1";
        self.pers["class"] = "custom1";
    }

    scripts\mp\playerlogic::spawnplayer( 0 );
    self.br_infilstarted = 1;
    self notify( "brWaitAndSpawnClientComplete" );
    self setclientomnvar( "ui_br_transition_type", 0 );
    self setclientomnvar( "ui_br_extended_load_screen", 0 );
}

_id_1435F( var_0, var_1, var_2 )
{
    var_3 = scripts\engine\utility::ter_op( isdefined( var_0 ), var_0, level.players );

    foreach ( var_5 in var_3 )
    {
        if ( !isdefined( var_5 ) )
            continue;

        var_5 neurotoxin_damage_loop();
        var_5 setmlgdamagedone();

        if ( !istrue( level.br_infils_disabled ) )
            var_5 scripts\mp\gametypes\br.gsc::_id_1254D();

        if ( !isalive( var_5 ) && !istrue( var_5.waitingtospawnamortize ) )
        {
            if ( isdefined( var_1 ) )
                var_5.forcespawnorigin = var_1;

            var_5 stop_player_trigger_monitor();
        }
        else
        {
            var_5.br_infilstarted = 1;

            if ( isdefined( var_1 ) )
                var_5 setorigin( var_1 );
        }

        if ( !isdefined( var_5 ) )
            continue;

        if ( isdefined( var_2 ) )
            var_5 playerlinkto( var_2 );

        if ( istrue( var_5.delay_enter_combat_after_investigating_grenade ) )
            scripts\mp\gametypes\br.gsc::_id_13F21( var_5, "waitAndForceSpawnAllPlayers" );

        var_5 notify( "beginC130" );
    }

    if ( !scripts\mp\gametypes\br_gametypes.gsc::unset_relic_aggressive_melee( "squadLeader" ) )
    {
        if ( level.teambased )
        {
            foreach ( var_8 in level.teamnamelist )
            {
                var_9 = scripts\mp\gametypes\br_public.gsc::round_enemies_fallback_logic( var_8 );

                for ( var_10 = 0; var_10 < var_9.size; var_10++ )
                {
                    var_11 = var_9[var_10];
                    var_12 = scripts\mp\gametypes\br_public.gsc::round_enemy_stuck_logic( var_8, var_11 );
                    var_13 = _id_1322C( var_12 );

                    if ( isdefined( var_13 ) )
                    {
                        _id_12B12( var_13 );
                        var_13 thread _id_14494( var_8, var_11 );
                    }

                    scripts\mp\gametypes\br.gsc::_id_1401E( var_8, var_11 );
                }
            }
        }
        else
        {
            var_3 = scripts\engine\utility::ter_op( isdefined( var_0 ), var_0, level.players );

            foreach ( var_5 in var_3 )
            {
                if ( isdefined( var_5 ) )
                    _id_12B12( var_5 );
            }
        }
    }

    if ( !scripts\mp\gametypes\br_gametypes.gsc::unset_relic_aggressive_melee( "oneLife" ) )
    {
        level.disablespawning = 1;
        setdynamicdvar( "scr_" + scripts\mp\utility\game::getgametype() + "_numLives", 1 );
    }

    level.snatchspawnalltoc130done = 1;
}

neurotoxin_damage_loop()
{
    var_0 = self;
    var_0 skydive_setdeploymentstatus( 0 );
    var_0 skydive_setbasejumpingstatus( 0 );

    if ( isdefined( var_0.play_disguise_vo ) )
        var_0.play_disguise_vo = 5;

    var_0 scripts\cp_mp\parachute::_id_121CA();
}

_id_12B12( var_0 )
{
    if ( !istrue( var_0.vehicle_occupancy_monitorcontrols ) )
    {
        var_0.vehicle_occupancy_monitorcontrols = 1;
        var_0 scripts\mp\gametypes\br_public.gsc::updatebrscoreboardstat( "jumpMasterState", 2 );
        var_0 notifyonplayercommand( "halo_jump_c130", "+gostand" );
        var_0 notifyonplayercommand( "br_break_squad", "+breath_sprint" );
    }
}

_id_14494( var_0, var_1 )
{
    scripts\engine\utility::_id_143A5( "death", "disconnect" );
    var_2 = scripts\mp\gametypes\br_public.gsc::round_enemy_stuck_logic( var_0, var_1 );
    var_3 = _id_1322C( var_2 );

    if ( isdefined( var_3 ) )
    {
        _id_12B12( var_3 );
        var_3 thread _id_14494( var_0, var_1 );
    }
}

performfailsafeinfil()
{
    var_0 = ( 0, 0, 3000 );

    if ( isdefined( level.prematchspawnorigins ) && level.prematchspawnorigins.size > 0 )
    {
        var_1 = scripts\engine\utility::random( level.prematchspawnorigins );
        var_0 = var_1.origin;
    }

    var_2 = ( 0, randomintrange( 0, 360 ), 0 );
    self setorigin( var_0, 1 );
    self setplayerangles( var_2 );
    wait 0.2;
    thread scripts\cp_mp\parachute::startfreefall( 0, 1 );
}

latespawnplayer()
{
    self endon( "disconnect" );
    var_0 = self;
    var_1 = scripts\mp\gametypes\br_public.gsc::validtousesticker() || scripts\mp\gametypes\br_public.gsc::uniquelootitemid();

    if ( getdvar( "scr_br_lateSpawnFallback" ) != "" || var_1 )
        _id_11FCC();
    else if ( !isalive( var_0 ) )
    {
        if ( !istrue( level.debugnextpropindex ) )
        {
            var_2 = isbot( var_0 ) && scripts\mp\gametypes\br_public.gsc::tutorial_playsound();

            while ( !istrue( level.delay_music_reinforcements ) && !var_2 )
            {
                if ( !var_2 )
                {
                    var_0 scripts\mp\gametypes\br.gsc::ending_fade_in();
                    var_0 setclientomnvar( "ui_br_transition_type", 4 );
                }

                wait 0.3;
            }

            var_0 thread watch_for_usb_notetrack();
        }
        else
        {
            var_0.delay_explosion_fx = 0;
            var_0.br_infilstarted = 1;

            if ( !scripts\mp\gametypes\br_gametypes.gsc::unset_relic_aggressive_melee( "squadLeader" ) )
            {
                var_3 = scripts\mp\gametypes\br_public.gsc::round_enemy_stuck_logic( var_0.team, var_0.squadindex );

                if ( !isdefined( var_3 ) || var_3.size == 0 )
                    var_3 = [ self ];

                _id_1322C( var_3 );
            }

            var_0 thread _id_11C49();
        }
    }

    var_0 setclientomnvar( "ui_br_transition_type", 0 );
    var_0 setclientomnvar( "ui_br_extended_load_screen", 0 );
}

watch_for_usb_notetrack()
{
    var_0 = self;
    var_0 endon( "disconnect" );

    if ( !isalive( var_0 ) )
    {
        var_0.watch_for_usb_notetrack_switchoff = 1;
        var_0 scripts\mp\playerlogic::spawnplayer( 0 );
    }

    var_0 playerhide();
    var_0.watch_for_usb_notetrack_switchoff = undefined;
    var_0 freezecontrols( 1 );
    var_1 = 1;

    if ( isdefined( var_0.team ) && isdefined( var_0.squadindex ) )
    {
        var_2 = scripts\mp\gametypes\br_public.gsc::round_enemy_stuck_logic( var_0.team, var_0.squadindex );
        var_1 = var_2.size == 1;
    }

    var_0.stop_counter_beep_sfx_on_bomb_vests = var_1;

    if ( var_0 scripts\mp\gametypes\br_public.gsc::updatedragonsbreath() )
        var_0.infilanimindex = 1;

    if ( !isdefined( var_0.infilanimindex ) && level.teambased )
    {
        var_2 = scripts\mp\gametypes\br_public.gsc::round_enemy_stuck_logic( var_0.team, var_0.squadindex );
        var_3 = fivecontracts( var_2.size );

        for ( var_4 = 0; var_4 < var_3.size; var_4++ )
        {
            var_5 = 0;

            foreach ( var_7 in var_2 )
            {
                if ( var_7 != var_0 && var_7 scripts\mp\gametypes\br_public.gsc::updatedragonsbreath() )
                    continue;

                if ( isdefined( var_7.infilanimindex ) && isdefined( var_3[var_4] ) && var_7.infilanimindex == var_3[var_4] )
                {
                    var_5 = 1;
                    break;
                }
            }

            if ( !var_5 )
            {
                var_0.infilanimindex = var_3[var_4];
                break;
            }
        }
    }

    var_0 playerjoininfil();
    var_0 playerlinktopositionent( level.watch_for_total_counts_below_num );
    scripts\mp\utility\game::_id_131A3( var_0, 1 );
    var_9 = remove_objective_on_flag( level.watch_for_total_counts_below_num );
    var_0 setorigin( var_9.origin );
    var_0 playerplayinfilloopanim( level.watch_for_total_counts_below_num );
    waitframe();
    var_10 = 0;

    if ( !var_10 )
    {
        if ( isdefined( var_0.team ) && level.teambased )
        {
            var_2 = scripts\mp\gametypes\br_public.gsc::round_enemy_stuck_logic( var_0.team, var_0.squadindex );

            foreach ( var_12 in var_2 )
            {
                var_0 showtoplayer( var_12 );
                var_12 showtoplayer( var_0 );
            }
        }
    }

    if ( !isbot( var_0 ) )
        scripts\mp\gametypes\br_public.gsc::orbitcam( level.br_ac130 );

    wait 0.5;
    var_0 freezecontrols( 0 );
    var_0 setclientomnvar( "ui_br_transition_type", 0 );
    var_0.br_infilstarted = 1;
}

fivecontracts( var_0 )
{
    var_1 = [];

    for ( var_2 = 0; var_2 < var_0 - 1; var_2++ )
        var_1[var_2] = var_2 + 2;

    return var_1;
}

_id_11C49()
{
    var_0 = self;
    var_0.br_infilstarted = 1;
    var_0 scripts\mp\gametypes\br_pickups.gsc::addrespawntoken( 1 );
    var_0 scripts\mp\gametypes\br_gulag.gsc::playergulagautowin( "missedInfilPlayerHandler", undefined, undefined, 1 );
    var_0 scripts\mp\playerlogic::addtoalivecount( "spawnPlayer" );
}

_id_11FCC()
{
    self endon( "disconnect" );
    var_0 = self;

    if ( !isalive( var_0 ) )
        var_0 scripts\mp\playerlogic::spawnplayer( 0 );

    if ( !scripts\mp\gametypes\br_gametypes.gsc::unset_relic_aggressive_melee( "squadLeader" ) )
    {
        if ( level.teambased )
        {
            var_1 = scripts\mp\gametypes\br_public.gsc::round_enemy_stuck_logic( var_0.team, var_0.squadindex );

            if ( !isdefined( var_1 ) || var_1.size == 0 )
                var_1 = [ self ];

            var_2 = _id_1322C( var_1 );

            if ( isdefined( var_2 ) )
                _id_12B12( var_2 );
            else
            {

            }
        }
        else
        {
            var_0 scripts\mp\gametypes\br_public.gsc::updatebrscoreboardstat( "jumpMasterState", 2 );
            _id_12B12( var_0 );
        }
    }

    var_0.br_infilstarted = 1;
}

takeloadoutatinfilend( var_0 )
{
    self takeweapon( self.weaponlist[0] );
    var_1 = getcompleteweaponname( "ks_remote_map_snatch" );
    var_2 = self getweaponslistall();

    foreach ( var_4 in var_2 )
    {
        if ( scripts\mp\utility\weapon::isgesture( var_4 ) )
            continue;

        if ( isnullweapon( var_1, var_4 ) )
            continue;

        scripts\cp_mp\utility\inventory_utility::_takeweapon( var_4 );
    }

    self.primaryweaponobj = undefined;
    self.primaryweapon = "none";
    self.pers["primaryWeapon"] = self.primaryweapon;
    self.secondaryweaponobj = undefined;
    self.secondaryweapon = "none";
    self.pers["secondaryWeapon"] = self.secondaryweapon;

    if ( !istrue( var_0 ) )
    {
        var_6 = getforcedloadoutweapon();
        scripts\cp_mp\utility\inventory_utility::_giveweapon( var_6, 1 );
        thread scripts\cp_mp\utility\inventory_utility::domonitoredweaponswitch( var_6 );
        self setspawnweapon( var_6, 1 );

        if ( level.magcount == 0 )
        {
            self setweaponammoclip( var_6, 0 );
            self setweaponammostock( var_6, 0 );
        }
        else
        {
            self setweaponammoclip( var_6, weaponclipsize( var_6 ) );
            self setweaponammostock( var_6, weaponclipsize( var_6 ) * ( level.magcount - 1 ) );
        }

        self.secondaryweaponobj = var_6;
        self.secondaryweapon = createheadicon( self.secondaryweaponobj );
        self.pers["secondaryWeapon"] = self.secondaryweapon;
    }
}

getforcedloadoutweapon()
{
    return scripts\mp\class::buildweapon( "iw8_pi_golf21", [ "reflex", "none", "none", "none", "none" ], "none", "none", -1, undefined, undefined, undefined, undefined, undefined, 0 );
}

_id_1322C( var_0 )
{
    if ( var_0.size == 0 )
        return undefined;

    var_1 = undefined;

    foreach ( var_3 in var_0 )
    {
        if ( isdefined( var_3 ) && var_3 scripts\mp\gametypes\br_public.gsc::updatedragonsbreath() )
            return var_3;
    }

    foreach ( var_3 in var_0 )
    {
        if ( level.onlinegame && var_3 isfireteamleader() )
        {
            var_1 = var_3;
            break;
        }
    }

    if ( !isdefined( var_1 ) )
    {
        var_7 = 0;
        var_8 = 0;

        foreach ( var_3 in var_0 )
        {
            var_10 = var_7 == isbot( var_3 );

            if ( var_10 )
            {
                var_8++;
                var_11 = 1.0 / var_8;

                if ( randomfloat( 1.0 ) < var_11 )
                    var_1 = var_3;
            }
        }
    }

    if ( !isdefined( var_1 ) )
    {
        foreach ( var_3 in var_0 )
        {
            var_1 = var_3;
            break;
        }
    }

    if ( !isdefined( var_1 ) )
        return undefined;

    var_1 scripts\mp\gametypes\br.gsc::_id_1319D( 1 );

    foreach ( var_3 in var_0 )
    {
        if ( var_3 != var_1 )
            var_3 scripts\mp\gametypes\br.gsc::_id_1319D( 0 );

        var_16 = scripts\engine\utility::ter_op( var_3 scripts\mp\gametypes\br_public.gsc::updatedragonsbreath(), 2, 1 );
        scripts\mp\gametypes\br_c130.gsc::setteammateomnvarsforplayer( var_3, var_0, var_16 );
    }

    return var_1;
}

firespoutwatch( var_0, var_1 )
{
    if ( scripts\mp\gametypes\br_public.gsc::tv_station_intro_already_played() )
        return firesaleforplayers( var_0, var_1 );
    else if ( scripts\mp\gametypes\br_public.gsc::usefailcapacitymsg() )
        return fix_collision( var_0, var_1 );
    else
        return buildac130infilanimstruct( var_0, var_1 );
}

buildac130infilanimstruct( var_0, var_1 )
{
    var_2 = spawnstruct();

    if ( isdefined( var_0 ) )
    {
        var_0.animstruct = var_2;
        var_2.movingc130 = var_0;
    }

    var_2.staticc130 = getent( "infil_plane", "script_noteworthy" );

    if ( isdefined( var_2.staticc130 ) )
        var_2.staticc130 show();
    else
    {
        var_2.staticc130 = spawn( "script_model", getdvarvector( "br_infil_anim_pos", ( 0, 0, 0 ) ) );
        var_2.staticc130 setmodel( "veh8_mil_air_acharlie130_magma_animated" );
        var_2.staticc130.cleanme = 1;
    }

    var_2.cameraent = spawn( "script_model", var_2.staticc130.origin );
    var_2.cameraent setmodel( "generic_prop_x5" );

    if ( isdefined( var_0 ) )
    {
        var_0 unmarkkeyframedmover( 1 );
        var_2.gas_trigger = spawn( "script_model", var_2.movingc130.origin );
        var_2.gas_trigger setmodel( "generic_prop_x5" );
        var_2.gas_trigger linkto( var_2.movingc130, "tag_origin", ( 0, 0, 0 ), ( 0, 0, 0 ) );
        var_2.gas_trigger unmarkkeyframedmover( 1 );
    }

    spawnplayerpositionparentent( var_2, var_2.staticc130 );

    if ( var_1 == "script_model" )
    {
        var_2.playerslot1 = spawn( "script_model", var_2.staticc130.origin );
        var_2.playerslot1 setmodel( "fullbody_usmc_ar_br_infil" );
        var_2.playerslot2 = spawn( "script_model", var_2.staticc130.origin );
        var_2.playerslot2 setmodel( "fullbody_usmc_ar_br_infil" );
        var_2.playerslot3 = spawn( "script_model", var_2.staticc130.origin );
        var_2.playerslot3 setmodel( "fullbody_usmc_ar_br_infil" );
        var_2.playerslot4 = spawn( "script_model", var_2.staticc130.origin );
        var_2.playerslot4 setmodel( "fullbody_usmc_ar_br_infil" );
        var_2.playerslot1 linkto( var_2.playerpositionents["parent"], "j_prop_1", ( 0, 0, 0 ), ( 0, 0, 0 ) );
        var_2.playerslot2 linkto( var_2.playerpositionents["parent"], "j_prop_2", ( 0, 0, 0 ), ( 0, 0, 0 ) );
        var_2.playerslot3 linkto( var_2.playerpositionents["parent"], "j_prop_3", ( 0, 0, 0 ), ( 0, 0, 0 ) );
        var_2.playerslot4 linkto( var_2.playerpositionents["parent"], "j_prop_4", ( 0, 0, 0 ), ( 0, 0, 0 ) );
        var_2.infil_anim_type = "script_model";
    }
    else
    {
        var_3 = [ "j_prop_1", "j_prop_2", "j_prop_3", "j_prop_4" ];

        foreach ( var_5 in var_3 )
            spawnplayerpositionent( var_2, var_5 );

        var_2.infil_anim_type = "player";
    }

    var_2.aidoorchief = spawn( "script_model", var_2.staticc130.origin );
    var_2.aidoorchief setmodel( "fullbody_usmc_ar_br_infil" );

    if ( isdefined( var_0 ) && isdefined( var_2.movingc130.innards ) )
        var_2.movingc130.innards linkto( var_2.movingc130, "", ( 0, 0, 0 ), ( 0, 0, 0 ) );

    var_2.aidoorchief linkto( var_2.playerpositionents["parent"], "j_prop_5", ( 0, 0, 0 ), ( 0, 0, 0 ) );
    var_2.cameraent linkto( var_2.staticc130, "", ( 0, 0, 0 ), ( 0, 0, 0 ) );
    var_2.helicountdownendcallback = spawnfx( level._effect["vfx_br_infil_cloud_anim"], var_2.staticc130.origin );
    return var_2;
}

firesaleforplayers( var_0, var_1 )
{
    var_2 = spawnstruct();

    if ( isdefined( var_0 ) )
    {
        var_0.animstruct = var_2;
        var_2._id_11DBF = var_0;
    }

    var_3 = scripts\engine\utility::getstruct( "infil_plane_ch2", "script_noteworthy" );
    var_2.origin = var_3.origin;
    var_2.angles = ( 0, 0, 0 );

    if ( isdefined( var_3.angles ) )
        var_2.angles = var_3.angles;

    var_2.chopper = spawn( "script_model", var_2.origin );
    var_2.chopper.angles = var_2.angles;
    var_2.chopper setmodel( "tag_origin" );
    var_2.chopper.cleanme = 1;
    var_2.goalradiustarget = spawn( "script_model", var_2.origin );
    var_2.goalradiustarget setmodel( "veh8_mil_air_mindia8_interior_infil_netting" );
    var_2.goalradiustarget linkto( var_2.chopper, "tag_origin", ( 0, 0, 0 ), ( 0, 0, 0 ) );
    var_2.givestandardtableloadout = spawn( "script_model", var_2.origin );
    var_2.givestandardtableloadout setmodel( "veh8_mil_air_mindia8_interior_infil_cabin_door" );
    var_2.givestandardtableloadout linkto( var_2.chopper, "tag_origin", ( 0, 0, 0 ), ( 0, 0, 0 ) );
    var_2.gas_trigger_think = spawn( "script_model", var_2.origin );
    var_2.gas_trigger_think setmodel( "generic_prop_x3" );
    var_2.gas_trigger_think linkto( var_2.chopper, "tag_origin", ( 0, 0, 0 ), ( 0, 0, 0 ) );
    var_2.gas_tryplaycoughaudio = spawn( "script_model", var_2.origin );
    var_2.gas_tryplaycoughaudio setmodel( "generic_prop_x3" );
    var_2.gas_tryplaycoughaudio linkto( var_2.chopper, "tag_origin", ( 0, 0, 0 ), ( 0, 0, 0 ) );

    if ( isdefined( var_0 ) )
    {
        var_0 unmarkkeyframedmover( 1 );
        var_2.gas_triggers_init = spawn( "script_model", var_0.origin );
        var_2.gas_triggers_init setmodel( "generic_prop_x3" );
        var_2.gas_triggers_init linkto( var_0, "tag_origin", ( 0, 0, 0 ), ( 0, 0, 0 ) );
        var_2.gas_triggers_init unmarkkeyframedmover( 1 );
        var_2.gas_vfx_and_triggers = spawn( "script_model", var_0.origin );
        var_2.gas_vfx_and_triggers setmodel( "generic_prop_x3" );
        var_2.gas_vfx_and_triggers linkto( var_0, "tag_origin", ( 0, 0, 0 ), ( 0, 0, 0 ) );
        var_2.gas_vfx_and_triggers unmarkkeyframedmover( 1 );
    }

    var_2.playerpositionents["parent_solo"] = spawn( "script_model", var_2.origin );
    var_2.playerpositionents["parent_solo"] setmodel( "generic_prop_x3" );
    var_2.playerpositionents["parent_solo"] linkto( var_2.chopper, "tag_origin", ( 0, 0, 0 ), ( 0, 0, 0 ) );
    var_2.playerpositionents["parent_squad"] = spawn( "script_model", var_2.origin );
    var_2.playerpositionents["parent_squad"] setmodel( "generic_prop_x5" );
    var_2.playerpositionents["parent_squad"] linkto( var_2.chopper, "tag_origin", ( 0, 0, 0 ), ( 0, 0, 0 ) );

    if ( var_1 == "script_model" )
    {
        var_2._id_1269E = spawn( "script_model", var_2.origin );
        var_2._id_1269E setmodel( "fullbody_usmc_ar_br_infil" );
        var_2._id_1269E linkto( var_2.playerpositionents["parent_solo"], "j_prop_1", ( 0, 0, 0 ), ( 0, 0, 0 ) );
        var_2._id_1269F = spawn( "script_model", var_2.origin );
        var_2._id_1269F setmodel( "fullbody_usmc_ar_br_infil" );
        var_2._id_1269F linkto( var_2.playerpositionents["parent_squad"], "j_prop_1", ( 0, 0, 0 ), ( 0, 0, 0 ) );
        var_2._id_126A0 = spawn( "script_model", var_2.origin );
        var_2._id_126A0 setmodel( "fullbody_usmc_ar_br_infil" );
        var_2._id_126A0 linkto( var_2.playerpositionents["parent_squad"], "j_prop_2", ( 0, 0, 0 ), ( 0, 0, 0 ) );
        var_2._id_126A1 = spawn( "script_model", var_2.origin );
        var_2._id_126A1 setmodel( "fullbody_usmc_ar_br_infil" );
        var_2._id_126A1 linkto( var_2.playerpositionents["parent_squad"], "j_prop_3", ( 0, 0, 0 ), ( 0, 0, 0 ) );
        var_2._id_126A2 = spawn( "script_model", var_2.origin );
        var_2._id_126A2 setmodel( "fullbody_usmc_ar_br_infil" );
        var_2._id_126A2 linkto( var_2.playerpositionents["parent_squad"], "j_prop_4", ( 0, 0, 0 ), ( 0, 0, 0 ) );
        var_2.infil_anim_type = "script_model";
    }
    else
    {
        var_2.playerpositionents["child_solo"] = spawn( "script_model", var_2.playerpositionents["parent_solo"] gettagorigin( "j_prop_1" ) );
        var_2.playerpositionents["child_solo"] setmodel( "tag_player" );
        var_2.playerpositionents["child_solo"] linkto( var_2.playerpositionents["parent_solo"], "j_prop_1", ( 0, 0, 0 ), ( 0, 0, 0 ) );
        var_2.playerpositionents["child_squad_1"] = spawn( "script_model", var_2.playerpositionents["parent_squad"] gettagorigin( "j_prop_1" ) );
        var_2.playerpositionents["child_squad_1"] setmodel( "tag_player" );
        var_2.playerpositionents["child_squad_1"] linkto( var_2.playerpositionents["parent_squad"], "j_prop_1", ( 0, 0, 0 ), ( 0, 0, 0 ) );
        var_2.playerpositionents["child_squad_2"] = spawn( "script_model", var_2.playerpositionents["parent_squad"] gettagorigin( "j_prop_2" ) );
        var_2.playerpositionents["child_squad_2"] setmodel( "tag_player" );
        var_2.playerpositionents["child_squad_2"] linkto( var_2.playerpositionents["parent_squad"], "j_prop_2", ( 0, 0, 0 ), ( 0, 0, 0 ) );
        var_2.playerpositionents["child_squad_3"] = spawn( "script_model", var_2.playerpositionents["parent_squad"] gettagorigin( "j_prop_3" ) );
        var_2.playerpositionents["child_squad_3"] setmodel( "tag_player" );
        var_2.playerpositionents["child_squad_3"] linkto( var_2.playerpositionents["parent_squad"], "j_prop_3", ( 0, 0, 0 ), ( 0, 0, 0 ) );
        var_2.playerpositionents["child_squad_4"] = spawn( "script_model", var_2.playerpositionents["parent_squad"] gettagorigin( "j_prop_4" ) );
        var_2.playerpositionents["child_squad_4"] setmodel( "tag_player" );
        var_2.playerpositionents["child_squad_4"] linkto( var_2.playerpositionents["parent_squad"], "j_prop_4", ( 0, 0, 0 ), ( 0, 0, 0 ) );
        var_2.infil_anim_type = "player";
    }

    var_2.bot_gametype_attacker_defender_ai_director_update = spawn( "script_model", var_2.origin );
    var_2.bot_gametype_attacker_defender_ai_director_update setmodel( "fullbody_mp_eastern_bale_3_1" );
    var_2.bot_gametype_attacker_defender_ai_director_update linkto( var_2.playerpositionents["parent_solo"], "j_prop_2", ( 0, 0, 0 ), ( 0, 0, 0 ) );
    var_2.bot_clear_hq_zone = spawn( "script_model", var_2.origin );
    var_2.bot_clear_hq_zone setmodel( "fullbody_usmc_ar_br_infil" );
    var_2.bot_clear_hq_zone linkto( var_2.playerpositionents["parent_solo"], "j_prop_3", ( 0, 0, 0 ), ( 0, 0, 0 ) );
    var_2.calloutmarkerpingvo_handleraddnewelement = spawn( "script_model", var_2.origin );
    var_2.calloutmarkerpingvo_handleraddnewelement setmodel( "generic_prop_x10" );
    var_2.calloutmarkerpingvo_handleraddnewelement linkto( var_2.chopper, "tag_origin", ( 0, 0, 0 ), ( 0, 0, 0 ) );
    var_2.calloutmarkerpingvo_handleraddnewelement unmarkkeyframedmover( 1 );
    var_4 = 9;
    var_2.calloutmarkerpingvo_getmaxsoundaliaslength = [];

    for ( var_5 = 0; var_5 < var_4; var_5++ )
    {
        var_6 = spawn( "script_model", var_2.origin );
        var_6 setmodel( "veh8_mil_air_mindia8_infil_flight" );
        var_6 linkto( var_2.calloutmarkerpingvo_handleraddnewelement, "j_prop_" + ( var_5 + 2 ), ( 0, 0, 0 ), ( 0, 0, 0 ) );
        var_6 unmarkkeyframedmover( 1 );
        var_6 playloopsound( "br_heli_infil_fleet_lp" );
        var_2.calloutmarkerpingvo_getmaxsoundaliaslength[var_2.calloutmarkerpingvo_getmaxsoundaliaslength.size] = var_6;
    }

    return var_2;
}

fix_collision( var_0, var_1 )
{
    var_2 = spawnstruct();

    if ( isdefined( var_0 ) )
    {
        var_0.animstruct = var_2;
        var_2._id_11DC3 = var_0;
    }

    var_2._id_13886 = getent( "infil_plane_ch3", "script_noteworthy" );

    if ( isdefined( var_2._id_13886 ) )
        var_2._id_13886 show();
    else
    {
        var_2._id_13886 = spawn( "script_model", getdvarvector( "br_infil_anim_pos", ( 0, 0, 0 ) ) );
        var_2._id_13886 setmodel( "veh8_mil_air_acharlie130_magma_animated" );
    }

    var_2._id_13886.cleanme = 1;
    var_2.chopper_kill = spawn( "script_model", var_2._id_13886.origin );
    var_2.chopper_kill setmodel( "veh8_mil_air_skilo_interior_infil_int_bags_back_left_up" );
    var_2.chopper_kill linkto( var_2._id_13886, "tag_bags_back_left_up", ( 0, 0, 0 ), ( 0, 0, 0 ) );
    var_2.chopper_kill_vehicle = spawn( "script_model", var_2._id_13886.origin );
    var_2.chopper_kill_vehicle setmodel( "veh8_mil_air_skilo_interior_infil_int_bags_back_right_up" );
    var_2.chopper_kill_vehicle linkto( var_2._id_13886, "tag_bags_back_right_up", ( 0, 0, 0 ), ( 0, 0, 0 ) );
    var_2.chopper_kill_person = spawn( "script_model", var_2._id_13886.origin );
    var_2.chopper_kill_person setmodel( "veh8_mil_air_skilo_interior_infil_int_bags_back_right_low" );
    var_2.chopper_kill_person linkto( var_2._id_13886, "tag_bags_back_right_low", ( 0, 0, 0 ), ( 0, 0, 0 ) );
    var_2._id_12915 = [ var_2.chopper_kill, var_2.chopper_kill_vehicle, var_2.chopper_kill_person ];
    var_2._id_12D98 = spawn( "script_model", var_2._id_13886.origin );
    var_2._id_12D98 setmodel( "veh8_mil_air_skilo_interior_infil_ropes" );
    var_2._id_12D98 linkto( var_2._id_13886, "tag_origin", ( 0, 0, 0 ), ( 0, 0, 0 ) );
    var_2._id_13887 = getent( "infil_skilo_door", "script_noteworthy" );
    var_2.staticskilointerior = getent( "static_skilo_interior", "script_noteworthy" );
    var_2.staticskiloexterior = getent( "static_skilo_exterior", "script_noteworthy" );
    var_2.staticskilobottomlight = getent( "static_skilo_bottom_light", "script_noteworthy" );
    var_2.staticskilotoplight = getent( "static_skilo_top_light", "script_noteworthy" );
    var_2.gas_trigger_think = spawn( "script_model", var_2._id_13886.origin );
    var_2.gas_trigger_think setmodel( "generic_prop_x3" );
    var_2.gas_trigger_think linkto( var_2._id_13886, "tag_origin", ( 0, 0, 0 ), ( 0, 0, 0 ) );
    var_2.gas_tryplaycoughaudio = spawn( "script_model", var_2._id_13886.origin );
    var_2.gas_tryplaycoughaudio setmodel( "generic_prop_x3" );
    var_2.gas_tryplaycoughaudio linkto( var_2._id_13886, "tag_origin", ( 0, 0, 0 ), ( 0, 0, 0 ) );

    if ( isdefined( var_0 ) )
    {
        var_0 unmarkkeyframedmover( 1 );
        var_2.gas_triggers_init = spawn( "script_model", var_0.origin );
        var_2.gas_triggers_init setmodel( "generic_prop_x3" );
        var_2.gas_triggers_init linkto( var_0, "tag_origin", ( 0, 0, 0 ), ( 0, 0, 0 ) );
        var_2.gas_triggers_init unmarkkeyframedmover( 1 );
        var_2.gas_vfx_and_triggers = spawn( "script_model", var_0.origin );
        var_2.gas_vfx_and_triggers setmodel( "generic_prop_x3" );
        var_2.gas_vfx_and_triggers linkto( var_0, "tag_origin", ( 0, 0, 0 ), ( 0, 0, 0 ) );
        var_2.gas_vfx_and_triggers unmarkkeyframedmover( 1 );
    }

    var_2.playerpositionents["parent_solo"] = spawn( "script_model", var_2._id_13886.origin );
    var_2.playerpositionents["parent_solo"] setmodel( "generic_prop_x3" );
    var_2.playerpositionents["parent_solo"] linkto( var_2._id_13886, "tag_origin", ( 0, 0, 0 ), ( 0, 0, 0 ) );
    var_2.playerpositionents["parent_squad"] = spawn( "script_model", var_2._id_13886.origin );
    var_2.playerpositionents["parent_squad"] setmodel( "generic_prop_x5" );
    var_2.playerpositionents["parent_squad"] linkto( var_2._id_13886, "tag_origin", ( 0, 0, 0 ), ( 0, 0, 0 ) );

    if ( var_1 == "script_model" )
    {
        var_2._id_1269E = spawn( "script_model", var_2._id_13886.origin );
        var_2._id_1269E setmodel( "fullbody_usmc_ar_br_infil" );
        var_2._id_1269E linkto( var_2.playerpositionents["parent_solo"], "j_prop_1", ( 0, 0, 0 ), ( 0, 0, 0 ) );
        var_2._id_1269F = spawn( "script_model", var_2._id_13886.origin );
        var_2._id_1269F setmodel( "fullbody_usmc_ar_br_infil" );
        var_2._id_1269F linkto( var_2.playerpositionents["parent_squad"], "j_prop_1", ( 0, 0, 0 ), ( 0, 0, 0 ) );
        var_2._id_126A0 = spawn( "script_model", var_2._id_13886.origin );
        var_2._id_126A0 setmodel( "fullbody_usmc_ar_br_infil" );
        var_2._id_126A0 linkto( var_2.playerpositionents["parent_squad"], "j_prop_2", ( 0, 0, 0 ), ( 0, 0, 0 ) );
        var_2._id_126A1 = spawn( "script_model", var_2._id_13886.origin );
        var_2._id_126A1 setmodel( "fullbody_usmc_ar_br_infil" );
        var_2._id_126A1 linkto( var_2.playerpositionents["parent_squad"], "j_prop_3", ( 0, 0, 0 ), ( 0, 0, 0 ) );
        var_2._id_126A2 = spawn( "script_model", var_2._id_13886.origin );
        var_2._id_126A2 setmodel( "fullbody_usmc_ar_br_infil" );
        var_2._id_126A2 linkto( var_2.playerpositionents["parent_squad"], "j_prop_4", ( 0, 0, 0 ), ( 0, 0, 0 ) );
        var_2.infil_anim_type = "script_model";
    }
    else
    {
        var_2.playerpositionents["child_solo"] = spawn( "script_model", var_2.playerpositionents["parent_solo"] gettagorigin( "j_prop_1" ) );
        var_2.playerpositionents["child_solo"] setmodel( "tag_player" );
        var_2.playerpositionents["child_solo"] linkto( var_2.playerpositionents["parent_solo"], "j_prop_1", ( 0, 0, 0 ), ( 0, 0, 0 ) );
        var_2.playerpositionents["child_squad_1"] = spawn( "script_model", var_2.playerpositionents["parent_squad"] gettagorigin( "j_prop_1" ) );
        var_2.playerpositionents["child_squad_1"] setmodel( "tag_player" );
        var_2.playerpositionents["child_squad_1"] linkto( var_2.playerpositionents["parent_squad"], "j_prop_1", ( 0, 0, 0 ), ( 0, 0, 0 ) );
        var_2.playerpositionents["child_squad_2"] = spawn( "script_model", var_2.playerpositionents["parent_squad"] gettagorigin( "j_prop_2" ) );
        var_2.playerpositionents["child_squad_2"] setmodel( "tag_player" );
        var_2.playerpositionents["child_squad_2"] linkto( var_2.playerpositionents["parent_squad"], "j_prop_2", ( 0, 0, 0 ), ( 0, 0, 0 ) );
        var_2.playerpositionents["child_squad_3"] = spawn( "script_model", var_2.playerpositionents["parent_squad"] gettagorigin( "j_prop_3" ) );
        var_2.playerpositionents["child_squad_3"] setmodel( "tag_player" );
        var_2.playerpositionents["child_squad_3"] linkto( var_2.playerpositionents["parent_squad"], "j_prop_3", ( 0, 0, 0 ), ( 0, 0, 0 ) );
        var_2.playerpositionents["child_squad_4"] = spawn( "script_model", var_2.playerpositionents["parent_squad"] gettagorigin( "j_prop_4" ) );
        var_2.playerpositionents["child_squad_4"] setmodel( "tag_player" );
        var_2.playerpositionents["child_squad_4"] linkto( var_2.playerpositionents["parent_squad"], "j_prop_4", ( 0, 0, 0 ), ( 0, 0, 0 ) );
        var_2.infil_anim_type = "player";
    }

    if ( isdefined( var_0 ) && isdefined( var_2._id_11DC3.innards ) )
        var_2._id_11DC3.innards linkto( var_2._id_11DC3, "", ( 0, 0, 0 ), ( 0, 0, 0 ) );

    return var_2;
}

handlefriendlyvisibility( var_0 )
{
    if ( isdefined( var_0.calloutmarkerpingvo_getmaxsoundaliaslength ) )
    {
        foreach ( var_2 in var_0.calloutmarkerpingvo_getmaxsoundaliaslength )
            var_2 delete();
    }

    if ( isdefined( var_0.calloutmarkerpingvo_handleraddnewelement ) )
        var_0.calloutmarkerpingvo_handleraddnewelement delete();

    if ( isdefined( var_0.bot_clear_hq_zone ) )
        var_0.bot_clear_hq_zone delete();

    if ( isdefined( var_0.bot_gametype_attacker_defender_ai_director_update ) )
        var_0.bot_gametype_attacker_defender_ai_director_update delete();

    if ( isdefined( var_0.playerpositionents ) )
    {
        foreach ( var_5 in var_0.playerpositionents )
            var_5 delete();
    }

    if ( isdefined( var_0._id_1269E ) )
        var_0._id_1269E delete();

    if ( isdefined( var_0._id_1269F ) )
        var_0._id_1269F delete();

    if ( isdefined( var_0._id_126A0 ) )
        var_0._id_126A0 delete();

    if ( isdefined( var_0._id_126A1 ) )
        var_0._id_126A1 delete();

    if ( isdefined( var_0._id_126A2 ) )
        var_0._id_126A2 delete();

    if ( isdefined( var_0.gas_trigger_think ) )
        var_0.gas_trigger_think delete();

    if ( isdefined( var_0.gas_tryplaycoughaudio ) )
        var_0.gas_tryplaycoughaudio delete();

    if ( isdefined( var_0.gas_triggers_init ) )
        var_0.gas_triggers_init delete();

    if ( isdefined( var_0.gas_vfx_and_triggers ) )
        var_0.gas_vfx_and_triggers delete();

    if ( isdefined( var_0.givestandardtableloadout ) )
        var_0.givestandardtableloadout delete();

    if ( isdefined( var_0.goalradiustarget ) )
        var_0.goalradiustarget delete();

    if ( isdefined( var_0.chopper ) && istrue( var_0.chopper.cleanme ) )
        var_0.chopper delete();

    if ( isdefined( var_0._id_11DBF ) && istrue( var_0._id_11DBF.cleanme ) )
    {
        if ( isdefined( var_0._id_11DBF.innards ) && istrue( var_0._id_11DBF.innards.cleanme ) )
            var_0._id_11DBF.innards delete();

        var_0._id_11DBF delete();
    }
}

handleimpact( var_0 )
{
    scripts\mp\utility\sound::_id_12C2A( "br_infil_skilo" );

    if ( isdefined( var_0.playerpositionents ) )
    {
        foreach ( var_2 in var_0.playerpositionents )
            var_2 delete();
    }

    if ( isdefined( var_0._id_1269E ) )
        var_0._id_1269E delete();

    if ( isdefined( var_0._id_1269F ) )
        var_0._id_1269F delete();

    if ( isdefined( var_0._id_126A0 ) )
        var_0._id_126A0 delete();

    if ( isdefined( var_0._id_126A1 ) )
        var_0._id_126A1 delete();

    if ( isdefined( var_0._id_126A2 ) )
        var_0._id_126A2 delete();

    if ( isdefined( var_0.gas_trigger_think ) )
        var_0.gas_trigger_think delete();

    if ( isdefined( var_0.gas_tryplaycoughaudio ) )
        var_0.gas_tryplaycoughaudio delete();

    if ( isdefined( var_0.gas_triggers_init ) )
        var_0.gas_triggers_init delete();

    if ( isdefined( var_0.gas_vfx_and_triggers ) )
        var_0.gas_vfx_and_triggers delete();

    if ( isdefined( var_0._id_12D98 ) )
        var_0._id_12D98 delete();

    foreach ( var_5 in var_0._id_12915 )
    {
        if ( isdefined( var_5 ) )
            var_5 delete();
    }

    if ( isdefined( var_0._id_13886 ) && istrue( var_0._id_13886.cleanme ) )
        var_0._id_13886 delete();

    if ( isdefined( var_0._id_13887 ) )
        var_0._id_13887 delete();

    if ( isdefined( var_0.staticskilointerior ) )
        var_0.staticskilointerior delete();

    if ( isdefined( var_0.staticskiloexterior ) )
        var_0.staticskiloexterior delete();

    if ( isdefined( var_0.staticskilobottomlight ) )
        var_0.staticskilobottomlight delete();

    if ( isdefined( var_0.staticskilotoplight ) )
        var_0.staticskilotoplight delete();

    if ( isdefined( var_0._id_11DC3 ) && istrue( var_0._id_11DC3.cleanme ) )
    {
        if ( isdefined( var_0._id_11DC3.innards ) && istrue( var_0._id_11DC3.innards.cleanme ) )
            var_0._id_11DC3.innards delete();

        if ( isdefined( var_0._id_11DC3.bunker_numberstation ) && istrue( var_0._id_11DC3.bunker_numberstation.cleanme ) )
            var_0._id_11DC3.bunker_numberstation delete();

        if ( isdefined( var_0._id_11DC3.door ) && istrue( var_0._id_11DC3.door.cleanme ) )
            var_0._id_11DC3.door delete();

        var_0._id_11DC3 delete();
    }
}

handleheadshotkillrewardbullets( var_0 )
{
    if ( scripts\mp\gametypes\br_public.gsc::tv_station_intro_already_played() )
        handlefriendlyvisibility( var_0 );
    else if ( scripts\mp\gametypes\br_public.gsc::usefailcapacitymsg() )
        handleimpact( var_0 );
    else
        scripts\mp\gametypes\br_public.gsc::cleanac130struct( var_0 );
}

laser_vfx_think( var_0, var_1 )
{
    level endon( "game_ended" );
    var_2 = getentarray( "skilo_props", "script_noteworthy" );

    if ( istrue( var_1 ) )
    {
        if ( isdefined( var_0 ) )
        {
            var_3 = remove_munitions_in_radius( var_0 );
            var_3 waittillmatch( "camera", "end" );
        }
    }

    foreach ( var_5 in var_2 )
    {
        if ( isdefined( var_5 ) )
            var_5 delete();
    }
}

spawnplayerpositionparentent( var_0, var_1 )
{
    var_0.playerpositionents["parent"] = spawn( "script_model", var_1.origin );
    var_0.playerpositionents["parent"] setmodel( "generic_prop_x5" );
    var_0.playerpositionents["parent"] linkto( var_1, "", ( 0, 0, 0 ), ( 0, 0, 0 ) );
}

spawnplayerpositionent( var_0, var_1 )
{
    var_0.playerpositionents[var_1] = spawn( "script_model", var_0.playerpositionents["parent"] gettagorigin( var_1 ) );
    var_0.playerpositionents[var_1] setmodel( "tag_player" );
    var_0.playerpositionents[var_1] linkto( var_0.playerpositionents["parent"], var_1, ( 0, 0, 0 ), ( 0, 0, 0 ) );
}

remove_veh_spawners_from_passive_wave_spawning( var_0 )
{
    if ( scripts\mp\gametypes\br_public.gsc::tv_station_intro_already_played() )
        return remove_usability_crutch_on_death( var_0 );
    else if ( scripts\mp\gametypes\br_public.gsc::usefailcapacitymsg() )
        return removeaccesscard( var_0 );
    else
        return remove_tank_class( var_0 );
}

#using_animtree("script_model");

remove_usability_crutch_on_death( var_0 )
{
    var_1 = self getplayerangles( 1 );
    var_2 = anglestoforward( var_1 );
    var_3 = anglestoforward( var_0._id_11DBF.angles );
    var_4 = anglestoright( var_0._id_11DBF.angles );
    var_5 = vectordot( var_2, var_3 );
    var_6 = vectordot( var_2, var_4 );
    var_7 = cos( 45.0 );

    if ( var_5 < -1.0 * var_7 )
        return [ "wz_infil_mindia8_jump_genpropx10", %wz_infil_mindia8_jump_genpropx10, "wz_infil_mindia8_jump01_pl01" ];

    if ( var_6 > var_7 )
        return [ "wz_infil_mindia8_jump_genpropx10_90_l", %wz_infil_mindia8_jump_genpropx10_90_l, "wz_infil_mindia8_jump01_pl01_90_l" ];
    else if ( var_6 < -1.0 * var_7 )
        return [ "wz_infil_mindia8_jump_genpropx10_90_r", %wz_infil_mindia8_jump_genpropx10_90_r, "wz_infil_mindia8_jump01_pl01_90_r" ];
    else if ( var_6 > 0.0 )
        return [ "wz_infil_mindia8_jump_genpropx10_180_l", %wz_infil_mindia8_jump_genpropx10_180_l, "wz_infil_mindia8_jump01_pl01_180_l" ];
    else
        return [ "wz_infil_mindia8_jump_genpropx10_180_r", %wz_infil_mindia8_jump_genpropx10_180_r, "wz_infil_mindia8_jump01_pl01_180_r" ];
}

remove_tank_class( var_0 )
{
    var_1 = self getplayerangles( 1 );
    var_2 = anglestoforward( var_1 );
    var_3 = anglestoforward( var_0.movingc130.angles );
    var_4 = anglestoright( var_0.movingc130.angles );
    var_5 = vectordot( var_2, var_3 );
    var_6 = vectordot( var_2, var_4 );
    var_7 = cos( 45.0 );

    if ( var_5 < -1.0 * var_7 )
        return [ "sdr_mp_infil_ac130_jump_genpropx10", %sdr_mp_infil_ac130_jump_genpropx10, "sdr_mp_infil_ac130_jump" ];

    if ( var_6 > var_7 )
        return [ "sdr_mp_infil_ac130_jump_genpropx10_90_l", %sdr_mp_infil_ac130_jump_genpropx10_90_l, "sdr_mp_infil_ac130_jump_90_l" ];
    else if ( var_6 < -1.0 * var_7 )
        return [ "sdr_mp_infil_ac130_jump_genpropx10_90_r", %sdr_mp_infil_ac130_jump_genpropx10_90_r, "sdr_mp_infil_ac130_jump_90_r" ];
    else if ( var_6 > 0.0 )
        return [ "sdr_mp_infil_ac130_jump_genpropx10_180_l", %sdr_mp_infil_ac130_jump_genpropx10_180_l, "sdr_mp_infil_ac130_jump_180_l" ];
    else
        return [ "sdr_mp_infil_ac130_jump_genpropx10_180_r", %sdr_mp_infil_ac130_jump_genpropx10_180_r, "sdr_mp_infil_ac130_jump_180_r" ];
}

removeaccesscard( var_0 )
{
    var_1 = self getplayerangles( 1 );
    var_2 = anglestoforward( var_1 );
    var_3 = anglestoforward( var_0._id_11DC3.angles );
    var_4 = anglestoright( var_0._id_11DC3.angles );
    var_5 = vectordot( var_2, var_3 );
    var_6 = vectordot( var_2, var_4 );
    var_7 = cos( 45.0 );

    if ( var_5 < -1.0 * var_7 )
        return [ "wz_infil_skilo_jump_genpropx10", %wz_infil_skilo_jump_genpropx10, "wz_infil_skilo_jump01_pl01" ];

    if ( var_6 > var_7 )
        return [ "wz_infil_skilo_jump_genpropx10_90_l", %wz_infil_skilo_jump_genpropx10_90_l, "wz_infil_skilo_jump01_pl01_90_l" ];
    else if ( var_6 < -1.0 * var_7 )
        return [ "wz_infil_skilo_jump_genpropx10_90_r", %wz_infil_skilo_jump_genpropx10_90_r, "wz_infil_skilo_jump01_pl01_90_r" ];
    else if ( var_6 > 0.0 )
        return [ "wz_infil_skilo_jump_genpropx10_180_l", %wz_infil_skilo_jump_genpropx10_180_l, "wz_infil_skilo_jump01_pl01_180_l" ];
    else
        return [ "wz_infil_skilo_jump_genpropx10_180_r", %wz_infil_skilo_jump_genpropx10_180_r, "wz_infil_skilo_jump01_pl01_180_r" ];
}

_id_1274B( var_0 )
{
    var_1 = "";

    if ( var_0 scripts\mp\gametypes\br_public.gsc::updatedragonsbreath() )
        var_1 = "br_infil_squad_leader_jump";
    else
        var_1 = "br_infil_squadmate_jump";

    var_0 scripts\mp\gametypes\br_public.gsc::_id_1276A( var_1, var_0.team, var_0 );
}

watchinfiljumpanim( var_0 )
{
    self endon( "death_or_disconnect" );

    if ( !isdefined( level.infiljumpentsspawned ) )
        level.infiljumpentsspawned = 0;

    self.shouldhumanspawntags = 0;
    self waittill( "br_jump" );
    var_1 = scripts\mp\gametypes\br_public.gsc::round_enemy_stuck_logic( self.team, self.squadindex );
    var_2 = [];

    if ( self.jumptype == "leader" )
    {
        foreach ( var_4 in var_1 )
        {
            if ( isdefined( var_4.infilanimindex ) )
                var_2[var_2.size] = var_4;
        }
    }
    else if ( self.jumptype == "solo" || self.jumptype == "outOfBounds" )
        var_2 = [ self ];

    var_6 = var_2.size > 0;

    if ( var_6 )
    {
        var_7 = getdvarint( "br_infil_play_jump_anims", 1 ) != 0;

        if ( level.infiljumpentsspawned >= 100 )
            var_7 = 0;

        var_8 = undefined;

        if ( var_7 )
        {
            var_8 = 0;
            [var_10, var_11, var_12] = remove_veh_spawners_from_passive_wave_spawning( var_0 );
            var_13 = remove_objective_on_flag( var_0 );
            var_14["parent"] = spawn( "script_model", var_13.origin );
            level.infiljumpentsspawned++;
            var_14["parent"] setmodel( "generic_prop_x10" );
            var_14["parent"] linkto( var_13, "tag_body", ( 0, 0, 0 ), ( 0, 0, 0 ) );

            foreach ( var_4 in var_2 )
            {
                if ( !isdefined( var_4.infilanimindex ) )
                    var_4.infilanimindex = 1;

                var_16 = "j_prop_" + ( var_4.infilanimindex + 2 );
                var_14[var_16] = spawn( "script_model", var_14["parent"] gettagorigin( var_16 ) );
                level.infiljumpentsspawned++;
                var_14[var_16] setmodel( "tag_player" );
                var_14[var_16] linkto( var_14["parent"], var_16, ( 0, 0, 0 ), ( 0, 0, 0 ) );
                var_4 playerlinkto( var_14[var_16], "tag_player" );
                var_4 playershow( 1 );
                var_4 playanimscriptsceneevent( "scripted_scene", var_12 );
                var_4.infilanimindex = undefined;
                var_4 playlocalsound( "scr_br_infil_jump_stinger" );
                level thread _id_1274B( var_4 );
            }

            var_14["parent"] scriptmodelplayanim( var_10, "prop" );
            var_18 = getanimlength( var_11 );
            var_19 = 1.0;
            var_18 = max( var_18, var_19 + 0.1 );
            wait( var_18 - var_19 );

            foreach ( var_4 in var_2 )
                var_4 cameradefault();

            wait( var_19 );

            foreach ( var_23 in var_14 )
            {
                var_23 delete();
                level.infiljumpentsspawned--;
            }
        }
        else
        {
            var_8 = 1;
            waittillframeend;
        }

        foreach ( var_4 in var_2 )
        {
            var_4.infilanimindex = undefined;
            var_4 stopanimscriptsceneevent();
            var_4 notify( "infil_jump_done" );
            var_4 scripts\mp\gametypes\br.gsc::_id_1254E();
        }

        if ( var_8 )
        {
            waitframe();
            var_13 = remove_objective_on_flag( var_0 );

            if ( isdefined( var_13 ) )
            {
                if ( isdefined( var_13.playeroffsets ) && isdefined( var_13.currentplayeroffset ) )
                {
                    foreach ( var_4 in var_2 )
                    {
                        var_28 = var_13.playeroffsets[var_13.currentplayeroffset];
                        var_4 setorigin( var_13.origin + var_28, 1, 1 );
                        var_13.currentplayeroffset++;

                        if ( var_13.currentplayeroffset == var_13.playeroffsets.size )
                            var_13.currentplayeroffset = 0;

                        var_4 playershow( 1 );
                        level thread _id_1274B( var_4 );
                    }
                }
            }
        }
    }
}

playinfilplayeranims( var_0, var_1 )
{
    var_2 = _id_1256D( var_0 );
    var_3 = scripts\engine\utility::ter_op( isdefined( var_1 ), var_1, level.players );

    foreach ( var_5 in var_3 )
    {
        if ( !isdefined( var_5 ) )
            continue;

        var_5 thread [[ level.parachutetakeweaponscb ]]();
        var_5 scripts\mp\gametypes\br.gsc::_id_1254D();
        scripts\mp\utility\game::_id_131A3( var_5, 1 );
        var_5.plotarmor = 1;
        var_5 unlink();
        var_5 playerlinktopositionent( var_0 );
        var_6 = var_5 _id_1256E( var_0 );
        var_5 playanimscriptsceneevent( "scripted_scene", var_6 );
    }

    wait( var_2 );
    var_3 = scripts\engine\utility::ter_op( isdefined( var_1 ), var_1, level.players );

    foreach ( var_5 in var_3 )
    {
        if ( !isdefined( var_5 ) )
            continue;

        var_5 thread playerplayinfilloopanim( var_0 );
    }
}

_id_1256D( var_0 )
{
    if ( scripts\mp\gametypes\br_public.gsc::tv_station_intro_already_played() )
        return getanimlength( %wz_infil_mindia8_solo_player );
    else if ( scripts\mp\gametypes\br_public.gsc::usefailcapacitymsg() )
        return getanimlength( %wz_infil_skilo_single_sdr01 );
    else
        return getanimlength( %sdr_mp_infil_ac130_redux_player1 );
}

_id_1256E( var_0 )
{
    var_1 = "";
    var_2 = self hasfemalecustomizationmodel();

    if ( var_2 )
        var_1 = "_fem";

    if ( scripts\mp\gametypes\br_public.gsc::tv_station_intro_already_played() )
    {
        if ( self.stop_counter_beep_sfx_on_bomb_vests )
            return "wz_infil_mindia8_solo_player" + var_1;
        else
            return "wz_infil_mindia8_squad_player" + self.infilanimindex + var_1;
    }
    else if ( scripts\mp\gametypes\br_public.gsc::usefailcapacitymsg() )
    {
        if ( self.stop_counter_beep_sfx_on_bomb_vests )
            return "wz_infil_skilo_single_sdr01" + var_1;
        else
            return "wz_infil_skilo_squad_sdr0" + self.infilanimindex + var_1;
    }
    else
        return "sdr_mp_infil_ac130_redux_player" + self.infilanimindex;
}

_id_1256F( var_0 )
{
    if ( scripts\mp\gametypes\br_public.gsc::tv_station_intro_already_played() )
    {
        if ( self.stop_counter_beep_sfx_on_bomb_vests )
            return "wz_infil_mindia8_loop_pl01";
        else
            return "wz_infil_mindia8_loop_pl0" + self.infilanimindex;
    }
    else if ( scripts\mp\gametypes\br_public.gsc::usefailcapacitymsg() )
    {
        if ( self.stop_counter_beep_sfx_on_bomb_vests )
            return "wz_infil_skilo_squad_sdr01_loop";
        else
            return "wz_infil_skilo_squad_sdr0" + self.infilanimindex + "_loop";
    }
    else
        return "sdr_mp_infil_ac130_loop_pl0" + self.infilanimindex;
}

_id_12571( var_0 )
{
    if ( scripts\mp\gametypes\br_public.gsc::tv_station_intro_already_played() )
    {
        if ( self.stop_counter_beep_sfx_on_bomb_vests )
            return var_0.playerpositionents["child_solo"];
        else
            return var_0.playerpositionents["child_squad_" + self.infilanimindex];
    }
    else if ( scripts\mp\gametypes\br_public.gsc::usefailcapacitymsg() )
    {
        if ( self.stop_counter_beep_sfx_on_bomb_vests )
            return var_0.playerpositionents["child_solo"];
        else
            return var_0.playerpositionents["child_squad_" + self.infilanimindex];
    }
    else
        return var_0.playerpositionents["j_prop_" + self.infilanimindex];
}

_id_12572( var_0 )
{
    if ( scripts\mp\gametypes\br_public.gsc::tv_station_intro_already_played() )
    {
        if ( self.stop_counter_beep_sfx_on_bomb_vests )
            return "j_prop_1";
        else
            return "j_prop_" + self.infilanimindex;
    }
    else if ( scripts\mp\gametypes\br_public.gsc::usefailcapacitymsg() )
    {
        if ( self.stop_counter_beep_sfx_on_bomb_vests )
            return "j_prop_1";
        else
            return "j_prop_" + self.infilanimindex;
    }
    else
        return "j_prop_" + self.infilanimindex;
}

playerlinktopositionent( var_0 )
{
    if ( isai( self ) && !istrue( self.hasspawned ) )
        return;

    if ( !isdefined( self.infilanimindex ) )
        self.infilanimindex = 1;

    var_1 = _id_12571( var_0 );
    self playerlinkto( var_1, "tag_player" );
}

playerplayinfilloopanim( var_0 )
{
    if ( !isdefined( self.infilanimindex ) )
        self.infilanimindex = 1;

    if ( !isdefined( self.stop_counter_beep_sfx_on_bomb_vests ) )
    {
        var_1 = scripts\mp\gametypes\br_public.gsc::round_enemy_stuck_logic( self.team, self.squadindex );
        self.stop_counter_beep_sfx_on_bomb_vests = var_1.size == 1;
    }

    var_2 = _id_1256F( var_0 );
    self playanimscriptsceneevent( "scripted_scene", var_2 );
    thread watchinfiljumpanim( var_0 );
}

_id_12AB5( var_0 )
{
    var_0 endon( "stopScene" );
    var_0.staticc130 waittillmatch( "plane", "gored" );
    var_1 = getentitylessscriptablearrayinradius( "infil_blinking_light", "script_noteworthy" );

    foreach ( var_3 in var_1 )
        var_3 setscriptablepartstate( "light_blinking_slow", "light_on", 1 );
}

serverroomrewardlocs( var_0 )
{
    var_0 endon( "stopScene" );
    var_0.staticc130 waittillmatch( "plane", "gogreen" );
    var_1 = getentitylessscriptablearrayinradius( "infil_blinking_light", "script_noteworthy" );

    foreach ( var_3 in var_1 )
        var_3 setscriptablepartstate( "light_blinking_slow", "light_jump", 1 );
}

_id_133B1( var_0 )
{
    var_0 endon( "stopScene" );
    var_1 = getentitylessscriptablearrayinradius( "infil_green_light", "script_noteworthy" );
    var_2 = getentitylessscriptablearrayinradius( "infil_green_light_spot", "script_noteworthy" );
    var_3 = getentitylessscriptablearrayinradius( "infil_red_light", "script_noteworthy" );
    var_4 = getentitylessscriptablearrayinradius( "infil_red_light_spot", "script_noteworthy" );

    foreach ( var_6 in var_1 )
        var_6 setscriptablepartstate( "light_blinking_infil_wz_island_green", "light_off_hold", 1 );

    foreach ( var_6 in var_2 )
        var_6 setscriptablepartstate( "light_blinking_infil_wz_island_green_spot", "light_off_hold", 1 );

    foreach ( var_6 in var_3 )
        var_6 setscriptablepartstate( "light_blinking_infil_wz_island_red", "light_on", 1 );

    foreach ( var_6 in var_4 )
        var_6 setscriptablepartstate( "light_blinking_infil_wz_island_red_spot", "light_on", 1 );

    wait 4.6;

    foreach ( var_6 in var_1 )
        var_6 setscriptablepartstate( "light_blinking_infil_wz_island_green", "light_jump", 1 );

    foreach ( var_6 in var_2 )
        var_6 setscriptablepartstate( "light_blinking_infil_wz_island_green_spot", "light_jump", 1 );

    foreach ( var_6 in var_3 )
        var_6 setscriptablepartstate( "light_blinking_infil_wz_island_red", "light_jump", 1 );

    foreach ( var_6 in var_4 )
        var_6 setscriptablepartstate( "light_blinking_infil_wz_island_red_spot", "light_jump", 1 );
}

_id_11FAC( var_0 )
{
    var_1 = getentitylessscriptablearrayinradius( "infil_blinking_light", "script_noteworthy" );

    foreach ( var_3 in var_1 )
        var_3 setscriptablepartstate( "light_blinking_slow", "light_off_hold", 1 );
}

_id_126F4( var_0, var_1 )
{
    var_0 endon( "stopScene" );
    var_0.staticc130 scripts\engine\utility::waittill_match_or_timeout( "plane", "opendoor", 30.0 );
    var_2 = scripts\engine\utility::ter_op( isdefined( var_1 ), var_1, level.players );

    foreach ( var_4 in var_2 )
    {
        if ( !isdefined( var_4 ) || isbot( var_4 ) )
            continue;

        var_4 scripts\mp\utility\player::_id_1328C( "100", 1 );
    }

    var_0.aidoorchief scripts\mp\utility\player::_id_1328C( "100" );
}

headoffset( var_0, var_1 )
{
    var_2 = scripts\engine\utility::ter_op( isdefined( var_1 ), var_1, level.players );

    foreach ( var_4 in var_2 )
    {
        if ( !isdefined( var_4 ) )
            continue;

        var_4.manualoverridewindmaterial = undefined;
    }

    var_0.aidoorchief scripts\mp\utility\player::_id_1328C( "0" );
}

_id_126F5( var_0, var_1 )
{
    var_0 endon( "stopScene" );
    var_2 = scripts\engine\utility::ter_op( isdefined( var_1 ), var_1, level.players );

    foreach ( var_4 in var_2 )
    {
        if ( !isdefined( var_4 ) || isbot( var_4 ) )
            continue;

        var_4 scripts\mp\utility\player::_id_1328C( "80", 1 );
    }
}

headshot_distance( var_0, var_1 )
{
    var_2 = scripts\engine\utility::ter_op( isdefined( var_1 ), var_1, level.players );

    foreach ( var_4 in var_2 )
    {
        if ( !isdefined( var_4 ) )
            continue;

        var_4.manualoverridewindmaterial = undefined;
    }
}

_id_126F6( var_0, var_1 )
{
    var_0 endon( "stopScene" );
    var_0.gas_trigger_think scripts\engine\utility::waittill_match_or_timeout( "camera", "opendoor", 30.0 );
    var_2 = scripts\engine\utility::ter_op( isdefined( var_1 ), var_1, level.players );

    foreach ( var_4 in var_2 )
    {
        if ( !isdefined( var_4 ) || isbot( var_4 ) )
            continue;

        var_4 scripts\mp\utility\player::_id_1328C( "80", 1 );
    }
}

healdamage( var_0, var_1 )
{
    var_2 = scripts\engine\utility::ter_op( isdefined( var_1 ), var_1, level.players );

    foreach ( var_4 in var_2 )
    {
        if ( !isdefined( var_4 ) )
            continue;

        var_4.manualoverridewindmaterial = undefined;
    }
}

healthpack_health( var_0 )
{
    _id_14361( 7.7 );
    var_1 = scripts\engine\utility::ter_op( isdefined( var_0 ), var_0, level.players );

    foreach ( var_3 in var_1 )
    {
        if ( !isdefined( var_3 ) )
            continue;

        var_3 clearsoundsubmix( "mp_br_infil_ac130", 30.0 );
    }
}

healthpool( var_0 )
{
    _id_14361( 0.65 );
    var_1 = scripts\engine\utility::ter_op( isdefined( var_0 ), var_0, level.players );

    foreach ( var_3 in var_1 )
    {
        if ( !isdefined( var_3 ) )
            continue;

        var_3 clearsoundsubmix( "mp_br_infil_anim", 3.0 );
    }
}

health_remaining_max( var_0 )
{
    _id_14361( 0.5 );
    var_1 = scripts\engine\utility::ter_op( isdefined( var_0 ), var_0, level.players );

    foreach ( var_3 in var_1 )
    {
        if ( !isdefined( var_3 ) )
            continue;

        var_3 clearsoundsubmix( "fade_to_black_all_except_music_scripted5_and_amb", 1.0 );
    }
}

_id_131BF( var_0 )
{
    _id_14361( 2.0 );
    var_1 = scripts\engine\utility::ter_op( isdefined( var_0 ), var_0, level.players );

    foreach ( var_3 in var_1 )
    {
        if ( !isdefined( var_3 ) )
            continue;

        var_3 clearsoundsubmix( "fade_to_black_all_except_music_and_scripted5", 0.5 );
        var_3 setsoundsubmix( "fade_to_black_all_except_music_scripted5_and_amb", 2.0 );
    }
}

_id_12C3E( var_0 )
{
    var_1 = scripts\engine\utility::ter_op( isdefined( var_0 ), var_0, level.players );

    foreach ( var_3 in var_1 )
    {
        if ( !isdefined( var_3 ) )
            continue;

        var_4 = var_3 getlinkedchildren();

        if ( isdefined( var_4 ) && var_4.size )
        {
            var_5 = var_4.size;

            if ( var_5 > 0 )
            {
                var_6 = "Infil Player (" + var_3.name + ") with (" + var_5 + ") linked ents: ";

                foreach ( var_8 in var_4 )
                {
                    if ( isdefined( var_8.equipmentref ) )
                    {
                        var_6 = var_6 + ( "equip:" + var_8.equipmentref + "," );
                        continue;
                    }

                    if ( isdefined( var_8.weapon_name ) )
                    {
                        var_6 = var_6 + ( "weapon:" + var_8.weapon_name + "," );
                        continue;
                    }

                    if ( isdefined( var_8.model ) )
                    {
                        var_6 = var_6 + ( "model:" + var_8.model + "," );
                        continue;
                    }

                    var_6 = var_6 + "?,";
                }

                scripts\mp\utility\script::laststand_dogtags( var_6 );
            }
        }
    }
}

_id_1273C( var_0, var_1 )
{
    _id_12C3E( var_1 );

    if ( scripts\mp\gametypes\br_public.gsc::tv_station_intro_already_played() )
        _id_1245A( var_0, var_1 );
    else if ( scripts\mp\gametypes\br_public.gsc::usefailcapacitymsg() )
        _id_12765( var_0, var_1 );
    else
        playac130infilanim( var_0, var_1 );
}

_id_1245A( var_0, var_1 )
{
    thread _id_131BF( var_1 );
    _id_12459( var_0, var_1 );
    _id_13CE9( var_0, var_1 );
    mp_m_trench_patch_giveplayer_c4( var_0, var_1 );
}

playac130infilanim( var_0, var_1 )
{
    thread _id_131BF( var_1 );
    _id_12442( var_0, var_1 );
    _id_13CE8( var_0, var_1 );
    mp_m_speed_patch( var_0, var_1 );
}

_id_12765( var_0, var_1 )
{
    thread _id_131BF( var_1 );
    _id_12764( var_0, var_1 );
    _id_13CF1( var_0, var_1 );
    neverspectate( var_0, var_1 );
}

helicopter_death_lockon_clear( var_0 )
{
    var_0 endon( "stopScene" );
    var_0.staticc130 waittillmatch( "plane", "transitionstart" );
    triggerfx( var_0.helicountdownendcallback );
}

_id_1324F( var_0 )
{
    var_0.x = 0;
    var_0.y = 0;
    var_0 setshader( "white", 640, 480 );
    var_0.alignx = "left";
    var_0.aligny = "top";
    var_0.horzalign = "fullscreen";
    var_0.vertalign = "fullscreen";
    var_0.sort = -1;
    var_0.color = ( 0.21, 0.21, 0.17 );
    var_0.alpha = 0;
    var_0 sendcollectedclientanticheatdata( 1 );
}

_id_13250( var_0 )
{
    var_0.x = 0;
    var_0.y = 0;
    var_0 setshader( "white", 640, 480 );
    var_0.alignx = "left";
    var_0.aligny = "top";
    var_0.horzalign = "fullscreen";
    var_0.vertalign = "fullscreen";
    var_0.sort = -1;
    var_0.color = ( 0.93, 0.95, 0.94 );
    var_0.alpha = 0;
    var_0 sendcollectedclientanticheatdata( 1 );
}

remove_munitions_globally()
{
    var_0 = undefined;
    var_1 = undefined;

    if ( scripts\mp\gametypes\br_public.gsc::tv_station_intro_already_played() )
    {
        var_0 = 0.15;
        var_1 = 0.2;
    }
    else if ( scripts\mp\gametypes\br_public.gsc::usefailcapacitymsg() )
    {
        var_0 = 0.16;
        var_1 = 0.5;
    }
    else
    {
        var_0 = 0.16;
        var_1 = 0.5;
    }

    return [ var_0, var_1 ];
}

patch_ent_fixes( var_0, var_1 )
{
    level endon( "game_ended" );
    var_2 = remove_munitions_in_radius( var_0 );

    if ( !isdefined( var_2 ) )
        return;

    var_3 = scripts\engine\utility::ter_op( isdefined( var_1 ), var_1, level.players );
    var_4 = level.players.size == var_3.size;

    if ( var_4 )
    {
        level.stop_passedby_once = newhudelem();
        _id_1324F( level.stop_passedby_once );
    }
    else
    {
        foreach ( var_6 in var_3 )
        {
            if ( !isdefined( var_6 ) )
                continue;

            var_6.stop_passedby_once = newclienthudelem( var_6 );
            _id_1324F( var_6.stop_passedby_once );
        }
    }

    [var_9, var_10] = remove_munitions_globally();
    var_2 waittillmatch( "camera", "fadeinstart" );

    if ( var_4 )
    {
        level.stop_passedby_once fadeovertime( var_9 );
        level.stop_passedby_once.alpha = 1;
    }
    else
    {
        foreach ( var_6 in var_3 )
        {
            if ( !isdefined( var_6 ) )
                continue;

            var_6.stop_passedby_once fadeovertime( var_9 );
            var_6.stop_passedby_once.alpha = 1;
        }
    }

    var_2 waittillmatch( "camera", "fadeoutstart" );

    if ( var_4 )
    {
        level.stop_passedby_once fadeovertime( var_10 );
        level.stop_passedby_once.alpha = 0;
    }
    else
    {
        foreach ( var_6 in var_3 )
        {
            if ( !isdefined( var_6 ) )
                continue;

            var_6.stop_passedby_once fadeovertime( var_10 );
            var_6.stop_passedby_once.alpha = 0;
        }
    }

    _id_14361( var_10 + 0.1 );

    if ( var_4 )
    {
        level.stop_passedby_once destroy();
        level.stop_passedby_once = undefined;
    }
    else
    {
        foreach ( var_6 in var_3 )
        {
            if ( !isdefined( var_6 ) )
                continue;

            var_6.stop_passedby_once destroy();
        }
    }
}

helicopter_firendly_dmg_text_display( var_0, var_1 )
{
    level endon( "game_ended" );
    var_0 endon( "stopScene" );
    var_2 = remove_munitions_in_radius( var_0 );

    if ( !isdefined( var_2 ) )
        return;

    var_3 = scripts\engine\utility::ter_op( isdefined( var_1 ), var_1, level.players );
    var_4 = level.players.size == var_3.size;

    if ( var_4 )
    {
        level.stop_turbulence_just_before_the_end = newhudelem();
        _id_13250( level.stop_turbulence_just_before_the_end );
    }
    else
    {
        foreach ( var_6 in var_3 )
        {
            if ( !isdefined( var_6 ) )
                continue;

            var_6.stop_turbulence_just_before_the_end = newclienthudelem( var_6 );
            _id_13250( var_6.stop_turbulence_just_before_the_end );
        }
    }

    var_8 = 0.2;
    var_9 = 0.6;
    var_2 waittillmatch( "camera", "coverstart" );
    wait 0.12;

    if ( var_4 )
    {
        level.stop_turbulence_just_before_the_end fadeovertime( var_8 );
        level.stop_turbulence_just_before_the_end.alpha = 1;
    }
    else
    {
        foreach ( var_6 in var_3 )
        {
            if ( !isdefined( var_6 ) )
                continue;

            var_6.stop_turbulence_just_before_the_end fadeovertime( var_8 );
            var_6.stop_turbulence_just_before_the_end.alpha = 1;
        }
    }

    var_2 waittillmatch( "camera", "end" );
    wait 0.3;

    if ( var_4 )
    {
        level.stop_turbulence_just_before_the_end fadeovertime( var_9 );
        level.stop_turbulence_just_before_the_end.alpha = 0;
    }
    else
    {
        foreach ( var_6 in var_3 )
        {
            if ( !isdefined( var_6 ) )
                continue;

            var_6.stop_turbulence_just_before_the_end fadeovertime( var_9 );
            var_6.stop_turbulence_just_before_the_end.alpha = 0;
        }
    }

    _id_14361( var_9 + 0.1 );

    if ( var_4 )
    {
        level.stop_turbulence_just_before_the_end destroy();
        level.stop_turbulence_just_before_the_end = undefined;
    }
    else
    {
        foreach ( var_6 in var_3 )
        {
            if ( !isdefined( var_6 ) )
                continue;

            var_6.stop_turbulence_just_before_the_end destroy();
        }
    }
}

stimmodelattached( var_0 )
{
    var_1 = getdvarfloat( "LKOLRONRNQ" );
    var_2 = getdvarint( "LTQMSPKRKO" );
    var_3 = getdvarint( "MROOOROPKL" );
    var_4 = getdvarfloat( "NPONLLLSPL" );
    setdvar( "LKOLRONRNQ", 1000.0 );
    setdvar( "LTQMSPKRKO", 6 );
    setdvar( "MROOOROPKL", 8 );
    setdvar( "NPONLLLSPL", 0.25 );
    var_0 scripts\engine\utility::waittill_either( "infil_reset_light_dvars", "stopScene" );
    setdvar( "LKOLRONRNQ", var_1 );
    setdvar( "LTQMSPKRKO", var_2 );
    setdvar( "MROOOROPKL", var_3 );
    setdvar( "NPONLLLSPL", var_4 );
}

stompeenemyprogressupdate( var_0 )
{
    var_1 = getdvarfloat( "LKOLRONRNQ" );
    var_2 = getdvarint( "LTQMSPKRKO" );
    var_3 = getdvarint( "MROOOROPKL" );
    var_4 = getdvarfloat( "NPONLLLSPL" );
    setdvar( "LKOLRONRNQ", 1000.0 );
    setdvar( "LTQMSPKRKO", 8 );
    setdvar( "MROOOROPKL", 8 );
    setdvar( "NPONLLLSPL", 0.25 );
    var_0 scripts\engine\utility::waittill_either( "infil_reset_light_dvars", "stopScene" );
    setdvar( "LKOLRONRNQ", var_1 );
    setdvar( "LTQMSPKRKO", var_2 );
    setdvar( "MROOOROPKL", var_3 );
    setdvar( "NPONLLLSPL", var_4 );
}

givecustomloadout( var_0 )
{
    if ( isdefined( var_0.givestandardtableloadout ) )
        var_0.givestandardtableloadout hide();

    var_0.gas_trigger_think scripts\engine\utility::waittill_match_or_timeout( "camera", "showdoor", 30.0 );

    if ( isdefined( var_0.givestandardtableloadout ) )
        var_0.givestandardtableloadout show();
}

cargo_truck_mg_initinteract( var_0, var_1 )
{
    var_2 = undefined;

    if ( var_0.infil_anim_type == "player" )
    {
        if ( !isdefined( var_1 ) )
        {
            foreach ( var_4 in level.teamnamelist )
            {
                var_5 = scripts\mp\gametypes\br_public.gsc::round_enemies_fallback_logic( var_4 );

                for ( var_6 = 0; var_6 < var_5.size; var_6++ )
                {
                    var_7 = var_5[var_6];
                    var_8 = scripts\mp\gametypes\br_public.gsc::round_enemy_stuck_logic( var_4, var_7 );
                    var_9 = var_8.size == 1;
                    var_10 = fivecontracts( var_8.size );

                    foreach ( var_14, var_12 in var_8 )
                    {
                        if ( var_12 scripts\mp\gametypes\br_public.gsc::updatedragonsbreath() )
                            var_12.infilanimindex = 1;
                        else
                        {
                            var_13 = scripts\engine\utility::random( var_10 );
                            var_12.infilanimindex = var_13;
                            var_10 = scripts\engine\utility::array_remove( var_10, var_13 );
                        }

                        var_12.stop_counter_beep_sfx_on_bomb_vests = var_9;
                    }
                }
            }

            _id_12ACC();

            foreach ( var_12 in level.players )
            {
                if ( isdefined( var_12 ) && !isdefined( var_12.stop_counter_beep_sfx_on_bomb_vests ) )
                {
                    var_12.infilanimindex = 1;
                    var_12.stop_counter_beep_sfx_on_bomb_vests = 1;
                }
            }

            return;
        }

        foreach ( var_12 in var_1 )
        {
            if ( !isdefined( var_12 ) )
                continue;

            var_12 playerhide();
            var_12 showtoplayer( var_12 );
            var_12.infilanimindex = 1;
            var_12.stop_counter_beep_sfx_on_bomb_vests = 1;
        }

        return;
    }
    else
    {

    }
}

_id_12442( var_0, var_1 )
{
    var_0 endon( "stopScene" );
    cargo_truck_mg_initinteract( var_0, var_1 );
    var_2 = 34;
    var_3 = 5.6;
    var_4 = 50.7;
    var_5 = 2.0;
    var_6 = 4;
    var_0.cameraent scriptmodelplayanim( "sdr_mp_infil_ac130_redux_players_cam", "camera" );

    if ( isdefined( var_0.gas_trigger ) )
        var_0.gas_trigger scriptmodelplayanim( "sdr_mp_infil_ac130_redux_players_cam", "camera" );

    if ( isdefined( var_0.movingc130 ) )
        var_0.movingc130 stoploopsound();

    var_7 = scripts\mp\gametypes\br_public.gsc::isusinginfilselection();
    var_0.aidoorchief hide();
    var_8 = scripts\engine\utility::ter_op( isdefined( var_1 ), var_1, level.players );

    foreach ( var_10 in var_8 )
    {
        if ( !isdefined( var_10 ) )
            continue;

        if ( !var_7 )
        {
            var_10 setsoundsubmix( "mp_br_infil_anim", 0.0 );
            var_10 setsoundsubmix( "mp_br_infil_music", 0.0 );

            if ( !istrue( level.vehicle_collision_getleveldata ) && !isdefined( level._id_12D05 ) )
                var_10 setsoundsubmix( "mp_br_infil_ac130", 0.0 );

            var_10 setclienttriggeraudiozone( "mp_donetsk_infil_int", 1.0 );
        }

        var_0.gas_trap_weapon = "j_prop_" + var_10.infilanimindex;
        var_10 cameraunlink();
        var_10 cameralinkto( var_0.cameraent, var_0.gas_trap_weapon, 1, 1 );
        var_10 setclientdvar( "QTSPTNLOL", var_2 );
        var_10 enablephysicaldepthoffieldscripting();
        var_10 setphysicaldepthoffield( var_3, var_4, var_5, var_6 );
        var_10 scripts\mp\utility\player::_freezelookcontrols( 1 );
        var_0.aidoorchief showtoplayer( var_10 );
    }

    thread healthpool( var_1 );
    thread getlightingvalues();
    playfxontag( level._effect["vfx_br_ac130_clouds"], var_0.staticc130, "tag_body" );
    var_0.staticc130 scriptmodelplayanim( "sdr_mp_infil_ac130_redux_players_ac130", "plane" );

    if ( isdefined( var_0.movingc130 ) )
    {
        var_0.movingc130 scriptmodelplayanim( "sdr_mp_infil_ac130_redux_players_ac130", "plane" );
        var_0.movingc130.innards scriptmodelplayanim( "sdr_mp_infil_ac130_redux_players_ac130", "planeInnards" );
    }

    var_0.playerpositionents["parent"] scriptmodelplayanim( "sdr_mp_infil_ac130_redux_character_link", "prop" );

    if ( var_0.infil_anim_type == "script_model" )
    {
        var_0.playerslot1 scriptmodelplayanim( "sdr_mp_infil_ac130_redux_player1", "p1" );
        var_0.playerslot2 scriptmodelplayanim( "sdr_mp_infil_ac130_redux_player2", "p2" );
        var_0.playerslot3 scriptmodelplayanim( "sdr_mp_infil_ac130_redux_player3", "p3" );
        var_0.playerslot4 scriptmodelplayanim( "sdr_mp_infil_ac130_redux_player4", "p4" );
    }
    else if ( var_0.infil_anim_type == "player" )
        thread playinfilplayeranims( var_0, var_1 );

    var_0.aidoorchief scriptmodelplayanim( "sdr_mp_infil_ac130_redux_doorchief", "doorchief" );
    level thread _id_11FAC( var_0 );
    level thread _id_12AB5( var_0 );
    level thread serverroomrewardlocs( var_0 );
    level thread _id_126F4( var_0, var_1 );
    level thread helicopter_death_lockon_clear( var_0 );
    level thread patch_ent_fixes( var_0, var_1 );
    level thread stimmodelattached( var_0 );
    level thread ks_circleminimapradius( var_0, var_1 );
    var_0.cameraent scripts\engine\utility::waittill_match_or_timeout( "camera", "transition", 30.0 );
    var_0 notify( "infil_reset_light_dvars" );
    level headoffset( var_0, var_1 );
}

_id_12459( var_0, var_1, var_2, var_3 )
{
    var_0 endon( "stopScene" );
    cargo_truck_mg_initinteract( var_0, var_1 );
    var_4 = 48;
    var_5 = 5.6;
    var_6 = 50.7;
    var_7 = 2.0;
    var_8 = 4;
    var_0.gas_trigger_think scriptmodelplayanim( "wz_infil_mindia8_solo_cam", "camera" );

    if ( isdefined( var_0.gas_triggers_init ) )
        var_0.gas_triggers_init scriptmodelplayanim( "wz_infil_mindia8_solo_cam", "camera" );

    var_0.gas_tryplaycoughaudio scriptmodelplayanim( "wz_infil_mindia8_squad_cam", "camera" );

    if ( isdefined( var_0.gas_vfx_and_triggers ) )
        var_0.gas_vfx_and_triggers scriptmodelplayanim( "wz_infil_mindia8_squad_cam", "camera" );

    if ( isdefined( var_0._id_11DBF ) )
        var_0._id_11DBF stoploopsound();

    var_0.bot_gametype_attacker_defender_ai_director_update hide();
    var_0.bot_clear_hq_zone hide();
    var_9 = scripts\engine\utility::ter_op( isdefined( var_1 ), var_1, level.players );

    foreach ( var_11 in var_9 )
    {
        if ( !isdefined( var_11 ) )
            continue;

        var_11 playlocalsound( "br_heli_infil_part2_lr" );
        var_11 setsoundsubmix( "mp_br_infil_anim", 0.0 );
        var_11 setsoundsubmix( "mp_br_infil_music", 0.0 );

        if ( !istrue( level.vehicle_collision_getleveldata ) && !isdefined( level._id_12D05 ) )
            var_11 setsoundsubmix( "mp_br_infil_ac130", 0.0 );

        var_11 setclienttriggeraudiozone( "mp_donetsk_infil_int", 1.0 );
        var_12 = scripts\engine\utility::ter_op( var_11.stop_counter_beep_sfx_on_bomb_vests, var_0.gas_trigger_think, var_0.gas_tryplaycoughaudio );
        var_13 = "j_prop_1";
        var_11 cameraunlink();
        var_11 cameralinkto( var_12, var_13, 1, 1 );
        var_11 setclientdvar( "QTSPTNLOL", var_4 );
        var_11 setclientdvar( "LTMOQONPQ", 1 );
        var_11 enablephysicaldepthoffieldscripting();
        var_11 setphysicaldepthoffield( var_5, var_6, var_7, var_8 );
        var_11 scripts\mp\utility\player::_freezelookcontrols( 1 );
        var_0.bot_gametype_attacker_defender_ai_director_update showtoplayer( var_11 );
        var_0.bot_clear_hq_zone showtoplayer( var_11 );
    }

    thread healthpool( var_1 );

    if ( isdefined( var_0._id_11DBF ) )
        var_0._id_11DBF setscriptablepartstate( "infil_fx_hero", "on" );

    var_0.playerpositionents["parent_solo"] scriptmodelplayanim( "wz_infil_mindia8_solo_character_link", "prop" );
    var_0.playerpositionents["parent_squad"] scriptmodelplayanim( "wz_infil_mindia8_squad_character_link", "prop" );

    if ( var_0.infil_anim_type == "script_model" )
    {
        if ( istrue( var_2 ) )
        {
            var_0._id_1269E show();
            var_0._id_1269F hide();
            var_0._id_126A0 hide();
            var_0._id_126A1 hide();
            var_0._id_126A2 hide();
        }
        else
        {
            var_0._id_1269E hide();
            var_0._id_1269F show();
            var_0._id_126A0 show();
            var_0._id_126A1 show();
            var_0._id_126A2 show();
        }

        var_15 = "";

        if ( istrue( var_3 ) )
            var_15 = "_fem";

        var_0._id_1269E scriptmodelplayanim( "wz_infil_mindia8_solo_player" + var_15, "p1" );
        var_0._id_1269F scriptmodelplayanim( "wz_infil_mindia8_squad_player1" + var_15, "p1" );
        var_0._id_126A0 scriptmodelplayanim( "wz_infil_mindia8_squad_player2" + var_15, "p2" );
        var_0._id_126A1 scriptmodelplayanim( "wz_infil_mindia8_squad_player3" + var_15, "p3" );
        var_0._id_126A2 scriptmodelplayanim( "wz_infil_mindia8_squad_player4" + var_15, "p4" );
    }
    else if ( var_0.infil_anim_type == "player" )
        thread playinfilplayeranims( var_0, var_1 );

    var_0.bot_gametype_attacker_defender_ai_director_update scriptmodelplayanim( "wz_infil_mindia8_solo_pilot", "aiPilot" );
    var_0.bot_clear_hq_zone scriptmodelplayanim( "wz_infil_mindia8_solo_copilot", "aiCopilot" );
    var_0.calloutmarkerpingvo_handleraddnewelement scriptmodelplayanim( "wz_infil_mindia8_armada", "armadaRig" );

    foreach ( var_17 in var_0.calloutmarkerpingvo_getmaxsoundaliaslength )
    {
        var_18 = getanimlength( %wz_infil_mindia8_loop_veh );
        var_19 = randomfloatrange( 0.5, var_18 - 0.5 );
        var_17 scriptmodelplayanim( "wz_infil_mindia8_loop_veh", "armadaChopper", var_19 );
        var_17 setscriptablepartstate( "infil_fx_armada", "on" );

        if ( isdefined( var_17.innards ) )
            var_17.innards scriptmodelplayanim( "wz_infil_mindia8_loop_veh", "armadaChopperInnards", var_19 );
    }

    level thread _id_126F5( var_0, var_1 );
    level thread givecustomloadout( var_0 );
    level thread patch_ent_fixes( var_0, var_1 );
    level thread stompeenemyprogressupdate( var_0 );
    level thread ks_circleminimapradius( var_0, var_1 );
    var_0.gas_trigger_think scripts\engine\utility::waittill_match_or_timeout( "camera", "transition", 30.0 );
    var_0 notify( "infil_reset_light_dvars" );
    level headshot_distance( var_0, var_1 );
}

_id_12764( var_0, var_1, var_2, var_3 )
{
    var_0 endon( "stopScene" );
    cargo_truck_mg_initinteract( var_0, var_1 );
    var_4 = 42;
    var_5 = 5.6;
    var_6 = 50.7;
    var_7 = 2.0;
    var_8 = 4;
    var_0.gas_trigger_think scriptmodelplayanim( "wz_infil_skilo_single_cam", "camera" );

    if ( isdefined( var_0.gas_triggers_init ) )
        var_0.gas_triggers_init scriptmodelplayanim( "wz_infil_skilo_single_cam", "camera" );

    var_0.gas_tryplaycoughaudio scriptmodelplayanim( "wz_infil_skilo_squad_cam", "camera" );

    if ( isdefined( var_0.gas_vfx_and_triggers ) )
        var_0.gas_vfx_and_triggers scriptmodelplayanim( "wz_infil_skilo_squad_cam", "camera" );

    if ( isdefined( var_0._id_11DC3 ) )
        var_0._id_11DC3 stoploopsound();

    var_0._id_13886 setscriptablepartstate( "infil_fx_skilo", "static" );
    var_9 = scripts\mp\gametypes\br_public.gsc::isusinginfilselection();
    var_10 = scripts\engine\utility::ter_op( isdefined( var_1 ), var_1, level.players );

    foreach ( var_12 in var_10 )
    {
        if ( !isdefined( var_12 ) )
            continue;

        if ( !var_9 )
        {
            if ( var_12.stop_counter_beep_sfx_on_bomb_vests )
            {
                thread stop_strafe_minigun_manager( "br_skilo_solo_infil_part1_lr", 0.8, var_12 );
                thread stop_strafe_minigun_manager( "br_skilo_solo_infil_part2_lr", 6.4, var_12 );
            }
            else
            {
                thread stop_strafe_minigun_manager( "br_skilo_quad_infil_part1_lr", 0.8, var_12 );
                thread stop_strafe_minigun_manager( "br_skilo_quad_infil_part2_lr", 6.4, var_12 );
            }

            var_12 setsoundsubmix( "mp_br_infil_anim", 0.0 );
            var_12 setsoundsubmix( "mp_br_infil_music", 0.0 );

            if ( !istrue( level.vehicle_collision_getleveldata ) && !isdefined( level._id_12D05 ) )
                var_12 setsoundsubmix( "mp_br_infil_ac130", 0.0 );

            var_12 setclienttriggeraudiozone( "mp_island_infil_int", 1.0 );
        }

        var_13 = scripts\engine\utility::ter_op( var_12.stop_counter_beep_sfx_on_bomb_vests, var_0.gas_trigger_think, var_0.gas_tryplaycoughaudio );
        var_14 = "j_prop_1";
        var_12 cameraunlink();
        var_12 cameralinkto( var_13, var_14, 1, 1 );
        var_12 setclientdvar( "QTSPTNLOL", var_4 );
        var_12 setclientdvar( "LTMOQONPQ", 1 );
        var_12 enablephysicaldepthoffieldscripting();
        var_12 setphysicaldepthoffield( var_5, var_6, var_7, var_8 );
        var_12 scripts\mp\utility\player::_freezelookcontrols( 1 );
        var_12 calloutmarkerping_getinventoryslot( 5000.0 );
        var_12 scripts\mp\gametypes\br_public.gsc::_id_126B9( var_0._id_13886.origin );
    }

    thread healthpool( var_1 );

    if ( isdefined( var_0._id_11DC3.bunker_numberstation ) )
    {
        var_0._id_11DC3.bunker_numberstation setscriptablepartstate( "infil_fx_clouds", "on" );
        var_0._id_11DC3.bunker_numberstation setscriptablepartstate( "infil_fx_skilo", "moving" );
    }

    thread getlightingvalues();
    var_0.playerpositionents["parent_solo"] scriptmodelplayanim( "wz_infil_skilo_single_sdr_link", "prop" );
    var_0.playerpositionents["parent_squad"] scriptmodelplayanim( "wz_infil_skilo_squad_sdr_link", "prop" );

    if ( var_0.infil_anim_type == "script_model" )
    {
        if ( istrue( var_2 ) )
        {
            var_0._id_1269E show();
            var_0._id_1269F hide();
            var_0._id_126A0 hide();
            var_0._id_126A1 hide();
            var_0._id_126A2 hide();
        }
        else
        {
            var_0._id_1269E hide();
            var_0._id_1269F show();
            var_0._id_126A0 show();
            var_0._id_126A1 show();
            var_0._id_126A2 show();
        }

        var_16 = "";

        if ( istrue( var_3 ) )
            var_16 = "_fem";

        var_0._id_1269E scriptmodelplayanim( "wz_infil_skilo_single_sdr01" + var_16, "p1" );
        var_0._id_1269F scriptmodelplayanim( "wz_infil_skilo_squad_sdr01" + var_16, "p1" );
        var_0._id_126A0 scriptmodelplayanim( "wz_infil_skilo_squad_sdr02" + var_16, "p2" );
        var_0._id_126A1 scriptmodelplayanim( "wz_infil_skilo_squad_sdr03" + var_16, "p3" );
        var_0._id_126A2 scriptmodelplayanim( "wz_infil_skilo_squad_sdr04" + var_16, "p4" );
    }
    else if ( var_0.infil_anim_type == "player" )
        thread playinfilplayeranims( var_0, var_1 );

    if ( isdefined( var_0._id_13886 ) )
        var_0._id_13886 scriptmodelplayanim( "wz_infil_skilo_single_veh", "plane", 0, 1 );

    if ( isdefined( var_0._id_12D98 ) )
        var_0._id_12D98 scriptmodelplayanim( "wz_infil_skilo_single_veh_ropes", "plane", 0, 1 );

    foreach ( var_18 in var_0._id_12915 )
    {
        if ( isdefined( var_18 ) )
            var_18 scriptmodelplayanim( "wz_infil_skilo_single_veh", "plane", 0, 1 );
    }

    if ( isdefined( var_0._id_13887 ) )
        var_0._id_13887 scriptmodelplayanim( "wz_infil_skilo_single_door", "plane", 0, 1 );

    level thread _id_126F6( var_0, var_1 );
    level thread _id_133B1( var_0 );
    level thread patch_ent_fixes( var_0, var_1 );
    level thread helicopter_firendly_dmg_text_display( var_0, var_1 );
    level thread spawn_apache_chopper( var_0, var_1 );
    level thread laser_vfx_think( var_0, 1 );
    level thread stimmodelattached( var_0 );
    level thread ks_circleminimapradius( var_0, var_1 );
    level thread _id_12E63( var_0, var_1 );
    var_0.gas_trigger_think scripts\engine\utility::waittill_match_or_timeout( "camera", "transition", 30.0 );
    var_0 notify( "infil_reset_light_dvars" );
    level thread healdamage( var_0, var_1 );
}

_id_12E63( var_0, var_1 )
{
    if ( getdvarint( "scr_br_infil_skilo_safe_remove_black_border", 1 ) == 0 )
        return;

    var_2 = remove_munitions_in_radius( var_0 );
    var_3 = scripts\engine\utility::ter_op( isdefined( var_1 ), var_1, level.players );
    var_2 scripts\engine\utility::waittill_match_or_timeout( "camera", "end", 30.0 );
    wait 0.25;

    foreach ( var_5 in var_3 )
    {
        if ( !isdefined( var_5 ) )
            continue;

        var_5 setclientomnvar( "ui_br_bink_overlay_state", 0 );
        var_5 skydive_cutparachuteoff();
    }
}

spawn_apache_chopper( var_0, var_1 )
{
    level endon( "game_ended" );

    if ( getdvarint( "scr_br_alt_mode_rebirth_skip_initial_circle", 0 ) == 0 || !isdefined( level.br_circle ) || !isdefined( level.br_circle.dangercircleent ) || istrue( level.br_infils_disabled ) )
        return;

    var_2 = remove_munitions_in_radius( var_0 );
    var_3 = scripts\engine\utility::ter_op( isdefined( var_1 ), var_1, level.players );

    foreach ( var_5 in var_3 )
    {
        if ( !isdefined( var_5 ) )
            continue;

        level.br_circle.dangercircleent hidefromplayer( var_5 );
    }

    var_2 scripts\engine\utility::waittill_match_or_timeout( "camera", "end", 30.0 );

    foreach ( var_5 in var_3 )
    {
        if ( !isdefined( var_5 ) )
            continue;

        level.br_circle.dangercircleent showtoplayer( var_5 );
    }
}

stop_strafe_minigun_manager( var_0, var_1, var_2 )
{
    var_2 endon( "death_or_disconnect" );
    wait( var_1 );
    var_2 playlocalsound( var_0 );
}

ks_circleminimapradius( var_0, var_1 )
{
    var_2 = remove_objective_on_flag( var_0 );

    if ( isdefined( var_2 ) && getdvarint( "scr_br_streamToMovingPlane", 1 ) == 1 )
    {
        var_3 = getdvarint( "scr_br_streamToMovingPlaneDelay", 8 );
        wait( var_3 );
        var_4 = var_2.origin;
        var_5 = getdvarint( "scr_br_streamToMovingPlaneForward", 0 );

        if ( var_5 > 0 )
        {
            var_6 = anglestoforward( var_2.angles );
            var_4 = var_2.origin + var_6 * var_5;
        }

        var_7 = scripts\engine\utility::ter_op( isdefined( var_1 ), var_1, level.players );

        foreach ( var_9 in var_7 )
        {
            if ( !isdefined( var_9 ) )
                continue;

            var_9 calloutmarkerping_getinventoryslot( 0.0 );
            var_9 scripts\mp\gametypes\br_public.gsc::_id_126B9( var_4 );
        }
    }
}

_id_138F3( var_0, var_1 )
{
    var_2 = remove_objective_on_flag( var_0 );

    if ( isdefined( var_2 ) && getdvarint( "scr_br_streamToMovingPlane", 1 ) == 1 )
    {
        var_3 = getdvarint( "scr_br_streamToMovingPlaneEndDelay", 5 );
        wait( var_3 );
        var_4 = scripts\engine\utility::ter_op( isdefined( var_1 ), var_1, level.players );

        foreach ( var_6 in var_4 )
        {
            if ( !isdefined( var_6 ) )
                continue;

            var_6 thread scripts\mp\gametypes\br_public.gsc::_id_1252B();
        }
    }
}

_id_13F06( var_0, var_1 )
{
    wait( var_0 );
    var_2 = scripts\engine\utility::ter_op( isdefined( var_1 ), var_1, level.players );

    foreach ( var_4 in var_2 )
    {
        if ( !isdefined( var_4 ) )
            continue;

        var_4 scripts\mp\utility\player::_freezelookcontrols( 0 );
    }
}

_id_13CE8( var_0, var_1 )
{
    var_2 = 65;
    var_3 = 14;
    var_4 = 35;
    var_5 = 2.0;
    var_6 = 4;

    if ( isdefined( var_0.gas_trigger ) )
    {
        var_7 = scripts\engine\utility::ter_op( isdefined( var_1 ), var_1, level.players );

        foreach ( var_9 in var_7 )
        {
            if ( !isdefined( var_9 ) )
                continue;

            var_9 calloutmarkerping_getcreatedtime( 0.0 );

            if ( !isdefined( var_9.infilanimindex ) )
                var_9.infilanimindex = 1;

            var_0.gas_trap_weapon = "j_prop_" + var_9.infilanimindex;
            var_9 cameraunlink();
            var_9 cameralinkto( var_0.gas_trigger, var_0.gas_trap_weapon, 1, 1 );
            var_9 setclientdvar( "QTSPTNLOL", var_2 );
            var_9 setphysicaldepthoffield( var_3, var_4, var_5, var_6 );
        }

        thread health_remaining_max( var_1 );
    }
    else
    {
        var_7 = scripts\engine\utility::ter_op( isdefined( var_1 ), var_1, level.players );

        foreach ( var_9 in var_7 )
        {
            if ( !isdefined( var_9 ) )
                continue;

            var_9 calloutmarkerping_getcreatedtime( 0.0 );
        }
    }

    if ( isdefined( var_0.helicountdownendcallback ) )
    {
        if ( isdefined( var_0.movingc130 ) )
            var_0.helicountdownendcallback.origin = var_0.movingc130.origin;
    }

    var_0.staticc130 hide();
    var_0.cameraent unlink();
    var_0.playerpositionents["parent"] unlink();

    if ( isdefined( var_0.movingc130 ) )
    {
        var_0.playerpositionents["parent"] linkto( var_0.movingc130, "", ( 0, 0, 0 ), ( 0, 0, 0 ) );
        var_0.cameraent linkto( var_0.movingc130, "", ( 0, 0, 0 ), ( 0, 0, 0 ) );
        var_0.movingc130 notify( "start_moving" );
    }

    setomnvar( "ui_hide_player_icons", 0 );
    var_7 = scripts\engine\utility::ter_op( isdefined( var_1 ), var_1, level.players );

    foreach ( var_9 in var_7 )
    {
        if ( !isdefined( var_9 ) )
            continue;

        var_9 setclienttriggeraudiozone( "mp_donetsk_infil_ext", 2.0 );
    }

    thread healthpack_health( var_1 );

    if ( var_0.infil_anim_type == "script_model" )
    {
        var_0.playerslot1 scriptmodelplayanim( "sdr_mp_infil_ac130_loop_pl01", "p1" );
        var_0.playerslot2 scriptmodelplayanim( "sdr_mp_infil_ac130_loop_pl02", "p2" );
        var_0.playerslot3 scriptmodelplayanim( "sdr_mp_infil_ac130_loop_pl03", "p3" );
        var_0.playerslot4 scriptmodelplayanim( "sdr_mp_infil_ac130_loop_pl04", "p4" );
    }

    var_0.aidoorchief scriptmodelplayanim( "sdr_mp_infil_ac130_loop_doorchief", "doorchief" );
    level thread playac130infilloopanims( var_0 );

    if ( isdefined( var_0.gas_trigger ) )
        var_0.gas_trigger waittillmatch( "camera", "end" );

    thread _id_13F06( 1.2, var_1 );
}

_id_13CE9( var_0, var_1 )
{
    var_2 = 65;
    var_3 = 14;
    var_4 = 35;
    var_5 = 2.0;
    var_6 = 4;

    if ( isdefined( var_0.gas_triggers_init ) && isdefined( var_0.gas_vfx_and_triggers ) )
    {
        var_7 = scripts\engine\utility::ter_op( isdefined( var_1 ), var_1, level.players );

        foreach ( var_9 in var_7 )
        {
            if ( !isdefined( var_9 ) )
                continue;

            var_9 calloutmarkerping_getcreatedtime( 0.0 );

            if ( !isdefined( var_9.infilanimindex ) )
                var_9.infilanimindex = 1;

            if ( !isdefined( var_9.stop_counter_beep_sfx_on_bomb_vests ) )
                var_9.stop_counter_beep_sfx_on_bomb_vests = 1;

            var_10 = scripts\engine\utility::ter_op( var_9.stop_counter_beep_sfx_on_bomb_vests, var_0.gas_triggers_init, var_0.gas_vfx_and_triggers );
            var_11 = "j_prop_1";
            var_9 cameraunlink();
            var_9 cameralinkto( var_10, var_11, 1, 1 );
            var_9 setclientdvar( "QTSPTNLOL", var_2 );
            var_9 setclientdvar( "LTMOQONPQ", 0 );
            var_9 setphysicaldepthoffield( var_3, var_4, var_5, var_6 );
        }

        thread health_remaining_max( var_1 );
    }
    else
    {
        var_7 = scripts\engine\utility::ter_op( isdefined( var_1 ), var_1, level.players );

        foreach ( var_9 in var_7 )
        {
            if ( !isdefined( var_9 ) )
                continue;

            var_9 calloutmarkerping_getcreatedtime( 0.0 );
        }
    }

    var_0.playerpositionents["parent_solo"] unlink();
    var_0.playerpositionents["parent_squad"] unlink();

    if ( isdefined( var_0._id_11DBF ) )
    {
        var_0.playerpositionents["parent_solo"] linkto( var_0._id_11DBF, "", ( 0, 0, 0 ), ( 0, 0, 0 ) );
        var_0.playerpositionents["parent_squad"] linkto( var_0._id_11DBF, "", ( 0, 0, 0 ), ( 0, 0, 0 ) );
        var_0._id_11DBF notify( "start_moving" );
    }

    var_0.calloutmarkerpingvo_handleraddnewelement unlink();

    if ( isdefined( var_0._id_11DBF ) )
        var_0.calloutmarkerpingvo_handleraddnewelement linkto( var_0._id_11DBF, "", ( 0, 0, 0 ), ( 0, 0, 0 ) );

    setomnvar( "ui_hide_player_icons", 0 );
    var_7 = scripts\engine\utility::ter_op( isdefined( var_1 ), var_1, level.players );

    foreach ( var_9 in var_7 )
    {
        if ( !isdefined( var_9 ) )
            continue;

        var_9 setclienttriggeraudiozone( "mp_donetsk_infil_ext", 2.0 );
    }

    thread healthpack_health( var_1 );

    if ( var_0.infil_anim_type == "script_model" )
    {
        var_0._id_1269E scriptmodelplayanim( "wz_infil_mindia8_loop_pl01", "p1" );
        var_0._id_1269F scriptmodelplayanim( "wz_infil_mindia8_loop_pl01", "p1" );
        var_0._id_126A0 scriptmodelplayanim( "wz_infil_mindia8_loop_pl02", "p2" );
        var_0._id_126A1 scriptmodelplayanim( "wz_infil_mindia8_loop_pl03", "p3" );
        var_0._id_126A2 scriptmodelplayanim( "wz_infil_mindia8_loop_pl04", "p4" );
    }

    var_0.bot_gametype_attacker_defender_ai_director_update hide();
    var_0.bot_clear_hq_zone hide();
    level thread _id_12520( var_0 );

    if ( isdefined( var_0.gas_triggers_init ) )
        var_0.gas_triggers_init waittillmatch( "camera", "end" );

    thread _id_13F06( 1.2, var_1 );
}

_id_13CF1( var_0, var_1 )
{
    var_2 = 65;
    var_3 = 14;
    var_4 = 35;
    var_5 = 2.0;
    var_6 = 4;

    if ( isdefined( var_0.gas_triggers_init ) && isdefined( var_0.gas_vfx_and_triggers ) )
    {
        var_7 = scripts\engine\utility::ter_op( isdefined( var_1 ), var_1, level.players );

        foreach ( var_9 in var_7 )
        {
            if ( !isdefined( var_9 ) )
                continue;

            var_9 calloutmarkerping_getcreatedtime( 0.0 );

            if ( !isdefined( var_9.infilanimindex ) )
                var_9.infilanimindex = 1;

            if ( !isdefined( var_9.stop_counter_beep_sfx_on_bomb_vests ) )
                var_9.stop_counter_beep_sfx_on_bomb_vests = 1;

            var_10 = scripts\engine\utility::ter_op( var_9.stop_counter_beep_sfx_on_bomb_vests, var_0.gas_triggers_init, var_0.gas_vfx_and_triggers );
            var_11 = "j_prop_1";
            var_9 cameraunlink();
            var_9 cameralinkto( var_10, var_11, 1, 1 );
            var_9 setclientdvar( "QTSPTNLOL", var_2 );
            var_9 setclientdvar( "LTMOQONPQ", 0 );
            var_9 setphysicaldepthoffield( var_3, var_4, var_5, var_6 );
        }

        thread health_remaining_max( var_1 );
    }
    else
    {
        var_7 = scripts\engine\utility::ter_op( isdefined( var_1 ), var_1, level.players );

        foreach ( var_9 in var_7 )
        {
            if ( !isdefined( var_9 ) )
                continue;

            var_9 calloutmarkerping_getcreatedtime( 0.0 );
        }
    }

    var_0.playerpositionents["parent_solo"] unlink();
    var_0.playerpositionents["parent_squad"] unlink();

    if ( isdefined( var_0._id_11DC3 ) )
    {
        var_0.playerpositionents["parent_solo"] linkto( var_0._id_11DC3, "", ( 0, 0, 0 ), ( 0, 0, 0 ) );
        var_0.playerpositionents["parent_squad"] linkto( var_0._id_11DC3, "", ( 0, 0, 0 ), ( 0, 0, 0 ) );
        var_0._id_11DC3 notify( "start_moving" );
    }

    setomnvar( "ui_hide_player_icons", 0 );
    var_7 = scripts\engine\utility::ter_op( isdefined( var_1 ), var_1, level.players );

    foreach ( var_9 in var_7 )
    {
        if ( !isdefined( var_9 ) )
            continue;

        var_9 setclienttriggeraudiozone( "mp_island_infil_ext", 2.0 );
    }

    thread healthpack_health( var_1 );

    if ( var_0.infil_anim_type == "script_model" )
    {
        var_0.playerslot1 scriptmodelplayanim( "wz_infil_skilo_squad_sdr01_loop", "p1" );
        var_0.playerslot2 scriptmodelplayanim( "wz_infil_skilo_squad_sdr02_loop", "p2" );
        var_0.playerslot3 scriptmodelplayanim( "wz_infil_skilo_squad_sdr03_loop", "p3" );
        var_0.playerslot4 scriptmodelplayanim( "wz_infil_skilo_squad_sdr04_loop", "p4" );
    }

    level thread _id_12766( var_0 );

    if ( isdefined( var_0._id_11DC3.door ) )
        var_0._id_11DC3.door scriptmodelplayanim( "wz_infil_skilo_single_door_loop", "plane", 0, 1 );

    if ( isdefined( var_0.gas_triggers_init ) )
        var_0.gas_triggers_init waittillmatch( "camera", "end" );

    thread _id_13F06( 1.2, var_1 );
}

mp_m_speed_patch( var_0, var_1 )
{
    thread wires_on_bombs();
    stopfxontag( level._effect["vfx_br_ac130_clouds"], var_0.staticc130, "tag_body" );
    var_0.staticc130 stoploopsound();

    if ( isdefined( var_0.movingc130 ) )
        var_0.movingc130 playloopsound( "br_ac130_lp" );

    var_2 = scripts\engine\utility::ter_op( isdefined( var_1 ), var_1, level.players );

    foreach ( var_4 in var_2 )
    {
        if ( !isdefined( var_4 ) )
            continue;

        var_4 calloutmarkerping_getcreatedtime( 0.0 );
        var_4 cameraunlink();
        var_4 setclientdvar( "QTSPTNLOL", 65 );
        var_4 disablephysicaldepthoffieldscripting();
        var_4 scripts\mp\utility\player::setdof_default();
    }

    level thread _id_138F3( var_0, var_1 );
}

mp_m_trench_patch_giveplayer_c4( var_0, var_1 )
{
    var_0.chopper stoploopsound();

    if ( isdefined( var_0._id_11DBF ) )
        var_0._id_11DBF playloopsound( "br_heli_infil_hero_lp" );

    var_2 = scripts\engine\utility::ter_op( isdefined( var_1 ), var_1, level.players );

    foreach ( var_4 in var_2 )
    {
        if ( !isdefined( var_4 ) )
            continue;

        var_4 calloutmarkerping_getcreatedtime( 0.0 );
        var_4 cameraunlink();
        var_4 setclientdvar( "QTSPTNLOL", 65 );
        var_4 setclientdvar( "LTMOQONPQ", 0 );
        var_4 disablephysicaldepthoffieldscripting();
        var_4 scripts\mp\utility\player::setdof_default();
    }

    level thread _id_138F3( var_0, var_1 );
}

neverspectate( var_0, var_1 )
{
    thread wires_on_bombs();
    var_0._id_13886 stoploopsound();

    if ( isdefined( var_0._id_11DC3 ) )
        var_0._id_11DC3 playloopsound( "br_infil_skilo_plane_lp" );

    var_2 = scripts\engine\utility::ter_op( isdefined( var_1 ), var_1, level.players );

    foreach ( var_4 in var_2 )
    {
        if ( !isdefined( var_4 ) )
            continue;

        var_4 calloutmarkerping_getcreatedtime( 0.0 );
        var_4 cameraunlink();
        var_4 setclientdvar( "QTSPTNLOL", 65 );
        var_4 disablephysicaldepthoffieldscripting();
        var_4 scripts\mp\utility\player::setdof_default();
    }

    level thread _id_138F3( var_0, var_1 );
}

stop_hotjoining( var_0 )
{
    if ( scripts\mp\gametypes\br_public.gsc::tv_station_intro_already_played() )
        stop_firing_minigun( var_0 );
    else if ( scripts\mp\gametypes\br_public.gsc::usefailcapacitymsg() )
        stop_module_on_delay( var_0 );
    else
        stop_eye_barkov( var_0 );
}

stop_eye_barkov( var_0 )
{
    var_1 = level._effect["vfx_br_ac130_clouds"];
    var_2 = level._effect["vfx_br_ac130_oneshot"];

    if ( scripts\mp\utility\game::getgametype() != "br" )
        var_1 = level._effect["vfx_snatch_ac130_clouds"];

    if ( isdefined( var_1 ) )
        stopfxontag( var_1, var_0, "tag_body" );

    if ( isdefined( var_2 ) )
        stopfxontag( var_2, var_0, "tag_body" );
}

stop_firing_minigun( var_0 )
{

}

stop_module_on_delay( var_0 )
{

}

playac130infilloopanims( var_0 )
{
    if ( isdefined( var_0.movingc130 ) )
    {
        var_0.movingc130 scriptmodelplayanim( "sdr_mp_infil_ac130_loop2_plane", "plane" );
        var_0.movingc130.innards scriptmodelplayanim( "sdr_mp_infil_ac130_loop2_plane", "planeInnards" );
    }

    var_0.playerpositionents["parent"] scriptmodelplayanim( "sdr_mp_infil_ac130_loop_genpropx10", "prop" );
}

_id_12766( var_0 )
{
    if ( isdefined( var_0._id_11DC3 ) )
    {
        var_0._id_11DC3 scriptmodelplayanim( "wz_infil_skilo_loop_veh", "plane" );
        var_0._id_11DC3.bunker_numberstation scriptmodelplayanim( "wz_infil_skilo_loop_veh", "plane" );
        var_0._id_11DC3.innards scriptmodelplayanim( "wz_infil_skilo_loop_veh", "planeInnards" );
    }

    var_0.playerpositionents["parent_solo"] scriptmodelplayanim( "wz_infil_skilo_loop_genpropx10", "prop" );
    var_0.playerpositionents["parent_squad"] scriptmodelplayanim( "wz_infil_skilo_loop_genpropx10", "prop" );
}

_id_12520( var_0 )
{
    if ( isdefined( var_0._id_11DBF ) )
    {
        var_0._id_11DBF scriptmodelplayanim( "wz_infil_mindia8_loop_veh", "plane" );
        var_0._id_11DBF.innards scriptmodelplayanim( "wz_infil_mindia8_loop_veh", "planeInnards" );
    }

    var_0.playerpositionents["parent_solo"] scriptmodelplayanim( "wz_infil_mindia8_loop_genpropx10", "prop" );
    var_0.playerpositionents["parent_squad"] scriptmodelplayanim( "wz_infil_mindia8_loop_genpropx10", "prop" );
}

infiloverridevisionset( var_0 )
{
    foreach ( var_2 in var_0 )
    {
        if ( !isdefined( var_2 ) )
            continue;

        if ( var_2.operatorcustomization.operatorref == "s4_palmer" || var_2.operatorcustomization.operatorref == "s4_doggett" )
            var_2 visionsetnakedforplayer( "wz_tu345_te" );
    }
}

infilhandleterminusoutlines( var_0 )
{
    foreach ( var_2 in var_0 )
    {
        if ( !isdefined( var_2 ) )
            continue;

        if ( var_2.operatorcustomization.operatorref == "s4_palmer" || var_2.operatorcustomization.operatorref == "s4_doggett" )
            var_2 thread infildoterminusoutlines();
    }
}

infildoterminusoutlines()
{
    self endon( "disconnect" );
    var_0 = scripts\mp\utility\player::getteamarray( self.team, 1 );
    var_1 = undefined;

    foreach ( var_3 in var_0 )
    {
        if ( isdefined( var_3.infilanimindex ) && var_3.infilanimindex == 1 )
        {
            var_1 = var_3;
            break;
        }
    }

    if ( isdefined( var_1 ) )
        var_1 hudoutlineenableforclient( self, "outline_terminus" );

    wait 0.75;

    if ( isdefined( var_1 ) )
        var_1 hudoutlinedisableforclient( self );

    wait 8.25;
    var_5 = scripts\engine\utility::random( var_0 );

    if ( isdefined( var_5 ) )
        var_5 hudoutlineenableforclient( self, "outline_terminus" );

    wait 0.75;

    if ( isdefined( var_5 ) )
        var_5 hudoutlinedisableforclient( self );
}

infilsetupterminusbink( var_0, var_1 )
{
    wait( var_1 );
    infilpreloadterminusbink( var_0 );
    infilplayterminusbink( var_0 );
    wait 1.0;
    infilhandleterminusoutlines( var_0 );
}

infilpreloadterminusbink( var_0 )
{
    foreach ( var_2 in var_0 )
    {
        if ( !isdefined( var_2 ) )
            continue;

        if ( var_2.operatorcustomization.operatorref == "s4_palmer" || var_2.operatorcustomization.operatorref == "s4_doggett" )
            var_2 skydive_cutparachuteon( "mp_terminus_vision" );
    }
}

infilplayterminusbink( var_0 )
{
    foreach ( var_2 in var_0 )
    {
        if ( !isdefined( var_2 ) )
            continue;

        if ( var_2.operatorcustomization.operatorref == "s4_palmer" || var_2.operatorcustomization.operatorref == "s4_doggett" )
            var_2 preloadcinematicforplayer( "mp_terminus_vision" );
    }
}

stoparmorinsert( var_0, var_1, var_2 )
{
    if ( !isdefined( var_2 ) )
        var_2 = 0;

    if ( !isdefined( var_0 ) )
        preloadcinematicforall( var_1, 0, var_2 );
    else
    {
        foreach ( var_4 in var_0 )
        {
            if ( isdefined( var_4 ) )
                var_4 skydive_cutparachuteon( var_1, 0, var_2 );
        }
    }
}

stop_with_front_truck( var_0, var_1, var_2, var_3, var_4 )
{
    var_5 = scripts\engine\utility::ter_op( isdefined( var_0 ), var_0, level.players );
    var_6 = level.players.size == var_5.size;

    if ( var_6 )
        setglobalsoundcontext( "lobby_fade", "", 2 );

    foreach ( var_8 in var_5 )
    {
        if ( !isdefined( var_8 ) )
            continue;

        if ( !var_6 )
            var_8 setentitysoundcontext( "lobby_fade", "", 2 );

        if ( !isdefined( var_4 ) )
            var_4 = "";

        switch ( var_4 )
        {
            case "s2":
                var_8 clearsoundsubmix( "mp_br_lobby_fade", 1.5 );
                var_8 clearsoundsubmix( "fade_to_black_all_except_music_and_scripted5", 0.5 );
                break;
            case "infil_dov_part1":
                var_8 playlocalsound( "br_infil_part1_lr" );
                var_8 clearsoundsubmix( "mp_br_lobby_fade", 1.5 );
                var_8 clearsoundsubmix( "fade_to_black_all_except_music", 0.5 );
                var_8 setsoundsubmix( "mp_br_event_dovp1_infil", 0.5 );
                break;
            case "chopper_infil":
                var_8 playlocalsound( "br_heli_infil_part1_lr" );
                var_8 clearsoundsubmix( "mp_br_lobby_fade", 1.5 );
                var_8 clearsoundsubmix( "fade_to_black_all_except_music", 0.5 );
                var_8 setsoundsubmix( "fade_to_black_all_except_music_and_scripted5", 0.5 );
                break;
            case "skilo_infil":
                var_8 playlocalsound( "br_infil_ch3_plane_intro_lr" );
                var_8 clearsoundsubmix( "mp_br_lobby_fade", 1.5 );
                var_8 clearsoundsubmix( "fade_to_black_all_except_music", 0.5 );
                var_8 setsoundsubmix( "fade_to_black_all_except_music_and_scripted5", 0.5 );
                break;
            case "skilo_infil_mxp":
                var_8 playlocalsound( "br_infil_ch3_mxp_plane_intro_lr" );
                var_8 clearsoundsubmix( "mp_br_lobby_fade", 1.5 );
                var_8 clearsoundsubmix( "fade_to_black_all_except_music", 0.5 );
                var_8 setsoundsubmix( "fade_to_black_all_except_music_and_scripted5", 0.5 );
                break;
            case "terminus_infil":
                var_8 playlocalsound( "br_infil_ch3_t2_plane_intro_lr" );
                var_8 clearsoundsubmix( "mp_br_lobby_fade", 1.5 );
                var_8 clearsoundsubmix( "fade_to_black_all_except_music", 0.5 );
                var_8 setsoundsubmix( "fade_to_black_all_except_music_and_scripted5", 0.5 );
                break;
            default:
                var_8 playlocalsound( "br_infil_part1_lr" );
                var_8 clearsoundsubmix( "mp_br_lobby_fade", 1.5 );
                var_8 clearsoundsubmix( "fade_to_black_all_except_music", 0.5 );
                var_8 setsoundsubmix( "fade_to_black_all_except_music_and_scripted5", 0.5 );
                break;
        }
    }

    var_2 = var_2 || istrue( level.vehicle_collision_getleveldata );

    if ( var_6 )
    {
        if ( istrue( level.vehicle_collision_getleveldata ) || var_2 )
            playcinematicforall( var_1, 1, 1 );
        else
            playcinematicforall( var_1 );
    }
    else
    {
        foreach ( var_8 in var_5 )
        {
            if ( !isdefined( var_8 ) )
                continue;

            if ( istrue( level.vehicle_collision_getleveldata ) || var_2 )
            {
                var_8 preloadcinematicforplayer( var_1, 1, 1 );
                continue;
            }

            var_8 preloadcinematicforplayer( var_1 );
        }
    }

    var_12 = 3;

    if ( getdvarint( "scr_br_c130_intro_s2", 0 ) == 1 )
        var_12 = 9;
    else if ( scripts\mp\gametypes\br_public.gsc::tv_station_intro_already_played() )
        var_12 = 11;
    else if ( scripts\mp\gametypes\br_public.gsc::usefailcapacitymsg() )
    {
        if ( getdvarint( "scr_br_infil_skilo_use_skilo_infil_overlay", 1 ) == 0 )
            var_12 = 11;
        else
            var_12 = 13;
    }
    else if ( istrue( var_3 ) )
        var_12 = 10;

    foreach ( var_8 in var_5 )
    {
        if ( !isdefined( var_8 ) )
            continue;

        if ( !istrue( var_8.watch_for_usb_notetrack_switchoff ) )
            var_8 setclientomnvar( "ui_br_bink_overlay_state", var_12 );
    }
}

getboltmodel( var_0, var_1 )
{
    var_2 = scripts\engine\utility::ter_op( isdefined( var_0 ), var_0, level.players );

    foreach ( var_4 in var_2 )
    {
        if ( !isdefined( var_4 ) )
            continue;

        var_4 setclientomnvar( "ui_br_bink_overlay_state", var_1 );
    }
}

stop_spawn_modules( var_0, var_1 )
{
    if ( var_0 == "bink_complete" )
    {
        self setclientomnvar( "ui_br_bink_overlay_state", 5 );
        self skydive_cutparachuteoff();
    }
}

stop_vehicle_on_pilot_death( var_0, var_1 )
{
    if ( var_0 == "bink_complete" )
    {
        wait 0.6;
        self setclientomnvar( "ui_br_bink_overlay_state", 0 );
        self skydive_cutparachuteoff();
    }
}

stop_wave_section( var_0, var_1 )
{
    if ( var_0 == "bink_complete" )
    {
        self setclientomnvar( "ui_br_bink_overlay_state", 0 );
        self skydive_cutparachuteoff();
    }
}

stopchallengetimer( var_0 )
{
    if ( getdvarint( "scr_br_c130_intro_s2", 0 ) == 1 )
        scripts\mp\utility\lui_game_event_aggregator::registeronluieventcallback( ::stop_spawn_modules );
    else if ( scripts\mp\gametypes\br_public.gsc::usefailcapacitymsg() )
        scripts\mp\utility\lui_game_event_aggregator::registeronluieventcallback( ::stop_vehicle_on_pilot_death );
    else
        scripts\mp\utility\lui_game_event_aggregator::registeronluieventcallback( ::stop_wave_section );

    var_1 = undefined;

    if ( scripts\mp\gametypes\br_public.gsc::tv_station_intro_already_played() )
        var_1 = 4.95;
    else if ( scripts\mp\gametypes\br_public.gsc::usefailcapacitymsg() )
        var_1 = 7.23;
    else
        var_1 = 3.2;

    if ( istrue( level.vehicle_collision_getleveldata ) )
        var_1 = 4.6;
    else if ( getdvarint( "scr_br_c130_intro_s2", 0 ) == 1 )
        var_1 = 36.0;

    wait( var_1 );
    var_2 = scripts\engine\utility::ter_op( isdefined( var_0 ), var_0, level.players );

    if ( isdefined( level._id_133B4 ) )
        level._id_133B4 = undefined;

    foreach ( var_4 in var_2 )
    {
        if ( !isdefined( var_4 ) )
            continue;

        var_4 notify( "beginC130" );
    }

    if ( isdefined( level.throwingknives ) )
    {
        foreach ( var_7 in level.throwingknives )
        {
            if ( isdefined( var_7 ) )
                var_7 thread scripts\cp_mp\equipment\throwing_knife::throwing_knife_deletepickup();
        }
    }
}

setup_jugg_maze_kill_trigger()
{
    if ( scripts\mp\gametypes\br_public.gsc::tv_station_intro_already_played() )
    {
        self setmodel( "veh8_mil_air_mindia8_open_back_infil" );
        self notsolid();
        self.innards setmodel( "veh8_mil_air_mindia8_interior_vm_infil" );
        self.innards notsolid();
        self.playeroffsets = [ ( 32, 30, -500 ), ( -32, 30, -500 ), ( 0, 30, -500 ), ( 16, 30, -500 ), ( -16, 30, -500 ) ];
    }
    else if ( scripts\mp\gametypes\br_public.gsc::usefailcapacitymsg() )
    {
        self setmodel( "veh8_mil_air_skilo_infil_flight" );
        self notsolid();
        self.innards setmodel( "veh8_mil_air_skilo_interior_vm_infil" );
        self.innards notsolid();
        self.playeroffsets = [ ( 0, 0, 0 ), ( 0, 0, 0 ), ( 0, 0, 0 ), ( 0, 0, 0 ), ( 0, 0, 0 ) ];
        self.bunker_numberstation = spawn( "script_model", self.origin );
        self.bunker_numberstation setmodel( "veh8_mil_air_skilo_infil_flight_articulated" );
        self.bunker_numberstation linkto( self, "", ( 0, 0, 0 ), ( 0, 0, 0 ) );
        self.bunker_numberstation.cleanme = 1;
        self.door = spawn( "script_model", self.origin );
        self.door setmodel( "veh8_mil_air_skilo_interior_infil_cabin_door" );
        self.door linkto( self.bunker_numberstation, "TAG_DOOR", ( 0, 0, 0 ), ( 0, 0, 0 ) );
        self.door.cleanme = 1;
    }
    else
    {
        self notsolid();

        if ( isdefined( self.innards ) )
            self.innards notsolid();
    }
}

setup_last_enemies_standing( var_0, var_1 )
{
    level endon( "game_ended" );
    self endon( "death" );
    self hide();

    if ( isdefined( self.innards ) )
        self.innards hide();

    self waittill( "start_moving" );
    self show();

    if ( isdefined( self.innards ) )
        self.innards show();

    self moveto( var_0, var_1 );
    thread scripts\mp\gametypes\br_c130.gsc::killaftertime( var_1, "c130" );

    if ( scripts\mp\gametypes\br_public.gsc::tv_station_intro_already_played() )
        self playloopsound( "br_heli_infil_hero_lp" );
    else if ( scripts\mp\gametypes\br_public.gsc::usefailcapacitymsg() )
        self playloopsound( "br_ac130_lp" );
    else
    {
        thread scripts\mp\gametypes\br_public.gsc::gunship_spawnvfx();
        self playloopsound( "br_ac130_lp" );
    }
}

remove_outline( var_0 )
{
    if ( scripts\mp\gametypes\br_public.gsc::tv_station_intro_already_played() )
        return var_0.chopper;
    else if ( scripts\mp\gametypes\br_public.gsc::usefailcapacitymsg() )
        return var_0._id_13886;
    else
        return var_0.staticc130;
}

remove_objective_on_flag( var_0 )
{
    if ( scripts\mp\gametypes\br_public.gsc::tv_station_intro_already_played() )
        return var_0._id_11DBF;
    else if ( scripts\mp\gametypes\br_public.gsc::usefailcapacitymsg() )
        return var_0._id_11DC3;
    else
        return var_0.movingc130;
}

remove_munitions_in_radius( var_0 )
{
    if ( scripts\mp\gametypes\br_public.gsc::tv_station_intro_already_played() )
        return var_0.gas_triggers_init;
    else if ( scripts\mp\gametypes\br_public.gsc::usefailcapacitymsg() )
        return var_0.gas_triggers_init;
    else
        return var_0.gas_trigger;
}

clear_tier_lights( var_0, var_1, var_2 )
{
    level endon( "game_ended" );
    var_3 = scripts\engine\utility::ter_op( isdefined( var_2 ), var_2, level.players );

    if ( !scripts\mp\gametypes\br_public.gsc::usefailcapacitymsg() )
    {
        foreach ( var_5 in var_3 )
        {
            if ( !isdefined( var_5 ) )
                continue;

            var_5 calloutmarkerping_getcreatedtime( -1.0 );
        }
    }

    level.infilstruct = spawnstruct();
    level.infilstruct.playersinc130 = 0;

    if ( !isdefined( var_0 ) )
        var_0 = scripts\mp\gametypes\br_c130.gsc::createtestc130path();

    level.infilstruct.c130pathstruct = var_0;
    level.infilstruct.transporttime = scripts\mp\gametypes\br_c130.gsc::spawnc130( level.infilstruct.c130pathstruct, ::setup_last_enemies_standing, ::setup_jugg_maze_kill_trigger );
    level.infilstruct.firstc130endtime = level.infilstruct.transporttime + gettime();
    var_7 = firespoutwatch( level.br_ac130, var_1 );
    level.watch_for_total_counts_below_num = var_7;

    if ( isdefined( level._id_12852 ) )
        [[ level._id_12852 ]]( var_7 );

    level.stop_end_breach_fx = 1;
    level.allowprematchdamage = 0;
    level.br_ac130 thread gunship_updateplayercount();
    var_8 = remove_outline( var_7 );
    var_9 = 0;
    var_10 = 0;

    if ( getdvarint( "scr_br_c130_intro_s2", 0 ) == 1 )
    {
        var_10 = 1;
        _id_13CF0( var_3, "player", var_8, 1 );
        stoparmorinsert( var_3, "mp_donetsk_c130_intro_s2" );
        stop_with_front_truck( var_3, "mp_donetsk_c130_intro_s2", var_9, 0, "s2" );
        stopchallengetimer( var_3 );
        var_11 = game["music"]["br_infil_intro"].size;
        var_12 = randomint( var_11 );
        var_3 = scripts\engine\utility::ter_op( isdefined( var_2 ), var_2, level.players );

        foreach ( var_5 in var_3 )
        {
            var_5 setsoundsubmix( "fade_to_black_all_except_music_and_scripted5", 0.5 );
            var_5 setplayermusicstate( game["music"]["br_infil_intro"][var_12] );
        }
    }
    else if ( scripts\mp\utility\game::round_vehicle_logic() == "reveal" )
    {
        _id_13CF0( var_3, var_1, var_8, 0 );
        var_15 = undefined;
        var_16 = 0;

        if ( scripts\mp\gametypes\br_public.gsc::tv_station_intro_already_played() )
        {
            var_15 = "mp_donetsk_mindia8_intro";
            var_16 = 1;
        }
        else if ( scripts\mp\gametypes\br_public.gsc::usefailcapacitymsg() )
            var_15 = "mp_wz_island_plane_intro";
        else
            var_15 = "mp_donetsk_c130_intro";

        stoparmorinsert( var_3, var_15 );
        stop_with_front_truck( var_3, var_15, var_9, var_16, "infil_dov_part1" );
        stopchallengetimer( var_3 );
    }
    else if ( scripts\mp\utility\game::round_vehicle_logic() == "mendota" )
    {
        _id_13CF0( var_3, var_1, var_8, 0 );
        var_15 = "mendota_infil_intro";
        var_16 = 0;
        var_17 = "skilo_infil_mxp";
        var_9 = 1;
        stoparmorinsert( var_3, var_15 );
        stop_with_front_truck( var_3, var_15, var_9, var_16, var_17 );
        stopchallengetimer( var_3 );
    }
    else if ( scripts\mp\utility\game::round_vehicle_logic() == "tdbd" )
    {
        _id_13CF0( var_3, var_1, var_8, 0 );
        var_15 = "mp_wz_tdbd_plane_intro";
        var_16 = 0;
        var_17 = "skilo_infil";
        var_9 = 0;

        if ( getdvarint( "scr_terminus_infil_override", 0 ) == 1 )
            infiloverridevisionset( var_3 );

        stoparmorinsert( var_3, var_15 );
        stop_with_front_truck( var_3, var_15, var_9, var_16, "terminus_infil" );
        stopchallengetimer( var_3 );
    }
    else
    {
        _id_13CF0( var_3, var_1, var_8, 0 );
        var_15 = undefined;
        var_16 = 0;
        var_17 = undefined;

        if ( getdvarint( "scr_terminus_infil_override", 0 ) == 1 )
            infiloverridevisionset( var_3 );

        if ( scripts\mp\gametypes\br_public.gsc::tv_station_intro_already_played() )
        {
            if ( scripts\cp_mp\utility\game_utility::turretdisabled() || scripts\cp_mp\utility\game_utility::validateprojectileent() )
                var_15 = "mp_escape_mindia8_intro";
            else
                var_15 = "mp_donetsk_mindia8_intro";

            var_16 = 1;
            var_17 = "chopper_infil";
        }
        else if ( scripts\mp\gametypes\br_public.gsc::usefailcapacitymsg() )
        {
            var_15 = "mp_wz_island_plane_intro";
            var_17 = "skilo_infil";
        }
        else
            var_15 = "mp_donetsk_c130_intro";

        var_15 = getfixedinfilname( var_15 );
        stoparmorinsert( var_3, var_15 );
        stop_with_front_truck( var_3, var_15, var_9, var_16, var_17 );
        stopchallengetimer( var_3 );
    }

    if ( scripts\mp\gametypes\br_public.gsc::tutorial_playsound() || scripts\mp\gametypes\br_public.gsc::uniquelootcallbacks() )
    {
        var_3 = scripts\engine\utility::ter_op( isdefined( var_2 ), var_2, level.players );

        foreach ( var_5 in var_3 )
        {
            if ( isdefined( var_5 ) && isplayer( var_5 ) )
                var_5 notify( "play_intro" );
        }
    }

    if ( var_10 )
        getboltmodel( var_3, 0 );

    [var_21, var_22] = remove_munition_on_use();
    level thread infilallfadetoblack( 0.0, var_21, var_22, undefined, var_2 );

    if ( getdvarint( "scr_terminus_infil_override", 0 ) == 1 )
        level thread infilsetupterminusbink( var_3, var_22 );

    _id_1273C( var_7, var_2 );
    var_3 = scripts\engine\utility::ter_op( isdefined( var_2 ), var_2, level.players );
    _id_13CEE( var_3, var_1 );
    level.stop_end_breach_fx = 0;
    level.infilstruct.infil_anim_type = var_1;

    if ( isdefined( level.obit_activation ) )
        level thread scripts\mp\gametypes\br_alt_mode_escape.gsc::obj_fob2( var_2 );
    else
    {
        thread scripts\mp\gametypes\br_gametypes.gsc::_id_12E05( "onInfilSequenceEnd", var_2 );

        if ( !scripts\mp\gametypes\br_gametypes.gsc::unset_relic_aggressive_melee( "match_start_VO" ) )
            scripts\mp\gametypes\br_public.gsc::brleaderdialog( "match_start", 0, var_2 );
    }

    var_23 = scripts\mp\gametypes\br_public.gsc::validtousesticker() || scripts\mp\gametypes\br_public.gsc::uniquelootitemid();

    if ( !var_23 )
    {
        var_24 = getdvar( "scr_br_lateSpawnFallback" ) == "";
        var_3 = scripts\engine\utility::ter_op( isdefined( var_2 ), var_2, level.players );

        foreach ( var_5 in var_3 )
        {
            if ( !isdefined( var_5 ) )
                continue;

            if ( !istrue( var_5.delay_explosion_fx ) && var_24 )
                continue;

            var_5 thread playerjoininfil();

            if ( var_5 calloutmarkerping_getent() )
                _id_12B22( var_5 );
        }

        if ( scripts\mp\gametypes\br_gametypes.gsc::tutorial_showtext( "addToC130Infil" ) )
            level.br_ac130 scripts\mp\gametypes\br_gametypes.gsc::_id_12E05( "addToC130Infil" );
    }

    if ( isdefined( level.showexfilstartsplash ) )
        level thread showextractionobjectivetoteam();
}

getfixedinfilname( var_0 )
{
    if ( istrue( level.vehicle_collision_getleveldata ) )
        var_0 = "mp_donetsk_c130_intro_x1";
    else if ( scripts\cp_mp\utility\game_utility::turretlightsonstate() )
        var_0 = "ta_gov_inf";
    else if ( level.mapname == "mp_kstenod" || scripts\mp\utility\game::round_vehicle_logic() == "zxp" )
        var_0 = "mp_donetsk_c130_intro_zxp";
    else if ( level.mapname == "mp_don4_pm" )
        var_0 = "ta_gov_inf";

    return var_0;
}

_id_1324E( var_0 )
{
    var_0.x = 0;
    var_0.y = 0;
    var_0 setshader( "black", 640, 480 );
    var_0.alignx = "left";
    var_0.aligny = "top";
    var_0.horzalign = "fullscreen";
    var_0.vertalign = "fullscreen";
    var_0.sort = -1;
    var_0 sendcollectedclientanticheatdata( 1 );
}

infilallfadetoblack( var_0, var_1, var_2, var_3, var_4, var_5 )
{
    if ( !isdefined( var_5 ) )
        var_5 = 0;

    var_6 = scripts\engine\utility::ter_op( isdefined( var_4 ), var_4, level.players );
    var_7 = level.players.size == var_6.size;

    if ( var_7 && !isdefined( level.infilblackoverlay ) )
    {
        level.infilblackoverlay = newhudelem();
        _id_1324E( level.infilblackoverlay );
    }
    else if ( !var_7 )
    {
        foreach ( var_9 in var_6 )
        {
            if ( !isdefined( var_9 ) )
                continue;

            var_9.infilblackoverlay = newclienthudelem( var_9 );
            _id_1324E( var_9.infilblackoverlay );
        }
    }

    if ( isdefined( var_0 ) && var_0 > 0 )
    {
        var_6 = scripts\engine\utility::ter_op( isdefined( var_4 ), var_4, level.players );

        foreach ( var_9 in var_6 )
        {
            if ( !isdefined( var_9 ) )
                continue;

            if ( !var_5 )
            {
                var_9 setsoundsubmix( "iw8_br_infil_fadeout", 0.0 );

                if ( !istrue( level.vehicle_collision_getleveldata ) && !isdefined( level._id_12D05 ) )
                    var_9 setsoundsubmix( "mp_br_infil_music", 0.0 );
            }

            if ( !var_7 )
            {
                var_9.infilblackoverlay.alpha = 0;
                var_9.infilblackoverlay fadeovertime( var_0 );
                var_9.infilblackoverlay.alpha = 1;
            }
        }

        if ( var_7 )
        {
            level.infilblackoverlay.alpha = 0;
            level.infilblackoverlay fadeovertime( var_2 );
            level.infilblackoverlay.alpha = 1;
        }

        wait( var_0 );
    }

    if ( !scripts\mp\gametypes\br_public.gsc::isusinginfilselection() )
    {
        if ( var_7 )
            level.infilblackoverlay.alpha = 1;

        var_6 = scripts\engine\utility::ter_op( isdefined( var_4 ), var_4, level.players );

        foreach ( var_9 in var_6 )
        {
            if ( !isdefined( var_9 ) )
                continue;

            if ( !var_5 )
            {
                var_9 setsoundsubmix( "mp_br_infil_anim", 0.0 );
                var_9 setsoundsubmix( "mp_br_infil_ac130", 0.0 );
            }

            if ( !var_7 )
                var_9.infilblackoverlay.alpha = 1;
        }
    }

    if ( isdefined( var_3 ) )
        level waittill( var_3 );

    if ( isdefined( var_1 ) && var_1 > 0 )
        wait( var_1 );

    if ( isdefined( var_2 ) && var_2 > 0 )
    {
        if ( var_7 )
        {
            level.infilblackoverlay.alpha = 1;
            level.infilblackoverlay fadeovertime( var_2 );
            level.infilblackoverlay.alpha = 0;
        }

        var_6 = scripts\engine\utility::ter_op( isdefined( var_4 ), var_4, level.players );

        foreach ( var_9 in var_6 )
        {
            if ( !isdefined( var_9 ) )
                continue;

            if ( !var_5 )
            {
                if ( !scripts\mp\gametypes\br_public.gsc::isusinginfilselection() )
                {
                    if ( scripts\mp\gametypes\br_public.gsc::usefailcapacitymsg() )
                        var_9 setclienttriggeraudiozone( "mp_island_infil_int", var_2 );
                    else
                        var_9 setclienttriggeraudiozone( "mp_donetsk_infil_int", var_2 );
                }

                var_9 clearsoundsubmix( "iw8_br_infil_fadeout", 2 );
                var_9 clearsoundsubmix( "deaths_door_mp" );
            }

            if ( !var_7 )
            {
                var_9.infilblackoverlay.alpha = 1;
                var_9.infilblackoverlay fadeovertime( var_2 );
                var_9.infilblackoverlay.alpha = 0;
            }
        }

        wait( var_2 );
    }
    else if ( !var_5 )
    {
        var_6 = scripts\engine\utility::ter_op( isdefined( var_4 ), var_4, level.players );

        foreach ( var_9 in var_6 )
        {
            if ( !isdefined( var_9 ) )
                continue;

            if ( !scripts\mp\gametypes\br_public.gsc::isusinginfilselection() )
                var_9 setclienttriggeraudiozone( "mp_donetsk_infil_int" );

            var_9 clearsoundsubmix( "iw8_br_infil_fadeout", 2 );
            var_9 clearsoundsubmix( "deaths_door_mp" );
        }
    }

    if ( var_7 )
        level.infilblackoverlay.alpha = 0;
    else
    {
        var_6 = scripts\engine\utility::ter_op( isdefined( var_4 ), var_4, level.players );

        foreach ( var_9 in var_6 )
        {
            if ( !isdefined( var_9 ) )
                continue;

            if ( isdefined( var_9.infilblackoverlay ) )
                var_9.infilblackoverlay destroy();

            var_9.infilblackoverlay = undefined;
        }
    }
}

_id_12ACC( var_0 )
{
    var_1 = 0;
    var_2 = isdefined( var_0 ) && var_0.size != level.players.size;

    foreach ( var_4 in level.teamnamelist )
    {
        var_5 = scripts\mp\gametypes\br_public.gsc::round_enemies_fallback_logic( var_4 );

        for ( var_6 = 0; var_6 < var_5.size; var_6++ )
        {
            var_7 = var_5[var_6];
            var_8 = scripts\mp\gametypes\br_public.gsc::round_enemy_stuck_logic( var_4, var_7 );

            foreach ( var_14, var_10 in var_8 )
            {
                if ( var_2 && !scripts\engine\utility::array_contains( var_0, var_10 ) )
                    continue;

                var_10 playerhide();

                if ( !var_1 )
                {
                    foreach ( var_12 in var_8 )
                        var_10 showtoplayer( var_12 );
                }
            }
        }
    }
}

_id_13CF0( var_0, var_1, var_2, var_3 )
{
    foreach ( var_5 in var_0 )
    {
        if ( !isdefined( var_5 ) )
            continue;

        scripts\mp\utility\game::_id_131A3( var_5, 1 );
        var_5 scripts\mp\utility\player::hidehudenable();
        var_5 scripts\mp\class::computerrebootsequence_init();
    }

    scripts\mp\deathicons::_id_12BFD();
    setomnvar( "ui_hide_player_icons", 1 );
    thread infilallfadetoblack( 1, 3.5, 1, "prematch_respawn_finished", var_0, var_3 );

    foreach ( var_5 in var_0 )
    {
        if ( !isdefined( var_5 ) )
            continue;

        var_5 predictstreampos( var_2.origin, 1 );
    }

    level.stop_visited_once = 1;
    _id_14361( 1 );
    waitframe();
    scripts\mp\gametypes\br_vehicles.gsc::emptyallvehicles();
    setomnvar( "ui_in_infil", 1 );
    scripts\mp\flags::gameflagset( "prematch_fade_done" );

    foreach ( var_5 in var_0 )
    {
        if ( !isdefined( var_5 ) )
            continue;

        var_5 playerhide();
    }

    _id_1435F( var_0, var_2.origin, var_2 );
    level notify( "prematch_respawn_finished" );
    _id_14361( 3.5 );

    foreach ( var_5 in var_0 )
    {
        if ( !isdefined( var_5 ) )
            continue;

        var_5 clearpredictedstreampos();
        var_5 neurotoxin_damage_loop();
        var_5.delay_explosion_fx = 1;
    }

    if ( var_1 == "script_model" )
    {
        foreach ( var_5 in var_0 )
        {
            if ( !isdefined( var_5 ) )
                continue;

            var_5 playerhide();
        }
    }
    else
        _id_12ACC( var_0 );
}

_id_13CEE( var_0, var_1 )
{
    var_2 = var_1 == "script_model";

    foreach ( var_4 in var_0 )
    {
        if ( !isdefined( var_4 ) )
            continue;

        var_4 scripts\mp\class::_id_13F02();
        var_4.instantclassswapallowed = 1;

        if ( scripts\mp\gametypes\br.gsc::get_int_or_0( var_4.hidehudenabled ) > 0 )
            var_4 scripts\mp\utility\player::hidehuddisable();

        var_4 visionsetfadetoblackforplayer( "", 1.0 );

        if ( var_2 )
            var_4 playershow();
    }

    setomnvar( "ui_in_infil", -1 );
    level.stop_visited_once = undefined;
}

gunship_updateplayercount()
{
    level endon( "game_ended" );
    self notify( "ac130_player_count" );
    self endon( "ac130_player_count" );

    for (;;)
    {
        setomnvar( "ui_br_players_left_in_plane", level.infilstruct.playersinc130 );

        if ( !isdefined( self ) )
            break;

        wait 0.5;
    }
}

playerjoininfil()
{
    level endon( "game_ended" );
    self endon( "disconnect" );
    self notify( "joining_Infil" );
    var_0 = self;
    var_0.br_infilstarted = 1;
    var_0.health = var_0.maxhealth;
    var_0 scripts\mp\gametypes\br_c130.gsc::spawnplayertoc130();
    var_0 playersetupcontrolsforinfil();
    var_0 scripts\mp\gametypes\br_public.gsc::updatebrscoreboardstat( "isInInfilPlane", 1 );
    level.infilstruct.playersinc130++;
    var_0 scripts\mp\gametypes\br_public.gsc::_id_1264D();
    var_0 thread _id_12525();
}

_id_12525()
{
    level endon( "game_ended" );
    self endon( "death" );
    self endon( "cancel_c130" );
    self endon( "br_jump" );
    self waittill( "disconnect" );

    if ( isdefined( level.infilstruct ) && isdefined( level.infilstruct.playersinc130 ) && level.infilstruct.playersinc130 > 0 )
        level.infilstruct.playersinc130--;
}

playersetupcontrolsforinfil( var_0 )
{
    if ( !isdefined( var_0 ) )
        var_0 = 0;

    self setclientomnvar( "ui_br_infil_started", 1 );
    self setclientomnvar( "ui_br_infiled", 0 );

    if ( !var_0 )
        self notifyonplayercommand( "halo_jump_c130", "+gostand" );
    else
        self notifyonplayercommand( "halo_jump_solo_c130", "+gostand" );

    self notifyonplayercommand( "br_pass_squad_leader", "+usereload" );
    self notifyonplayercommand( "br_pass_squad_leader", "+activate" );
}

getlightingvalues()
{

}

within_points()
{

}

wires_on_bombs()
{

}

initinfillocationselectionhandlers()
{
    registerinfillocationselectionhandler( "exclusion", ::handleexclusionils, ::spawnselectionbegin, ::spawnselectionend );
}

handleinfillocationselection( var_0 )
{
    var_1 = self;
    var_2 = level.infilselectionmethod;
    var_3 = getinfillocationselectionfunc( var_2 );

    if ( !isdefined( var_3 ) )
        return;

    return var_1 [[ var_3 ]]( var_0.location, var_0.angles );
}

registerinfillocationselectionhandler( var_0, var_1, var_2, var_3 )
{
    if ( !isdefined( level.br_infillocationselectionhandlers ) )
        level.br_infillocationselectionhandlers = [];

    var_4 = spawnstruct();
    var_4.locationselectionfunc = var_1;
    var_4.spawnselectstartfunc = var_2;
    var_4.spawnselectendfunc = var_3;
    level.br_infillocationselectionhandlers[var_0] = var_4;
}

getinfillocationselectionfunc( var_0 )
{
    if ( !isdefined( level.br_infillocationselectionhandlers ) )
        return undefined;

    var_1 = level.br_infillocationselectionhandlers[var_0];

    if ( !isdefined( var_1 ) )
        return undefined;

    return var_1.locationselectionfunc;
}

handleexclusionils( var_0, var_1 )
{
    var_2 = self;

    if ( !istrue( level.get_bomb_interaction_ent_cut_hint ) && !istrue( var_2.issquadleader ) )
        return 0;

    [var_4, var_5] = getspawnselectionpoi( var_0 );
    var_6 = getspawnselectionexclusionsize( var_0, var_4, var_5 );

    if ( isdefined( var_2.team ) )
    {
        var_7 = scripts\mp\utility\player::getteamarray( var_2.team );
        var_6 = var_6 * var_7.size;
    }

    if ( istrue( level.get_bomb_interaction_ent_cut_hint ) && !istrue( var_2.issquadleader ) )
        return var_2 setuplocalelocation( var_0, var_1, var_6 );

    foreach ( var_9 in level.br_spawns )
    {
        var_10 = var_2 round_logic();

        if ( isdefined( var_10 ) && var_9 == var_10 )
        {
            if ( level.get_bomb_interaction_ent_cut_hint )
            {
                if ( var_2 getquickdropplundercount( var_9, var_6, var_0, 1 ) )
                    return 1;
            }

            continue;
        }
        else if ( level.get_bomb_interaction_ent_cut_hint )
        {
            if ( !var_2 getquickdropplundercount( var_9, var_6, var_0, 0 ) )
                return 0;
        }

        if ( pow( var_6 + var_9.spawnexclusion2ddist, 2 ) > distance2dsquared( var_9.locationorigin, var_0 ) )
        {
            var_2 thread sendplayerstatusmessage( 50, 2.0 );
            var_2 playlocalsound( "br_map_selection_error" );
            return 0;
        }
    }

    return var_2 registerspawnlocation( var_0, var_1, var_6 );
}

setuplocalelocation( var_0, var_1, var_2 )
{
    var_3 = self;

    foreach ( var_5 in level.br_spawns )
    {
        var_6 = round_logic();
        var_7 = 0;

        if ( isdefined( var_6 ) && var_5 == var_6 )
            var_7 = 1;

        if ( pow( var_2 + var_5.spawnexclusion2ddist, 2 ) > distance2dsquared( var_5.locationorigin, var_0 ) )
        {
            if ( var_7 )
            {
                var_8 = var_3 roof_spawners();
                lastlocationcallouttime( var_8 );
                var_3 thread sendplayerstatusmessage( 56, 2.0 );
                var_3 playlocalsound( "br_map_selection_placed" );
                return 1;
            }

            var_3 thread sendplayerstatusmessage( 50, 2.0 );
            var_3 playlocalsound( "br_map_selection_error" );
            return 0;
        }

        if ( var_7 && var_3 getquickdropplundercount( var_5, var_2, var_0, var_7 ) )
            return 1;
    }

    return var_3 registerspawnlocation( var_0, var_1, var_2 );
}

getquickdropplundercount( var_0, var_1, var_2, var_3 )
{
    var_4 = self;

    foreach ( var_6 in var_0._id_134CC )
    {
        if ( !isdefined( var_6 ) )
            continue;

        var_7 = var_4 roof_spawners();

        if ( isdefined( var_7 ) && var_6 == var_7 )
            continue;

        if ( pow( var_1 + var_6.spawnexclusion2ddist, 2 ) > distance2dsquared( var_6.locationorigin, var_2 ) )
        {
            if ( !var_3 )
            {
                var_4 thread sendplayerstatusmessage( 50, 2.0 );
                var_4 playlocalsound( "br_map_selection_error" );
                return 0;
            }

            var_2 = var_6.locationorigin;
            var_8 = var_6.locationangles;
            var_1 = var_6.spawnexclusion2ddist;

            if ( isdefined( var_7 ) && isdefined( var_7.circleent ) )
                var_7.circleent delete();

            var_9 = var_4 registerspawnlocation( var_2, var_8, var_1 );

            if ( !var_9 )
                return var_9;

            if ( !istrue( var_4.issquadleader ) )
                var_4 thread sendplayerstatusmessage( 55, 2.0 );
            else
                var_4 thread sendplayerstatusmessage( 54, 2.0 );

            return var_9;
        }
    }

    if ( !var_3 )
        return 1;

    return 0;
}

sendplayerstatusmessage( var_0, var_1 )
{
    var_2 = self;
    var_2 notify( "sendPlayerStatusMessage" );
    var_2 endon( "sendPlayerStatusMessage" );
    var_2 scripts\mp\utility\lower_message::setlowermessageomnvar( var_0 );

    if ( isdefined( var_1 ) )
    {
        wait( var_1 );
        var_2 scripts\mp\utility\lower_message::setlowermessageomnvar( 0 );
    }
}

registerspawnlocation( var_0, var_1, var_2 )
{
    var_3 = self;
    var_4 = scripts\engine\trace::create_default_contents( 1 );

    if ( istrue( var_3.issquadleader ) )
    {
        var_5 = var_3 round_logic();

        if ( !isdefined( var_5 ) )
            var_5 = var_3 totalhealth();
    }
    else if ( istrue( level.get_bomb_interaction_ent_cut_hint ) )
    {
        var_5 = var_3 roof_spawners();

        if ( !isdefined( var_5 ) )
            var_5 = var_3 total_spawns();
    }
    else
        return 0;

    var_6 = getdvarfloat( "scr_infil_plus_spawn_height", 5500.0 );
    var_7 = ( 0, 0, var_6 );
    var_8 = ( 0, 0, 10000 );
    var_9 = var_0 + var_8;
    var_10 = var_0 - var_8;
    var_11 = scripts\engine\trace::ray_trace( var_9, var_10, undefined, var_4 );
    var_12 = var_0;

    if ( var_11["hittype"] != "hittype_none" )
        var_12 = var_11["position"];

    var_5.locationorigin = var_12 + var_7;

    if ( istrue( var_3.issquadleader ) )
        var_5.groundorigin = var_12;

    var_5.locationangles = var_1;
    var_5.spawnexclusion2ddist = var_2;
    [var_14, var_15, var_16] = var_5.locationorigin;

    if ( isdefined( var_5.circleent ) )
        var_5.circleent.origin = ( var_14, var_15, var_2 );
    else
    {
        var_5.circleent = getmaxobjectivecount( var_14, var_15, var_2, var_3 );

        if ( istrue( var_3.issquadleader ) )
            var_5.circleent setmapcircleiconindex( 1 );
    }

    var_17 = scripts\mp\utility\teams::getfriendlyplayers( var_3.team, 0 );

    foreach ( var_19 in var_17 )
    {
        if ( !istrue( var_3.issquadleader ) )
        {
            var_19 thread sendplayerstatusmessage( 64, 2.0 );
            var_19 playlocalsound( "br_map_selection_placed" );
            continue;
        }

        var_19 thread sendplayerstatusmessage( 57, 2.0 );
        var_19 playlocalsound( "br_map_selection_placed" );
    }

    return 1;
}

assignrandomspawnselection()
{
    var_0 = self;

    if ( !isdefined( var_0.issquadleader ) )
    {
        var_0.issquadleader = 1;
        var_1 = scripts\mp\utility\teams::getfriendlyplayers( var_0.team, 0 );

        foreach ( var_3 in var_1 )
        {
            if ( var_3 != var_0 )
                var_3.issquadleader = 0;
        }
    }

    var_5 = ( 0, 0, 0 );

    for ( var_6 = 0; var_6 < 3; var_6++ )
    {
        var_7 = randomfloatrange( level.mapsafecorners[1][0], level.mapsafecorners[0][0] );
        var_8 = randomfloatrange( level.mapsafecorners[1][1], level.mapsafecorners[0][1] );
        var_5 = ( var_7, var_8, 0 );
        var_9 = var_0 handleexclusionils( var_5 );

        if ( var_9 )
            return 1;
    }

    var_0 registerspawnlocation( var_5, undefined, getdvarint( "scr_map_selection_dense_min", 2000 ) );
    return 0;
}

notifyafkofselection( var_0 )
{
    var_1 = self;
    var_2 = scripts\mp\utility\teams::getfriendlyplayers( var_1.team, 0 );
    var_3 = "";

    if ( var_0 )
        var_3 = "Safe Spawn Selection Assigned";
    else
        var_3 = "Unsafe Spawn Selection Assigned";

    foreach ( var_5 in var_2 )
        var_5 iprintlnbold( var_3 );
}

_id_13AEC()
{
    var_0 = self;
    var_0 playershow( 1 );
    var_0 unlink( 1 );
    var_1 = var_0 round_logic();

    if ( isdefined( var_1.locationorigin ) )
    {
        var_2 = var_1.locationorigin;
        var_3 = var_0 roof_spawners();

        if ( isdefined( var_3 ) )
            var_2 = var_3.locationorigin;

        var_4 = 512;
        var_5 = ( 0, 60 * var_0.pers["squadMemberIndex"] % 360, 0 );
        var_6 = anglestoforward( var_5 ) * var_4;
        var_2 = var_2 + var_6 + ( 0, 0, randomfloatrange( 0, 512 ) );

        if ( getdvarint( "scr_br_fallbackinfilspawn", 0 ) )
        {
            var_0.forcespawnorigin = var_2;
            var_0.forcespawnangles = undefined;
            var_0.alreadyaddedtoalivecount = 1;
            var_0 scripts\mp\playerlogic::spawnplayer( 0, 0 );
        }
        else
        {
            var_0 setorigin( var_2, 1 );
            var_0 setplayerangles( var_5 );
        }
    }

    var_0 stopanimscriptsceneevent();
    var_0 clearpredictedstreampos();
    var_0 playershow( 1 );
    var_0.br_infilstarted = 1;
    var_0 setclientomnvar( "ui_br_infil_started", 1 );
    var_0 setclientomnvar( "ui_br_infiled", 1 );
    var_0 scripts\cp_mp\parachute::startfreefall( 0, 0 );
    var_0 scripts\mp\gametypes\br_weapons.gsc::br_ammo_player_clear();
    scripts\mp\gametypes\br_weapons.gsc::br_ammo_update_weapons( var_0 );
}

postspawnselectionstream()
{
    var_0 = self;
    var_1 = var_0 roof_spawners();
    var_2 = var_0 round_logic();

    if ( isdefined( var_1 ) )
        var_0 predictstreampos( var_1.locationorigin, 1 );
    else if ( isdefined( var_2 ) )
        var_0 predictstreampos( var_2.locationorigin, 1 );
}

spawnselectionbegin()
{
    setomnvar( "ui_match_start_text", "prepare_for_infil" );
    scripts\mp\gamelogic::matchstarttimerperplayer_internal( 10 );
    scripts\mp\flags::gameflaginit( "end_spawn_selection", 0 );
    level notify( "begin_infil_map_selection" );

    if ( !isdefined( level.br_spawns ) )
        level.br_spawns = [];

    foreach ( var_1 in level.players )
    {
        var_1 thread scripts\mp\gametypes\br.gsc::playerselectspawnsequence();
        var_1.isselectingspawn = 1;
    }

    wait 2.0;
}

spawnselectionend()
{
    scripts\mp\flags::gameflagset( "end_spawn_selection" );
    var_0 = getdvarint( "scr_sendAfkToGulag", 0 );

    foreach ( var_2 in level.players )
    {
        var_2 notify( "cancel_location" );
        var_2 thread sendplayerstatusmessage( 51, 2.0 );
        var_3 = var_2 round_logic();

        if ( !isdefined( var_3 ) )
        {
            if ( var_0 )
            {
                var_2.brmapselectionafk = 1;
                continue;
            }
            else
            {
                var_4 = var_2 assignrandomspawnselection();
                var_2 notifyafkofselection( var_4 );
            }
        }

        var_2.brmapselectionafk = 0;
        var_2.isselectingspawn = 0;
        var_2 postspawnselectionstream();
    }

    thread _id_12C24();
    wait 4;

    foreach ( var_2 in level.players )
    {
        var_2 thread sendplayerstatusmessage( 0 );
        var_2 scripts\mp\gametypes\br_public.gsc::updatebrscoreboardstat( "jumpMasterState", 0 );
    }

    thread _id_14392();
}

_id_14392()
{
    level endon( "game_ended" );
    level waittill( "infils_ready" );
}

roof_spawners()
{
    var_0 = self;

    if ( !istrue( level.get_bomb_interaction_ent_cut_hint ) || istrue( var_0.issquadleader ) )
        return undefined;

    var_1 = var_0 round_logic();

    if ( isdefined( var_0.pers["squadMemberIndex"] ) && isdefined( var_1 ) )
    {
        if ( isdefined( var_1._id_134CC[var_0.pers["squadMemberIndex"]] ) && isdefined( var_1._id_134CC[var_0.pers["squadMemberIndex"]].locationorigin ) )
            return var_1._id_134CC[var_0.pers["squadMemberIndex"]];
    }

    return undefined;
}

round_logic()
{
    var_0 = self;

    if ( isdefined( level.br_spawns ) && isdefined( var_0.team ) && isdefined( level.br_spawns[var_0.team] ) && isdefined( level.br_spawns[var_0.team].locationorigin ) )
        return level.br_spawns[var_0.team];

    return undefined;
}

total_spawns()
{
    var_0 = self;

    if ( !istrue( level.get_bomb_interaction_ent_cut_hint ) || istrue( var_0.issquadleader ) )
        return undefined;

    var_1 = var_0 round_logic();

    if ( isdefined( var_1 ) && isdefined( var_0.pers["squadMemberIndex"] ) )
    {
        var_1._id_134CC[var_0.pers["squadMemberIndex"]] = spawnstruct();
        var_1._id_134CC[var_0.pers["squadMemberIndex"]].circleent = undefined;
        return var_1._id_134CC[var_0.pers["squadMemberIndex"]];
    }

    return undefined;
}

totalhealth()
{
    var_0 = self;

    if ( !istrue( var_0.issquadleader ) )
        return undefined;

    if ( isdefined( level.br_spawns ) && isdefined( var_0.team ) )
    {
        level.br_spawns[var_0.team] = spawnstruct();
        level.br_spawns[var_0.team].circleent = undefined;
        level.br_spawns[var_0.team]._id_134CC = [];
        return level.br_spawns[var_0.team];
    }

    return undefined;
}

lastlocationcallouttime( var_0 )
{
    if ( isdefined( var_0.circleent ) )
        var_0.circleent delete();

    var_1 = undefined;
}

lastmovingplatform( var_0 )
{
    if ( isdefined( var_0.circleent ) )
        var_0.circleent delete();

    var_0 = undefined;
}

classselectionbeginnonexclusion()
{
    scripts\mp\flags::gameflaginit( "end_spawn_selection", 0 );

    foreach ( var_1 in level.players )
        var_1 thread scripts\mp\gametypes\br.gsc::playerstartselectspawnclassnonexclusion();
}

classselectionendnonexclusion()
{
    scripts\mp\flags::gameflagset( "end_spawn_selection" );
}

_id_12C24()
{
    wait 25;

    if ( isdefined( level.br_spawns ) )
    {
        foreach ( var_1 in level.br_spawns )
        {
            if ( isdefined( var_1._id_134CC ) )
            {
                foreach ( var_3 in var_1._id_134CC )
                    lastlocationcallouttime( var_3 );
            }

            lastmovingplatform( var_1 );
        }
    }
}

getspawnselectionlockedtimer()
{
    return 5;
}

spawnselectioninfil( var_0 )
{
    foreach ( var_2 in level.players )
    {
        var_2.br_infilstarted = 1;
        var_2 setclientomnvar( "ui_br_infil_started", 1 );
        var_2 setclientomnvar( "ui_br_infiled", 1 );
    }

    var_4 = buildac130infilanimstruct( undefined, var_0 );
    playac130infilanim( var_4 );
}

initspawnexclusionpois()
{
    setdvarifuninitialized( "scr_map_selection_sparse_min", 813 );
    setdvarifuninitialized( "scr_map_selection_sparse_max", 1000 );
    setdvarifuninitialized( "scr_map_selection_semidense_min", 625 );
    setdvarifuninitialized( "scr_map_selection_semidense_max", 813 );
    setdvarifuninitialized( "scr_map_selection_dense_min", 500 );
    setdvarifuninitialized( "scr_map_selection_dense_max", 625 );
    setdvarifuninitialized( "scr_map_selection_falloff_max_distance", 25000 );
    setdvarifuninitialized( "scr_map_selection_falloff_fxn", "continuous" );
    level.br_spawnsparsepois = [ "boneyard", "farm", "lumber", "dam", "smallAirport", "quarry" ];
    level.br_spawnsemidensepois = [ "transit", "hospital", "port", "stadium", "tvStation", "storagetown", "supermarket" ];
    level.br_spawndensepois = [ "gulag", "northDowntown", "southDowntown", "eastAirport", "westAirport" ];
    var_0 = getdvarint( "scr_map_selection_sparse_min" );
    var_1 = getdvarint( "scr_map_selection_sparse_max" );

    foreach ( var_3 in level.br_spawnsparsepois )
    {
        level.br_spawnpois[var_3] = spawnstruct();
        level.br_spawnpois[var_3].exclusionmin = var_0;
        level.br_spawnpois[var_3].exclusionmax = var_1;
    }

    var_5 = getdvarint( "scr_map_selection_semidense_min" );
    var_6 = getdvarint( "scr_map_selection_semidense_max" );

    foreach ( var_3 in level.br_spawnsemidensepois )
    {
        level.br_spawnpois[var_3] = spawnstruct();
        level.br_spawnpois[var_3].exclusionmin = var_5;
        level.br_spawnpois[var_3].exclusionmax = var_6;
    }

    var_9 = getdvarint( "scr_map_selection_dense_min" );
    var_10 = getdvarint( "scr_map_selection_dense_max" );

    foreach ( var_3 in level.br_spawndensepois )
    {
        level.br_spawnpois[var_3] = spawnstruct();
        level.br_spawnpois[var_3].exclusionmin = var_9;
        level.br_spawnpois[var_3].exclusionmax = var_10;
    }

    level.br_spawnpois["transit"].pos = ( -12420, -26792, 0 );
    level.br_spawnpois["boneyard"].pos = ( -26542, -21776, 0 );
    level.br_spawnpois["hospital"].pos = ( 7827, -22240, 0 );
    level.br_spawnpois["port"].pos = ( 35008, -37117, 0 );
    level.br_spawnpois["farm"].pos = ( 48757, -25620, 0 );
    level.br_spawnpois["gulag"].pos = ( 51019, -52257, 0 );
    level.br_spawnpois["lumber"].pos = ( 51048, -8557, 0 );
    level.br_spawnpois["stadium"].pos = ( 28873, -9839, 0 );
    level.br_spawnpois["tvStation"].pos = ( 14423, 4999, 0 );
    level.br_spawnpois["northDowntown"].pos = ( 20311, -18724, 0 );
    level.br_spawnpois["southDowntown"].pos = ( 22076, -29372, 0 );
    level.br_spawnpois["storagetown"].pos = ( -24594, -3984, 0 );
    level.br_spawnpois["supermarket"].pos = ( -12782, -3634, 0 );
    level.br_spawnpois["eastAirport"].pos = ( -8280, 5837, 0 );
    level.br_spawnpois["westAirport"].pos = ( -21055, 7124, 0 );
    level.br_spawnpois["dam"].pos = ( -26873, 32208, 0 );
    level.br_spawnpois["smallAirport"].pos = ( 5823, 38518, 0 );
    level.br_spawnpois["quarry"].pos = ( 32653, 26929, 0 );
}

getspawnselectioncontexclusiongrowth( var_0, var_1, var_2, var_3 )
{
    var_4 = getdvarint( "scr_map_selection_falloff_max_distance" );
    var_5 = distance2d( var_0, var_1 );

    if ( var_5 > var_4 )
        return getdvarint( "scr_map_selection_exclusion", 2800 );

    var_6 = log( var_3 ) / ( log( var_2 ) * var_4 );
    var_7 = var_2 * exp( var_6 * var_5 );
    return var_7;
}

getspawnselectionconstexclusiongrowth( var_0, var_1, var_2, var_3 )
{
    var_4 = var_2 / var_3;
    var_5 = getdvarint( "scr_map_selection_falloff_max_distance" );
    var_6 = distance2d( var_0, var_1 );

    if ( var_6 > var_5 )
        return getdvarint( "scr_map_selection_exclusion", 2800 );

    var_7 = var_6 / var_5;
    var_8 = var_2 * pow( 1 + var_4, var_7 );
    return var_8;
}

getspawnselectionlerpexclusiongrowth( var_0, var_1, var_2, var_3 )
{
    var_4 = getdvarint( "scr_map_selection_falloff_max_distance" );
    var_5 = distance2d( var_0, var_1 );

    if ( var_5 > var_4 )
        return getdvarint( "scr_map_selection_exclusion", 2800 );

    var_6 = var_5 / var_4;
    var_7 = scripts\engine\math::lerp( var_2, var_3, var_6 );
    return var_7;
}

getspawnselectionpoi( var_0 )
{
    var_1 = 2147483647;
    var_2 = undefined;

    foreach ( var_6, var_4 in level.br_spawnpois )
    {
        var_5 = distance2d( var_0, var_4.pos );

        if ( var_5 < var_1 )
        {
            var_1 = var_5;
            var_2 = var_6;
        }
    }

    return [ var_1, var_2 ];
}

getspawnselectionexclusionsize( var_0, var_1, var_2 )
{
    var_3 = getdvar( "scr_map_selection_falloff_fxn", "continuous" );
    var_4 = level.br_spawnpois[var_2];

    switch ( var_3 )
    {
        case "continuous":
            var_4.spawnexclusion2ddist = getspawnselectioncontexclusiongrowth( var_4.pos, var_0, var_4.exclusionmin, var_4.exclusionmax );
            break;
        case "constant":
            var_4.spawnexclusion2ddist = getspawnselectionconstexclusiongrowth( var_4.pos, var_0, var_4.exclusionmin, var_4.exclusionmax );
            break;
        case "lerp":
            var_4.spawnexclusion2ddist = getspawnselectionlerpexclusiongrowth( var_4.pos, var_0, var_4.exclusionmin, var_4.exclusionmax );
            break;
        default:
            var_4.spawnexclusion2ddist = getdvarint( "scr_map_selection_exclusion", 2800 );
    }

    return var_4.spawnexclusion2ddist;
}

_id_14361( var_0 )
{
    wait( var_0 );
}

_id_11DBB( var_0, var_1, var_2, var_3 )
{
    self moveto( var_0, var_1, var_2, var_3 );
}

_id_12D9F( var_0, var_1, var_2, var_3 )
{
    self rotateto( var_0, var_1, var_2, var_3 );
}

showextractionobjectivetoteam()
{
    var_0 = distance( level.br_ac130._id_12205.startpt, level.br_ac130._id_12205.endpt );
    var_1 = var_0 / scripts\mp\gametypes\br_c130.gsc::getc130speed() / level.showexfilstartsplash.size;

    for ( var_2 = 0; var_2 < level.showexfilstartsplash.size; var_2++ )
    {
        wait( var_1 );
        level.showexfilstartsplash[var_2] notify( "halo_jump_c130" );
    }

    level.showexfilstartsplash = undefined;
}

_id_12B22( var_0 )
{
    if ( !isdefined( level.showexfilstartsplash ) )
        level.showexfilstartsplash = [];

    level.showexfilstartsplash[level.showexfilstartsplash.size] = var_0;
}
