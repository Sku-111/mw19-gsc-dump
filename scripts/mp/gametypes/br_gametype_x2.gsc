// IW8 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

#using_animtree("script_model");

escort_friendly_ai_riders()
{
    level.scr_animtree["plane3"] = #animtree;
    level.scr_anim["plane3"]["x2_plane"] = %ingame_intro2_x2_bcloud3;
    level.scr_animname["plane3"]["x2_plane"] = "ingame_intro2_x2_Bcloud3";
    level.scr_animtree["plane4"] = #animtree;
    level.scr_anim["plane4"]["x2_plane"] = %ingame_intro2_x2_bcloud4;
    level.scr_animname["plane4"]["x2_plane"] = "ingame_intro2_x2_Bcloud4";
    level.scr_animtree["plane5"] = #animtree;
    level.scr_anim["plane5"]["x2_plane"] = %ingame_intro2_x2_bcloud5;
    level.scr_animname["plane5"]["x2_plane"] = "ingame_intro2_x2_Bcloud5";
    level.scr_animtree["guy1"] = #animtree;
    level.scr_anim["guy1"]["x2_exfil"] = %br_exfil_x2_guy_walk;
    level.scr_animname["guy1"]["x2_exfil"] = "br_exfil_x2_guy_walk";
    level.scr_anim["guy1"]["x2_exfil_mute"] = %br_exfil_x2_guy_walk_mute;
    level.scr_animname["guy1"]["x2_exfil_mute"] = "br_exfil_x2_guy_walk_mute";
    level.scr_animtree["guy2"] = #animtree;
    level.scr_anim["guy2"]["x2_exfil"] = %br_exfil_x2_guy_drag;
    level.scr_animname["guy2"]["x2_exfil"] = "br_exfil_x2_guy_drag";
    level.scr_anim["guy2"]["x2_exfil_mute"] = %br_exfil_x2_guy_drag_mute;
    level.scr_animname["guy2"]["x2_exfil_mute"] = "br_exfil_x2_guy_drag_mute";
    level.scr_animtree["guy3"] = #animtree;
    level.scr_anim["guy3"]["x2_exfil"] = %br_exfil_x2_guy_hit;
    level.scr_animname["guy3"]["x2_exfil"] = "br_exfil_x2_guy_hit";
    level.scr_anim["guy3"]["x2_exfil_mute"] = %br_exfil_x2_guy_hit_mute;
    level.scr_animname["guy3"]["x2_exfil_mute"] = "br_exfil_x2_guy_hit_mute";
    level.scr_animtree["guy4"] = #animtree;
    level.scr_anim["guy4"]["x2_exfil"] = %br_exfil_x2_dead_drag;
    level.scr_animname["guy4"]["x2_exfil"] = "br_exfil_x2_dead_drag";
    level.scr_anim["guy4"]["x2_exfil_mute"] = %br_exfil_x2_dead_drag_mute;
    level.scr_animname["guy4"]["x2_exfil_mute"] = "br_exfil_x2_dead_drag_mute";
}

init()
{
    _id_11965();
    thread scripts\mp\utility\sound::besttime( "br_event_x2_sfx" );
    level thread evaluatefobspawns();
    level thread execute_combat_action();
    level thread evaluateallaccolades();
    level thread evaluatecontrolledcallback();
    level._id_12CA7 = getdvarint( "scr_bmo_respawnHeightOverride", 2500 );
    level.disable_super_in_turret._id_13CD1 = getdvar( "scr_wztrain_type", "armored" );
    level._id_14632 = 0;
    level._id_14639 = 0;
    level._id_1463D = [];
    level._id_133C0 = 1;
    scripts\engine\utility::flag_init( "no_crate_spawning" );
    level.delay_show_backpack = ( 10940, -9123, 18925 );
    escort_friendly_ai_riders();
    registerscriptedagents();
    extract_dialogue_played();
}

_id_11965()
{
    level._effect["vfx_br_x2_explosion_a1"] = loadfx( "vfx/iw8_br/gameplay/event/vfx_br_x2_explosion_a1.vfx" );
    level._effect["vfx_br_x2_large_explosion"] = loadfx( "vfx/iw8_br/gameplay/event/vfx_br_x2_large_explosion.vfx" );
    level._effect["vfx_br_x2_smoke_column_1"] = loadfx( "vfx/iw8_br/gameplay/event/vfx_br_x2_smoke_column_1.vfx" );
    level._effect["vfx_br_x2_door_explosion"] = loadfx( "vfx/iw8_br/gameplay/event/vfx_br_x2_door_explosion.vfx" );
    level._effect["vfx_br_x2_embers_smoke"] = loadfx( "vfx/iw8_br/gameplay/event/vfx_br_x2_embers_smoke.vfx" );
    level._effect["vfx_br_x2_state_explosion"] = loadfx( "vfx/iw8_br/gameplay/event/vfx_br_x2_state_explosion.vfx" );
    level._effect["vfx_br_x2_fire_lrg"] = loadfx( "vfx/iw8_br/gameplay/event/vfx_br_x2_fire_lrg.vfx" );
    level._effect["vfx_br_x2_frenzied_sparks"] = loadfx( "vfx/iw8_br/gameplay/event/vfx_br_x2_frenzied_sparks.vfx" );
    level._effect["vfx_br_x2_linger_smoke"] = loadfx( "vfx/iw8_br/gameplay/event/vfx_br_x2_linger_smoke.vfx" );
    level._effect["vfx_br_x2_brake_sparks_loco"] = loadfx( "vfx/iw8_br/gameplay/event/vfx_br_x2_brake_sparks_02.vfx" );
    level._effect["vfx_br_x2_brake_sparks_car"] = loadfx( "vfx/iw8_br/gameplay/event/vfx_br_x2_brake_sparks_01.vfx" );
    level._effect["vfx_br_x2_turret_exp_01"] = loadfx( "vfx/iw8_br/gameplay/event/vfx_br_x2_turret_exp_01.vfx" );
    level._effect["vfx_br_x2_turret_loco_exp_01"] = loadfx( "vfx/iw8_br/gameplay/event/vfx_br_x2_turret_loco_exp_01.vfx" );
    level._effect["vfx_br_x2_flare_attack_r"] = loadfx( "vfx/iw8_br/gameplay/event/vfx_br_x2_flare_attack_r" );
    level._effect["vfx_br_x2_train_turrets_gatling_hit"] = loadfx( "vfx/iw8_br/gameplay/event/vfx_br_x2_train_turrets_gatling_hit.vfx" );
    level._effect["vfx_br_x2_train_turrets_88mm_hit"] = loadfx( "vfx/iw8_br/gameplay/event/vfx_br_x2_train_turrets_88mm_hit.vfx" );
    level._effect["vfx_br_x2_locomotive_hit"] = loadfx( "vfx/iw8_br/gameplay/event/vfx_br_x2_locomotive_hit.vfx" );
    level._effect["vfx_br_x2_locomotive_damage_hit"] = loadfx( "vfx/iw8_br/gameplay/event/vfx_br_x2_locomotive_damage_hit.vfx" );
    level._effect["vfx_br_x2_assault_car_hit"] = loadfx( "vfx/iw8_br/gameplay/event/vfx_br_x2_assault_car_hit.vfx" );
    level._effect["vfx_br_x2_assault_car_damage_01_hit"] = loadfx( "vfx/iw8_br/gameplay/event/vfx_br_x2_assault_car_damage_01_hit.vfx" );
    level._effect["vfx_br_x2_assault_car_damage_02_hit"] = loadfx( "vfx/iw8_br/gameplay/event/vfx_br_x2_assault_car_damage_02_hit.vfx" );
    level._effect["vfx_br_fire_ground_line_sm"] = loadfx( "vfx/iw8_br/gen_amb/vfx_br_fire_ground_line_sm.vfx" );
    level._effect["vfx_br_x2_fire_ground_line_xlg"] = loadfx( "vfx/iw8_br/gameplay/event/vfx_br_x2_fire_ground_line_xlg.vfx" );
    level._effect["vfx_br_x2_outro_fire_ground_fast_lrg"] = loadfx( "vfx/iw8_br/gameplay/event/vfx_br_x2_outro_fire_ground_fast_lrg.vfx" );
    level._effect["vfx_br_fire_tiny_nl"] = loadfx( "vfx/iw8_br/gen_amb/vfx_br_fire_tiny_nl.vfx" );
    level._effect["vfx_br_fire_sml_nl"] = loadfx( "vfx/iw8_br/gen_amb/vfx_br_fire_sml_nl.vfx" );
    level._effect["vfx_br_x2_smk_stack"] = loadfx( "vfx/iw8_br/gameplay/event/vfx_br_x2_smk_stack.vfx" );
    level._effect["vfx_br_x2_outro_floating_embers"] = loadfx( "vfx/iw8_br/gameplay/event/vfx_br_x2_outro_floating_embers.vfx" );
    level._effect["vfx_br_x2_outro_lingering_smoke"] = loadfx( "vfx/iw8_br/gameplay/event/vfx_br_x2_outro_lingering_smoke.vfx" );
    level._effect["vfx_br_x2_camcentr_ash"] = loadfx( "vfx/iw8_br/gameplay/event/vfx_br_x2_camcentr_ash.vfx" );
    level._effect["vfx_br_x2_outro_exp_lrg_decal"] = loadfx( "vfx/iw8_br/gameplay/event/vfx_br_x2_outro_exp_lrg_decal.vfx" );
    level._effect["vfx_br_x2_smoke_column"] = loadfx( "vfx/iw8_br/gameplay/event/vfx_br_x2_smoke_column.vfx" );
    level._effect["vfx_br_x2_smoke_column_5"] = loadfx( "vfx/iw8_br/gameplay/event/vfx_br_x2_smoke_column_5.vfx" );
    level._effect["vfx_br_x2_smoke_column"] = loadfx( "vfx/iw8_br/gameplay/event/vfx_br_x2_smoke_column.vfx" );
    level._effect["vfx_br_x2_fire_ground_xsm"] = loadfx( "vfx/iw8_br/gameplay/event/vfx_br_x2_fire_ground_xsm.vfx" );
    level._effect["vfx_br_x2_fire_ground_med"] = loadfx( "vfx/iw8_br/gameplay/event/vfx_br_x2_fire_ground_med.vfx" );
    level._effect["vfx_br_x2_fire_ground_sm"] = loadfx( "vfx/iw8_br/gameplay/event/vfx_br_x2_fire_ground_sm.vfx" );
    level._effect["vfx_br_x2_fire_ground_med"] = loadfx( "vfx/iw8_br/gameplay/event/vfx_br_x2_fire_ground_med.vfx" );
    level._effect["vfx_br_x2_outro_lingering_smoke"] = loadfx( "vfx/iw8_br/gameplay/event/vfx_br_x2_outro_lingering_smoke.vfx" );
    level._effect["vfx_br_x2_wind_blowing_fast"] = loadfx( "vfx/iw8_br/gameplay/event/vfx_br_x2_wind_blowing_fast.vfx" );
    level._effect["vfx_br_field_embers"] = loadfx( "vfx/iw8_br/gen_amb/vfx_br_field_embers.vfx" );
    level._effect["vfx_br_x2_wind_blowing_fast"] = loadfx( "vfx/iw8_br/gameplay/event/vfx_br_x2_wind_blowing_fast.vfx" );
    level._effect["vfx_br_field_embers"] = loadfx( "vfx/iw8_br/gen_amb/vfx_br_field_embers.vfx" );
    level._effect["vfx_br_x2_wind_blowing_fast"] = loadfx( "vfx/iw8_br/gameplay/event/vfx_br_x2_wind_blowing_fast.vfx" );
    level._effect["vfx_br_field_embers"] = loadfx( "vfx/iw8_br/gen_amb/vfx_br_field_embers.vfx" );
    level._effect["vfx_br_x2_dirt_burst"] = loadfx( "vfx/iw8_br/gameplay/event/vfx_br_x2_dirt_burst.vfx" );
    level._effect["vfx_br_x2_kick_dirt"] = loadfx( "vfx/iw8_br/gameplay/event/vfx_br_x2_kick_dirt.vfx" );
    level._effect["vfx_br_x2__trash_drift"] = loadfx( "vfx/iw8_br/gameplay/event/vfx_br_x2__trash_drift.vfx" );
    level._effect["vfx_br_x2_flare_exfill_r"] = loadfx( "vfx/iw8_br/gameplay/event/vfx_br_x2_flare_exfill_r" );
    level._effect["vfx_br_x2__trash_drift"] = loadfx( "vfx/iw8_br/gameplay/event/vfx_br_x2__trash_drift.vfx" );
    level._effect["vfx_br_x2_exfill_beacon"] = loadfx( "vfx/iw8_br/gameplay/event/vfx_br_x2_exfill_beacon.vfx" );
}

evaluatefobspawns()
{
    level endon( "game_ended" );

    if ( getdvarint( "scr_br_x2_debug", 0 ) == 1 )
        scripts\mp\gametypes\br_gametypes.gsc::move_molotov_mortar( "allowLateJoiners" );

    scripts\mp\gametypes\br_gametypes.gsc::load_sequence_3_vfx( "drogBagLoadout" );
    scripts\mp\gametypes\br_gametypes.gsc::load_sequence_3_vfx( "gulag" );
    scripts\mp\gametypes\br_gametypes.gsc::move_molotov_mortar( "circleEarlyStart" );
    level.decoyassists = ::escort_vehicle_push_clip;
    setdvar( "LKTPRPKPMR", 1 );
    setdvar( "NNMLSMNTOQ", -1 );
}

execute_combat_action()
{
    level endon( "game_ended" );
    scripts\mp\gametypes\br_gametypes.gsc::load_sequence_3_vfx( "waitLoadoutDone" );
    scripts\mp\gametypes\br_gametypes.gsc::_id_12B11( "onInfilSequenceEnd", ::escort_a );
    scripts\mp\gametypes\br_gametypes.gsc::_id_12B11( "playerNakedDropLoadout", ::exploder_ref );
    scripts\mp\gametypes\br_gametypes.gsc::_id_12B11( "getDefaultLoadout", ::enterpos );
    scripts\mp\gametypes\br_gametypes.gsc::_id_12B11( "playerKilledSpawn", ::_id_125F7 );
    scripts\mp\gametypes\br_gametypes.gsc::_id_12B11( "markPlayerAsEliminatedOnKilled", ::_id_11B16 );
    scripts\mp\gametypes\br_gametypes.gsc::_id_12B11( "mayConsiderPlayerDead", ::_id_11B80 );
    scripts\mp\gametypes\br_gametypes.gsc::_id_12B11( "modifyPlayerDamage", ::exfil_spawners_triggered );
    scripts\mp\gametypes\br_gametypes.gsc::_id_12B11( "getFinalCircleCenter", ::entity_movingplatform_update );
    scripts\mp\gametypes\br_gametypes.gsc::_id_12B11( "mapCenterFinalCircle", ::entity_movingplatform_update );
    scripts\mp\gametypes\br_gametypes.gsc::_id_12B11( "startUICloseTimer", ::extrascore4 );
    scripts\mp\gametypes\br_gametypes.gsc::_id_12B11( "playerWelcomeSplashes", ::explode_fx );
    scripts\mp\gametypes\br_gametypes.gsc::_id_12B11( "postSpawnVehicle", ::extra_delay );
    scripts\mp\gametypes\br_gametypes.gsc::_id_12B11( "onConnectSpawnPoint", ::_id_12006 );
    scripts\mp\gametypes\br_gametypes.gsc::_id_12B11( "onPlayerConnect", ::exfilchopper );
    scripts\mp\gametypes\br_gametypes.gsc::_id_12B11( "onTrainBrakeComplete", ::exit_laser_panel_anim_sequence );
    scripts\mp\gametypes\br_gametypes.gsc::_id_12B11( "onTrainAccelBegin", ::existingkills );
    scripts\mp\gametypes\br_gametypes.gsc::_id_12B11( "sixthSenseThink", ::extractlocale_checkiflocaleisavailable );
    scripts\mp\gametypes\br_gametypes.gsc::_id_12B11( "addToC130Infil", ::enemy_respawn_manager );
    scripts\cp_mp\utility\script_utility::registersharedfunc( "airstrike", "postAirstrikeAnim", ::extra_collision );
    scripts\cp_mp\utility\script_utility::registersharedfunc( "airstrike", "harmlessAirstrikeEffect", ::escape_if_player_is_in_hangar );
    scripts\cp_mp\utility\script_utility::registersharedfunc( "airstrike", "overridePlayFlyFX", ::exit_open );

    if ( !isdefined( level._id_145F1 ) )
        level._id_145F1 = spawnstruct();

    level._id_145F1.ks_airdropcrateusetime = 1;
    waittillframeend;
    level._id_12067 = ::exfill_chopper_dialogue;
    level._id_11FFB = ::exfill_chopper_dialogue;
    level.ontimelimit = ::exfill_vehicle;
    level thread execution_obstacle();
    level.playerkillstreakgetownerlookatignoreents = 1;
    level._id_13396 = getdvarint( "scr_br_x2_signal_quest_enabled", 0 );
    level.ent_delete_by_targetname = getdvarint( "scr_br_x2_driver_car_damage_assist", 195 );
    level.ent_model = getdvarint( "scr_br_x2_driver_turret_damage_assist", 105 );
    level.loadoutbrfieldupgrade = 1;
    evade_start_targetname();
    enemygunship_getnearbytargets();
    scripts\mp\utility\lui_game_event_aggregator::registeronluieventcallback( ::exfil_spots_objs_settings );
    level._id_140D9 = [];
    level thread executionquip();
    executioncashmultiplier();
    evaluationcallback();
    level thread escort_vehicle_push_volume();
    level thread excludedteams();

    if ( level.mapname == "mp_br_mechanics" )
        level thread extraweapons();

    escort_b();
    thread eventcallback();
    level thread scripts\mp\gametypes\br_heavy_weapon_drop_x2.gsc::init();
    level thread _id_11D03();
    level thread _id_1260C();
    level thread _id_13251();
}

evaluateallaccolades()
{
    level endon( "game_ended" );
    level waittill( "br_dialog_initialized" );
    game["dialog"]["match_start"] = "gametype_battle";
    game["dialog"]["mode_desc1"] = "gametype_desc_battle_pve";
    game["dialog"]["mode_desc2"] = "gametype_desc_battle_squads";
    game["dialog"]["mode_desc3"] = "gametype_desc_battle_train";
    game["dialog"]["objective1_desc"] = "ambush_first";
    game["dialog"]["destroy_part6"] = "car_start";
    game["dialog"]["destroy_part11"] = "car_half";
    game["dialog"]["destroy_car7"] = "car_done";
    game["dialog"]["car_vulnerable"] = "car_shoot";
    game["dialog"]["train_incoming1"] = "train_ambush";
    game["dialog"]["train_incoming2"] = "ambush_last";
    game["dialog"]["train_stopped1"] = "attack_after";
    game["dialog"]["outro_victory"] = "train_destroy";
    game["dialog"]["overdrive_nag"] = "ambush_break";
    game["dialog"]["resuply_drop0"] = "drop_use";
    game["dialog"]["resuply_drop1"] = "drop_resupply";
    game["dialog"]["outro_bombers_tease"] = "dx_bra_op4_bombers_trouble";
    game["dialog"]["outro_bombers"] = "dx_bra_op4_outro_bombers";
    game["dialog"]["outro_keep_running"] = "dx_bra_op4_outro_explosion";
    game["dialog"]["outro_exfil_coming"] = "dx_bra_op4_outro_down";
    game["dialog"]["outro_exfil_almost_over"] = "dx_bra_op4_outro_cover";
}

enemygunship_getnearbytargets()
{
    scripts\cp_mp\utility\game_utility::_id_12C10( "delete_on_load", "targetname" );
}

evaluatecontrolledcallback()
{
    level endon( "game_ended" );
}

executionquip()
{
    level endon( "game_ended" );
    extracting( "mp_don4_x2", 0.5 );
}

escort_vehicle_push_clip()
{
    level.br_level._id_13884 = 1;
}

evade_start_targetname()
{
    level.juggheli_spawner_jammer5_4 = [];
    level.juggheli_spawner_jammer5_4["atv"] = "veh8_mil_lnd_atango_skin_x2";
    level.juggheli_spawner_jammer5_4["little_bird"] = "veh8_mil_air_lbravo_skin_x2";
    level.juggheli_spawner_jammer5_4["little_bird_mg"] = "veh8_mil_air_lbravo_skin_x2";
    level.juggheli_spawner_jammer5_4["cargo_truck"] = "veh8_mil_lnd_mkilo23_skin_x2";
    level.juggheli_spawner_jammer5_4["tac_rover"] = "veh8_mil_lnd_tromeo_skin_x2";
    level.juggheli_spawner_jammer5_4["jeep"] = "veh8_civ_lnd_decho_skin_x2";
    level.juggheli_spawner_jammer5_4["motorcycle"] = "camo_veh_t9_mil_lnd_motorcycle_wz_x2";
}

extra_delay( var_0, var_1 )
{
    if ( isdefined( level.juggheli_spawner_jammer5_4 ) )
    {
        var_2 = level.juggheli_spawner_jammer5_4[var_1];

        if ( isdefined( var_2 ) )
        {
            var_0 setvehiclecamo();
            var_0 getmountconfigenabled( var_2 );
            var_0.gasfxair = 1;
        }
    }
}

enemy_respawn_manager()
{
    thread exfil_clear_objective();
}

exfil_clear_objective()
{
    level endon( "game_ended" );
    self endon( "death" );
    var_0 = getdvarfloat( "scr_x2_infil_kick_timer", 21 );
    wait( var_0 );

    foreach ( var_2 in level.players )
    {
        if ( isdefined( var_2 ) && isdefined( var_2.br_infil_type ) && var_2.br_infil_type == "c130" && !isdefined( var_2.jumptype ) )
        {
            var_2.jumptype = "outOfBounds";
            var_2 notify( "halo_kick_c130" );
        }
    }
}

exfil()
{
    level endon( "game_ended" );
    thread extractlocale_circletick( level.brneverlanded[1].position, level.brneverlanded[1].broadcast_currency );
    scripts\mp\flags::gameflagwait( "br_ready_to_jump" );
    thread extractsilentcountdown( "ambush0" );
    var_1 = getdvarint( "scr_br_x2_intro_delay", 60 );

    while ( var_1 >= 0 )
    {
        setomnvar( "ui_hardpoint_timer", gettime() + int( var_1 * 1000 ) );

        if ( var_1 <= 15 && var_1 >= 1 )
            scripts\mp\utility\sound::playsoundonplayers( "match_start_tick_in3", "allies" );

        var_1--;
        wait 1;
    }

    setomnvar( "ui_hardpoint_timer", 0 );
    thread exfil_spawning_logic();
    level thread execution_debug();
    extactioncancel();
    wait 4;
    thread scripts\mp\gametypes\br_movingtrain_armored.gsc::initmarker();
}

exfill_vehicle()
{
    if ( isdefined( level.numendgame ) )
        level thread scripts\mp\gametypes\br.gsc::startendgame( 1 );

    level.numendgame = undefined;
}

timeoutonabandoneddelay( var_0 )
{
    level.depletionrate = [];
    var_1 = tablelookupgetnumcols( var_0 ) - 1;

    for ( var_2 = 0; var_2 < var_1; var_2++ )
        level.depletionrate[var_2] = init_structs_mp_don3( var_2, var_0 );
}

init_structs_mp_don3( var_0, var_1 )
{
    var_2["loadoutArchetype"] = "archetype_assault";
    var_2["loadoutPrimary"] = tablelookup( var_1, 0, "loadoutPrimary", var_0 + 1 );
    var_2["loadoutPrimaryAttachment"] = tablelookup( var_1, 0, "loadoutPrimaryAttachment1", var_0 + 1 );
    var_2["loadoutPrimaryAttachment2"] = tablelookup( var_1, 0, "loadoutPrimaryAttachment2", var_0 + 1 );
    var_2["loadoutPrimaryAttachment3"] = tablelookup( var_1, 0, "loadoutPrimaryAttachment3", var_0 + 1 );
    var_2["loadoutPrimaryAttachment4"] = tablelookup( var_1, 0, "loadoutPrimaryAttachment4", var_0 + 1 );
    var_2["loadoutPrimaryAttachment5"] = tablelookup( var_1, 0, "loadoutPrimaryAttachment5", var_0 + 1 );
    var_2["loadoutPrimaryCamo"] = tablelookup( var_1, 0, "loadoutPrimaryCamo", var_0 + 1 );
    var_2["loadoutPrimaryReticle"] = tablelookup( var_1, 0, "loadoutPrimaryReticle", var_0 + 1 );
    var_2["loadoutSecondary"] = tablelookup( var_1, 0, "loadoutSecondary", var_0 + 1 );
    var_2["loadoutSecondaryAttachment"] = tablelookup( var_1, 0, "loadoutSecondaryAttachment1", var_0 + 1 );
    var_2["loadoutSecondaryAttachment2"] = tablelookup( var_1, 0, "loadoutSecondaryAttachment2", var_0 + 1 );
    var_2["loadoutSecondaryAttachment3"] = tablelookup( var_1, 0, "loadoutSecondaryAttachment3", var_0 + 1 );
    var_2["loadoutSecondaryAttachment4"] = tablelookup( var_1, 0, "loadoutSecondaryAttachment4", var_0 + 1 );
    var_2["loadoutSecondaryAttachment5"] = tablelookup( var_1, 0, "loadoutSecondaryAttachment5", var_0 + 1 );
    var_2["loadoutSecondaryCamo"] = tablelookup( var_1, 0, "loadoutSecondaryCamo", var_0 + 1 );
    var_2["loadoutSecondaryReticle"] = tablelookup( var_1, 0, "loadoutSecondaryReticle", var_0 + 1 );
    var_2["loadoutMeleeSlot"] = "none";
    var_2["loadoutEquipmentPrimary"] = tablelookup( var_1, 0, "loadoutEquipmentPrimary", var_0 + 1 );
    var_2["loadoutEquipmentSecondary"] = tablelookup( var_1, 0, "loadoutEquipmentSecondary", var_0 + 1 );
    var_2["loadoutStreakType"] = "assault";
    var_2["loadoutKillstreak1"] = "none";
    var_2["loadoutKillstreak2"] = "none";
    var_2["loadoutKillstreak3"] = "none";
    var_2["loadoutSuper"] = tablelookup( var_1, 0, "loadoutSuper", var_0 + 1 );
    var_2["loadoutPerks"] = [ tablelookup( var_1, 0, "loadoutPerk1", var_0 + 1 ), tablelookup( var_1, 0, "loadoutPerk2", var_0 + 1 ), tablelookup( var_1, 0, "loadoutPerk3", var_0 + 1 ), tablelookup( var_1, 0, "loadoutExtraPerk1", var_0 + 1 ), tablelookup( var_1, 0, "loadoutExtraPerk2", var_0 + 1 ), tablelookup( var_1, 0, "loadoutExtraPerk3", var_0 + 1 ) ];
    var_2["loadoutGesture"] = "playerData";
    var_2["tableColumn"] = var_0;
    return var_2;
}

enterpos()
{
    var_0["loadoutArchetype"] = "archetype_assault";
    var_0["loadoutPrimary"] = "iw8_lm_t9light";
    var_0["loadoutPrimaryAttachment"] = "compensator_lm_t9light01";
    var_0["loadoutPrimaryAttachment2"] = "heavy_lm_t9light02";
    var_0["loadoutPrimaryAttachment3"] = "mixunder_lm_t9light02";
    var_0["loadoutPrimaryAttachment4"] = "quickdraw_lm_t9light02";
    var_0["loadoutPrimaryAttachment5"] = "mixclip_lm_t9light02";
    var_0["loadoutPrimaryCamo"] = "none";
    var_0["loadoutPrimaryReticle"] = "none";
    var_0["loadoutSecondary"] = "iw8_la_t9standard";
    var_0["loadoutSecondaryAttachment"] = "none";
    var_0["loadoutSecondaryAttachment2"] = "none";
    var_0["loadoutSecondaryAttachment3"] = "none";
    var_0["loadoutSecondaryAttachment4"] = "none";
    var_0["loadoutSecondaryAttachment5"] = "none";
    var_0["loadoutSecondaryCamo"] = "none";
    var_0["loadoutSecondaryReticle"] = "none";
    var_0["loadoutMeleeSlot"] = "none";
    var_0["loadoutEquipmentPrimary"] = "equip_semtex";
    var_0["loadoutEquipmentSecondary"] = "none";
    var_0["loadoutStreakType"] = "assault";
    var_0["loadoutKillstreak1"] = "none";
    var_0["loadoutKillstreak2"] = "none";
    var_0["loadoutKillstreak3"] = "none";
    var_0["loadoutSuper"] = "none";
    var_0["loadoutPerks"] = [ "specialty_hustle", "specialty_restock", "specialty_warhead" ];
    var_0["loadoutGesture"] = "playerData";
    var_0["loadoutExecution"] = "none";
    return var_0;
}

exploder_ref()
{
    if ( !isdefined( level.depletionrate ) )
        timeoutonabandoneddelay( "mp/classtable_x2.csv" );

    var_0 = level.depletionrate[randomint( level.depletionrate.size )];
    equip_random_grenade( var_0, 1 );
    scripts\mp\gametypes\br_pickups.gsc::forcegivesuper( var_0["loadoutSuper"], 0 );
    scripts\mp\gametypes\br_armor.gsc::searchcirclesize( 1 );
    scripts\mp\gametypes\br_weapons.gsc::debug_spawncover_badnodetest();
    return 0;
}

equip_random_grenade( var_0, var_1, var_2 )
{
    self.pers["gamemodeLoadout"] = var_0;
    self.class = "gamemode";
    self.prevweaponobj = undefined;
    var_3 = scripts\mp\class::loadout_getclassstruct();
    var_3 = scripts\mp\class::loadout_updateclass( var_3, "gamemode" );
    scripts\mp\class::preloadandqueueclassstruct( var_3, 1, 1 );
    self takeallweapons();
    scripts\mp\class::giveloadout( self.team, "gamemode", var_1, var_1 );
    self givestartammo( var_3.loadoutprimaryobject );
    self givestartammo( var_3.loadoutsecondaryobject );
    scripts\mp\gametypes\br.gsc::scriptednode( self );
    scripts\mp\gametypes\br_weapons.gsc::br_ammo_player_clear();

    if ( !istrue( var_2 ) )
        scripts\mp\gametypes\br_weapons.gsc::delay_add_to_chopper_boss_drone_target_array();

    scripts\mp\gametypes\br_weapons.gsc::br_ammo_update_weapons( self );
    self notify( "ammo_update" );
}

exploboltexplode()
{
    var_0 = [];
    var_1 = self getweaponslistprimaries();

    foreach ( var_3 in var_1 )
    {
        var_4 = scripts\mp\gametypes\br_weapons.gsc::br_ammo_type_for_weapon( var_3 );

        if ( isdefined( var_4 ) )
        {
            var_5 = weaponclipsize( var_3 );
            self.br_ammo[var_4] = var_5;
            scripts\mp\gametypes\br_weapons.gsc::br_ammo_player_hud_update_ammotype( var_4 );
        }
    }

    scripts\mp\gametypes\br_weapons.gsc::br_ammo_update_weapons( self );
}

_id_125F7( var_0, var_1 )
{
    level endon( "game_ended" );
    self endon( "disconnect" );
    thread _id_126A4( 1 );
    return 1;
}

_id_11B80( var_0 )
{
    return 1;
}

_id_11B16()
{
    return 0;
}

_id_12573()
{
    if ( scripts\mp\gametypes\br_gametypes.gsc::unset_relic_aggressive_melee( "missions" ) )
        return undefined;

    return self._id_1296E;
}

risktokenonuse()
{
    var_0 = getdvarfloat( "scr_br_respawnMaxTrainOffset", 6000 );
    var_1 = randomfloatrange( 0, 360 );
    return ( cos( var_1 ), sin( var_1 ), 0 ) * randomfloatrange( 0, var_0 );
}

_id_12006()
{
    var_0 = getdvarfloat( "scr_br_respawnTrainHeight", 5000 );
    var_1 = randomfloatrange( 0, 360 );
    var_2 = spawnstruct();
    var_2.origin = ( -12221, -12808, 500 ) + risktokenonuse() + ( 0, 0, var_0 );
    var_2.angles = vectortoangles( ( cos( var_1 ), sin( var_1 ), 0 ) );
    var_2.index = -1;
    return var_2;
}

_id_126A4( var_0 )
{
    level endon( "game_ended" );
    self endon( "disconnect" );

    if ( var_0 )
    {
        var_1 = getdvarfloat( "scr_br_respawnTrainHeight", 2500 );
        var_2 = undefined;
        var_3 = undefined;

        if ( scripts\mp\flags::gameflag( "x2_train_destroyed" ) )
        {
            var_4 = scripts\mp\gametypes\br_gulag.gsc::_id_12568( 0 );

            if ( !isdefined( var_4 ) )
                var_4 = self;

            var_2 = scripts\mp\gametypes\br_gulag.gsc::rocket_fuel_stability( var_4.origin, 1000 );
            var_2 = scripts\mp\gametypes\br_public.gsc::modifyplayer_damage( var_2 );
            var_3 = scripts\mp\gametypes\br_gulag.gsc::registercarryobjectpickupcheck( var_2, var_4.origin );
        }
        else
        {
            var_5 = ( 0, 0, var_1 );
            var_6 = undefined;

            if ( level.mapname == "mp_br_mechanics" )
                var_6 = ( 0, 0, 0 ) + var_5;
            else if ( level.mapname == "mp_don4" && !scripts\mp\flags::gameflag( "prematch_done" ) )
                var_6 = ( -12221, -12808, 500 ) + ( 0, 0, 2 * var_1 ) + risktokenonuse();
            else if ( isdefined( level._id_145F1 ) && isdefined( level._id_145F1._id_13C8D ) && isdefined( level._id_145F1._id_13C8D[0] ) )
                var_6 = level._id_145F1._id_13C8D[0].wz_tease.origin + var_5;
            else
                var_6 = ( 4853.5, -1000.75, -108.75 ) + ( 0, 0, var_1 ) + risktokenonuse();

            var_7 = getdvarfloat( "scr_br_respawnMaxTrainOffset", 6000 );
            var_2 = scripts\mp\gametypes\br_gulag.gsc::rocket_fuel_stability( var_6, var_7, undefined );
            var_3 = scripts\mp\gametypes\br_gulag.gsc::registercarryobjectpickupcheck( var_2, var_6 );
        }

        if ( isdefined( var_2 ) && isdefined( var_3 ) )
        {
            var_8 = spawn( "script_model", var_2 );
            var_8.playerspawnpos = var_2;
            var_8.playerspawnangles = var_3;
            var_8.notti = 1;
            self.setspawnpoint = var_8;
        }

        self._id_1286F = scripts\mp\gametypes\br_gulag.gsc::_id_125BE( 0, undefined, var_1 );
        self._id_1286F.index = -1;
    }
    else
    {
        self._id_1286F = scripts\mp\gametypes\br.gsc::getspawnpoint( 1 );
        var_1 = scripts\cp_mp\parachute::getc130height();
        var_9 = scripts\engine\utility::drop_to_ground( self._id_1286F.origin, 1500, -20000 );
        var_5 = ( 0, 0, var_1 );
        self._id_1286F.origin = scripts\mp\gametypes\br.gsc::getoffsetspawnorigin( var_9, var_5 );
    }

    scripts\mp\playerlogic::waitandspawnclient( 0 );
    self._id_1463C = scripts\mp\utility\outline::outlineenableforall( self, "outline_depth_x2", "level_script" );
    scripts\mp\utility\perk::giveperk( "specialty_surveillance" );
    self freezecontrols( 1 );

    if ( !istrue( level.skipprematchdropspawn ) )
        thread scripts\mp\gametypes\br.gsc::prematchdeployparachute();

    while ( !isalive( self ) )
        waitframe();

    waitframe();
    scripts\mp\gametypes\br_armor.gsc::searchcirclesize( 1 );
    scripts\mp\gametypes\br_weapons.gsc::debug_spawncover_badnodetest();
    thread scripts\mp\gametypes\br.gsc::defend_wave_2();
    self skydive_setdeploymentstatus( 1 );
    self skydive_setbasejumpingstatus( 1 );
    self visionsetnakedforplayer( level._id_142D1, 0 );
    var_10 = !self calloutmarkerping_getent();
    var_11 = gettime();

    if ( var_10 )
    {
        while ( isalive( self ) && isdefined( self.weaponlist ) && !self hasloadedviewweapons( self.weaponlist ) )
        {
            if ( var_11 + 3000 < gettime() )
                break;

            waitframe();
        }
    }

    self notify( "brWaitAndSpawnClientComplete" );
    self.waitingtospawn = 0;
    self freezecontrols( 0 );

    if ( var_0 )
        scripts\mp\gametypes\br.gsc::_id_13F21( self );
}

extra_riders_getin_anim_func( var_0, var_1, var_2, var_3 )
{
    var_4 = scripts\mp\gametypes\br_quest_util.gsc::createquestinstance( var_0, var_1 + "-" + self.squadindex, var_2, var_3, self.squadindex );
    var_4 scripts\mp\gametypes\br_quest_util.gsc::_id_12B15( self );
    var_4.team = self.team;
    var_4.startlocation = self.origin;
    var_4.intelprogress = self.origin;
    var_4.playerlist = level.squaddata[self.team][self.squadindex].players;
    return var_4;
}

extra_riders_func( var_0 )
{
    if ( var_0.team == self.team && var_0.squadindex == self.squadindex )
        return 1;
    else
        return 0;
}

enemy_signal_flare( var_0, var_1 )
{
    var_2 = self;

    if ( isdefined( level.questinfo.quests[var_0].instances[var_2.team + "-" + var_2.squadindex] ) )
        return;

    var_3 = [[ var_1 ]]( var_2.team, "", var_2, "" );

    if ( isdefined( var_3 ) )
        var_3 thread exfilallyturning();

    return var_3;
}

exfilallyturning()
{
    level endon( "game_ended" );
    var_0 = self;
    var_0 waittill( "removed" );
    var_0 notify( "update" );
}

entmantling( var_0, var_1 )
{
    return level.questinfo.quests[var_0].instances[var_1.team + "-" + var_1.squadindex];
}

enter_laser_panel_anim_sequence( var_0 )
{
    var_1 = [];

    foreach ( var_3 in var_0 )
    {
        if ( isdefined( var_3 ) && isalive( var_3 ) )
            var_1[var_1.size] = var_3;
    }

    return var_1;
}

extract_ontimerexpired( var_0 )
{
    foreach ( var_2 in var_0.playerlist )
        var_2._id_1296E = undefined;
}

evaluationcallback()
{
    scripts\mp\flags::gameflaginit( "x2_ambush1_starting", 0 );
    scripts\mp\flags::gameflaginit( "x2_ambush1_completed", 0 );
    scripts\mp\flags::gameflaginit( "x2_ambush2_starting", 0 );
    scripts\mp\flags::gameflaginit( "x2_ambush2_completed", 0 );
    scripts\mp\flags::gameflaginit( "x2_ambush3_starting", 0 );
    scripts\mp\flags::gameflaginit( "x2_ambush3_completed", 0 );
    scripts\mp\flags::gameflaginit( "x2_ambush4_starting", 0 );
    scripts\mp\flags::gameflaginit( "x2_ambush4_completed", 0 );
    scripts\mp\flags::gameflaginit( "x2_ambush4_starting", 0 );
    scripts\mp\flags::gameflaginit( "x2_ambush4_completed", 0 );
    scripts\mp\flags::gameflaginit( "x2_ambush5_starting", 0 );
    scripts\mp\flags::gameflaginit( "x2_ambush5_completed", 0 );
    scripts\mp\flags::gameflaginit( "x2_ambush6_starting", 0 );
    scripts\mp\flags::gameflaginit( "x2_ambush6_completed", 0 );
    scripts\mp\flags::gameflaginit( "x2_ambush7_starting", 0 );
    scripts\mp\flags::gameflaginit( "x2_ambush7_completed", 0 );
    scripts\mp\flags::gameflaginit( "x2_ambush8_starting", 0 );
    scripts\mp\flags::gameflaginit( "x2_ambush8_completed", 0 );
    scripts\mp\flags::gameflaginit( "x2_locomotive_vulnerable", 0 );
    scripts\mp\flags::gameflaginit( "x2_train_destroyed", 0 );
    scripts\mp\flags::gameflaginit( "x2_checkpoint1_completed", 0 );
    scripts\mp\flags::gameflaginit( "x2_checkpoint2_completed", 0 );
    scripts\mp\flags::gameflaginit( "x2_checkpoint3_completed", 0 );
    scripts\mp\flags::gameflaginit( "x2_checkpoint4_completed", 0 );
    scripts\mp\flags::gameflaginit( "x2_checkpoint5_completed", 0 );
    scripts\mp\flags::gameflaginit( "x2_checkpoint6_completed", 0 );
    scripts\mp\flags::gameflaginit( "x2_airstrike_begin", 0 );
}

escort_a()
{
    exfil_sequence( "InfilSequenceEnd" );
    level thread extraweapons();
    level thread escort_intro_pre_anim_wait();
    level.battlechatterenabled = 0;
}

extraweapons()
{
    level endon( "game_ended" );
    exfil_sequence( "x2think" );
    scripts\mp\flags::gameflagwait( "prematch_done" );
    level thread exfil();
    wait 1;
    level thread exfil_spawnfunc();
    level thread fadetogearingup();
    thread equip_trophies();
    showsplash( "br_x2_introduction" );
    wait 1.5;
    var_0 = enter_numbers_end();

    foreach ( var_2 in var_0 )
    {
        foreach ( var_4 in var_2 )
        {
            if ( var_4.players.size == 0 )
                continue;

            var_4 thread extra_riders_intro_scene_func();
        }
    }
}

escort_b()
{
    level.brneverlanded = [];
    level.getpubliceventchance = [];
    enemygunship_handlemissiledetection( 1, 0, 0, ( 4606, -820, -100 ), 0, 1, 0, 1, [] );
    enemygunship_spawngunship( 1, ( 2477, 18513, -237 ), [ ( -5756, 23842, -390 ), ( -12077, 29338, -216 ) ] );
    enemygunship_spawngunship( 2, ( -15901, 29619, -184 ), [ ( -23766, 31256, -6 ), ( -30370, 29231, 371 ) ] );
    enemygunship_spawngunship( 3, ( -31170, 9206, -380 ), [] );
    enemygunship_handlemissiledetection( 2, 1, 1, ( -31298, 3614, -284 ), 1, 1, 0, 0, [] );
}

enemygunship_handlemissiledetection( var_0, var_1, var_2, var_3, var_4, var_5, var_6, var_7, var_8 )
{
    var_9 = spawnstruct();
    var_9.broadcast_currency = var_0;
    var_9.managecontrolledcallbacktimeout = var_1;
    var_9._id_13343 = var_2;
    var_9.position = var_3;
    var_9.should_do_damage_check_func_relics = var_4;
    var_9.turret_guncourse_explode_on_end = var_5;
    var_9.loc_exposed_to_chopper_boss = var_6;
    var_9._id_13CCB = var_7;
    var_9.infilvideowaituntilcomplete = var_8;
    level.brneverlanded[var_0] = var_9;
}

enemygunship_spawngunship( var_0, var_1, var_2 )
{
    var_3 = spawnstruct();
    var_3.tv_station_interior_enemy_should_break_stealth_immediately = 1;
    var_3.getquestplunderreward = var_0;
    var_3.position = var_1;
    var_3.vehicle_occupancy_isneutraltoteam = [];
    var_3.infilvideowaituntilcomplete = var_2;
    level.getpubliceventchance[var_0] = var_3;
}

enter_numbers_init( var_0 )
{
    return level.brneverlanded[var_0];
}

eventcallback()
{
    level endon( "game_ended" );
    scripts\mp\flags::gameflagwait( "prematch_done" );
    level._id_145F1._id_13CCA = 0;
    level._id_145F1.instance = 0;
    level._id_145F1._id_1397D = [];
    level._id_145F1._id_1397C = [];
}

exfil_spawnfunc()
{
    level endon( "game_ended" );
    level endon( "train_destroyed" );
    scripts\engine\utility::flag_wait( "wztrain_anim_playing" );
    var_0 = level._id_145F1._id_13C8D[0];
    var_0 scripts\mp\gametypes\br_movingtrain.gsc::_id_13C8B( 3, 2 );

    if ( !isdefined( level._id_145F1 ) || !isdefined( level._id_145F1.animents ) && !isdefined( level._id_145F1.animents[0] ) )
        return;

    level thread exit_laststand_usability();
    level thread fadetoblackforxsec( var_0, level.brneverlanded[2] );
    enemy_right_monitor( level.brneverlanded[1] );

    foreach ( var_2 in level.getpubliceventchance )
        enemygunship_firerounds( var_2 );

    enemy_right_monitor( level.brneverlanded[2] );
}

exit_laststand_usability()
{
    level endon( "game_ended" );
    scripts\mp\flags::gameflagwait( "x2_ambush1_completed" );
    scripts\mp\gametypes\br_movingtrain_armored.gsc::extraction_balloon_total_plunder();
}

enemygunship_firerounds( var_0 )
{
    var_1 = level._id_145F1._id_13C8D[0];
    var_2 = var_0.position;
    var_3 = var_0.getquestplunderreward;
    thread extractsilentcountdown( "ambush" + ( var_3 + 1 ) );
    var_4 = 1500;
    _id_143FD( var_1, var_2, var_4 );
    thread extendcirclelist();
    extractmissionhelipadscriptable( var_0.infilvideowaituntilcomplete );
    var_4 = 50;
    _id_143FD( var_1, var_2, var_4 );
    scripts\mp\flags::gameflagset( "x2_checkpoint" + var_3 + "_completed" );

    if ( var_0.vehicle_occupancy_isneutraltoteam.size > 0 )
    {
        if ( var_3 > 1 )
            exfil_heli_landing( var_3 - 1 );

        extractplunderheliinvulnerable( var_3 );
    }

    var_5 = var_0.getquestplunderreward;

    if ( var_5 >= 1 )
        enemymarker( var_5 );
}

enemy_right_monitor( var_0 )
{
    var_1 = level._id_145F1._id_13C8D[0];

    if ( var_0.managecontrolledcallbacktimeout )
        wait 2;

    if ( var_0.broadcast_currency != 1 && istrue( level._id_13396 ) )
        thread extractlocale_circletick( var_0.position, var_0.broadcast_currency );

    if ( var_0.broadcast_currency >= level.brneverlanded.size )
        var_2 = var_0.broadcast_currency + level.getpubliceventchance.size;
    else
    {
        var_2 = var_0.broadcast_currency;
        thread extractsilentcountdown( "ambush" + var_2 );
    }

    var_3 = getdvarvector( "scr_br_x2_amb_destination", var_0.position );
    level.initextractionlocations = var_0.broadcast_currency;
    var_4 = getdvarint( "scr_br_x2_amb_warn_distance1", 24000 );
    var_5 = getdvarint( "scr_br_x2_amb_warn_distance2", 12500 );
    var_6 = getdvarint( "scr_br_x2_amb_warn_distance3", 3000 );
    var_7 = getdvarint( "scr_br_x2_amb_warn_distance4", 50 );
    var_8 = 200;
    _id_143FD( var_1, var_3, var_4 );
    extractmissionhelipadscriptable( var_0.infilvideowaituntilcomplete );
    _id_143FD( var_1, var_3, var_5 );

    if ( var_0.broadcast_currency == 1 || var_0.should_do_damage_check_func_relics && istrue( level._id_13396 ) )
        showsplash( "br_x2_distance02" );

    level notify( "train_incoming" );
    _id_143FD( var_1, var_3, var_6 );

    if ( var_0.broadcast_currency == 1 || var_0.should_do_damage_check_func_relics && istrue( level._id_13396 ) )
        showsplash( "br_x2_distance03" );

    scripts\mp\flags::gameflagset( "x2_ambush" + var_0.broadcast_currency + "_starting" );
    _id_143FD( var_1, var_3, var_7 );

    if ( var_0.turret_guncourse_explode_on_end && level._id_145F1.instance > 0 )
    {
        if ( var_0.loc_exposed_to_chopper_boss )
            showsplash( "br_x2_distance04" );
        else
            showsplash( "br_x2_train_immobilized" );
    }

    _id_143FD( var_1, var_3, var_8 );

    if ( !var_0._id_13CCB )
        level._id_145F1._id_12A38 = 1;

    var_9 = scripts\engine\utility::ter_op( var_0.turret_guncourse_explode_on_end, 8, 3 );
    thread extratimeincreasecount( var_9, 0, var_0.turret_guncourse_explode_on_end );

    if ( var_0.turret_guncourse_explode_on_end )
    {
        if ( level._id_145F1.instance == 0 )
            level._id_145F1.instance++;

        faceenemyspawn( var_0.broadcast_currency );
        var_1 scripts\mp\gametypes\br_movingtrain_armored.gsc::enemy_rushdown_player();
        scripts\mp\gametypes\br_x2_bomb_quest.gsc::has_headicon();
        scripts\mp\flags::gameflagset( "x2_ambush" + var_0.broadcast_currency + "_completed" );
        wait 6;
    }
    else
    {
        wait 2;
        scripts\mp\flags::gameflagset( "x2_ambush" + var_0.broadcast_currency + "_completed" );
        wait 6;
    }

    if ( !istrue( level._id_145F1._id_12A38 ) )
    {
        var_1 scripts\mp\gametypes\br_movingtrain.gsc::_id_13C8B( 0.7, 0.05 );
        thread f11lights();
    }
    else if ( !level._id_145F1.usedcountinveh )
        level thread scripts\mp\gametypes\br_movingtrain_armored.gsc::_id_13CCD();

    var_10 = var_2 - 1;

    if ( var_10 >= 1 )
        enemymarker( var_10 );
}

extractlocale_circletick( var_0, var_1 )
{
    level endon( "game_ended" );
    var_2 = spawn( "script_model", var_0 );
    var_2 setmodel( "vfx_br_x2" );
    var_2 setscriptablepartstate( "vfx", "vfx_br_x2_beacon_01" );
    scripts\engine\utility::_id_143AD( "x2_ambush" + var_1 + "_completed", "x2_train_destroyed" );
    var_2 delete();
}

fadetoblackforxsec( var_0, var_1 )
{
    level endon( "game_ended" );
    var_2 = 2300;

    if ( !istrue( level._id_13396 ) )
    {
        var_3 = 6000;
        _id_143FD( var_0, var_1.position, var_3 );
        scripts\mp\flags::gameflagset( "x2_airstrike_begin" );
    }

    _id_143FD( var_0, var_1.position, var_2 );
    thread f14_keypadnumstr( var_1.broadcast_currency, var_1.position );
}

fadeoutinspectatorsofplayer( var_0 )
{
    level endon( "game_ended" );
    var_1 = level._id_145F1._id_13C8D[0];
    thread f14_current_inputamt( 1 );
    wait 5;

    if ( var_0 )
    {
        if ( !istrue( level._id_145F1._id_12A38 ) && !scripts\mp\flags::gameflag( "x2_train_destroyed" ) && !scripts\mp\flags::gameflag( "x2_locomotive_vulnerable" ) )
        {
            var_1 scripts\mp\gametypes\br_movingtrain.gsc::_id_13C8B( 0.7, 0.05 );
            thread f11lights();
        }
    }
    else if ( !level._id_145F1.usedcountinveh )
        level thread scripts\mp\gametypes\br_movingtrain_armored.gsc::_id_13CCD();
}

extratimeincreasecount( var_0, var_1, var_2 )
{
    level endon( "game_ended" );
    level notify( "x2_train_stopped" );
    level endon( "x2_train_stopped" );
    var_3 = level._id_145F1._id_13C8D[0];
    var_3 scripts\mp\gametypes\br_movingtrain.gsc::_id_13C94( var_0 );

    if ( !var_1 )
    {
        if ( level._id_145F1.animents[0].burst_fire_turret > 0 )
        {
            thread f11onarmoryswitchon( var_0, var_2 );
            thread eyeonnotehandler( var_0 );
        }
    }
}

fadetogearingup()
{
    level endon( "game_ended" );
    exfil_sequence( "watchTrainDestroyed" );
    scripts\mp\flags::gameflagwait( "x2_locomotive_vulnerable" );
    level thread _id_13356();
    scripts\mp\flags::gameflagwait( "x2_train_destroyed" );
    thread extratimeincreasecount( 3, 1 );
    level notify( "train_destroyed" );
    level exfil_enemy_spawning();
    level extractupdateiconsframeend();
}

exfil_enemy_spawning()
{
    wait 6;
    thread scripts\mp\gametypes\br_vehicles.gsc::emptyallvehicles();
    thread scripts\cp_mp\vehicles\vehicle_interact::vehicle_interact_allowvehicleuseglobal( 0 );
}

_id_13356()
{
    level endon( "game_ended" );
    level endon( "x2_train_destroyed" );
    wait 3;
    level notify( "finishtrain_splash" );
    showsplash( "br_x2_finishtrain" );
}

_id_143FD( var_0, var_1, var_2 )
{
    var_3 = var_2 * var_2;

    while ( length2dsquared( var_0.origin - var_1 ) > var_3 )
        waitframe();
}

showsplash( var_0 )
{
    foreach ( var_2 in level.players )
        var_2 scripts\mp\hud_message::showsplash( var_0 );
}

_id_13744( var_0 )
{
    foreach ( var_2 in self.players )
        var_2 scripts\mp\hud_message::showsplash( var_0 );
}

f14_keypadnumstr( var_0, var_1 )
{
    level endon( "game_ended" );
    var_2 = 82;
    var_3 = var_1;
    level thread enemy_validate_node_proximity( var_3, var_2 );
}

faceenemyspawn( var_0 )
{
    var_1 = ( -90, 0, 0 );
    var_2 = ( 0, 0, 0 );

    switch ( var_0 )
    {
        case 1:
            var_2 = ( 4595, -1000, -160 );
            var_1 = ( 0, 86, 0 );
            break;
        case 2:
            var_2 = ( -31298, 3614, -284 );
            var_1 = ( 0, 82, 0 );
            break;
        default:
            break;
    }

    var_3 = spawn( "script_model", var_2 );
    var_3 setmodel( "x2_vfx_ambushes_spawn" );
    var_3.angles = var_1;
    var_3 setscriptablepartstate( "base", "ambush_" + var_0 );
    var_3 thread handlerocketkillsgiverockets( 5 );
}

extracting( var_0, var_1 )
{
    level._id_142D1 = var_0;

    if ( !isdefined( var_1 ) )
        var_1 = 0;

    foreach ( var_3 in level.players )
        var_3 visionsetnakedforplayer( var_0, var_1 );
}

extra_riders_intro_scene_func()
{
    level endon( "game_ended" );
    level endon( "train_destroyed" );
    extracthelipadusecallback( scripts\mp\gametypes\br_x2_bomb_quest.gsc::calculatehelispawndata );
    wait 2;

    if ( !scripts\mp\flags::gameflag( "x2_ambush1_starting" ) )
    {
        extracthelipadusecallback( scripts\mp\gametypes\br_x2_amb1_quest.gsc::calculatehelispawndata );
        wait 2;
    }

    waitframe();
    exfil_speed( 1 );

    if ( istrue( level._id_13396 ) )
    {
        extracthelipadusecallback( scripts\mp\gametypes\br_x2_map_quest.gsc::calculatehelispawndata );
        wait 2;
        _id_13744( "br_x2_bomb_quest_signal" );
        level._id_1464E = "signal";
        var_0 = -4;
        scripts\mp\gametypes\br_x2_bomb_quest.gsc::_id_1362D( level.brneverlanded[2].position, var_0 );
        scripts\mp\flags::gameflagset( "x2_airstrike_begin" );
        extracthelipadusecallback( scripts\mp\gametypes\br_x2_bomb_quest.gsc::calculatehelispawndata );
        wait 2;

        if ( !scripts\mp\flags::gameflag( "x2_ambush2_starting" ) )
        {
            extracthelipadusecallback( scripts\mp\gametypes\br_x2_amb1_quest.gsc::calculatehelispawndata );
            wait 2;
        }
    }

    extracthelipadusecallback( scripts\mp\gametypes\br_x2_map_quest.gsc::calculatehelispawndata );
}

exfil_speed( var_0 )
{
    if ( level._id_14632 == var_0 )
        return;

    level._id_14632 = var_0;
    level.disable_super_in_turret._id_14653 = 0;
    level._id_14639 = 0;
    level._id_14651 = 0;
}

extracthelipadusecallback( var_0 )
{
    var_1 = _id_14381();

    if ( !isdefined( var_1 ) )
        return;

    var_2 = var_1 [[ var_0 ]]();
    var_2 waittill( "removed" );
}

_id_14381()
{
    while ( self.players.size != 0 )
    {
        foreach ( var_1 in self.players )
        {
            if ( isalive( var_1 ) && !istrue( var_1.inlaststand ) && !var_1 scripts\mp\gametypes\br_public.gsc::updateinstantclassswapallowedinternal() )
                return var_1;
        }

        wait 1;
    }

    return undefined;
}

execution_obstacle()
{
    level endon( "game_ended" );
    scripts\mp\flags::gameflagwait( "prematch_done" );

    foreach ( var_1 in level.vehicle.spawn.databyref )
        var_1.canspawncallback = ::enemygunship_attackgoal;
}

enemygunship_attackgoal( var_0, var_1, var_2, var_3 )
{
    var_4 = ( -25571, -10031, 84 );
    var_5 = 45981;

    if ( distance2d( var_2.origin, var_4 ) > var_5 )
        return 0;

    var_4 = ( -11360, -20916, 154 );
    var_5 = 13000;

    if ( distance2d( var_2.origin, var_4 ) < var_5 )
        return 0;

    var_4 = ( -12737, -9293, 412 );
    var_5 = 18000;

    if ( distance2d( var_2.origin, var_4 ) < var_5 )
        return 0;

    var_4 = ( -17354, 15846, -260 );
    var_5 = 8000;

    if ( distance2d( var_2.origin, var_4 ) < var_5 )
        return 0;

    var_4 = ( -32195, -13969, 1605 );
    var_5 = 16000;

    if ( distance2d( var_2.origin, var_4 ) < var_5 )
        return 0;

    var_4 = ( -18401, -34786, 1339 );
    var_5 = 20000;

    if ( distance2d( var_2.origin, var_4 ) < var_5 )
        return 0;

    return 1;
}

executioncashmultiplier()
{
    level._id_14643 = [];
    level._id_1463F = [];
    var_0 = [];
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "jeep", ( 4212, 2380, -411 ), ( 10, 72, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "jeep", ( 4134, 5267, -151 ), ( 24, 96, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "jeep", ( 4571, 8159, -395 ), ( 0, 122, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "jeep", ( 4634, 6717, -403 ), ( 10, 97, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "jeep", ( 2773, 988, -350 ), ( 7, 61, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "jeep", ( 1368, 4251, -237 ), ( 1, 26, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "tac_rover", ( 3235, 4748, -550 ), ( 10, 89, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "tac_rover", ( 3572, 1049, -421 ), ( 11, 58, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "tac_rover", ( 3430, 4698, -210 ), ( 10, 1, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "tac_rover", ( 4228, 6892, -435 ), ( 0, 92, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "tac_rover", ( 3816, 1575, -409 ), ( 10, 72, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "tac_rover", ( 5909, 2715, -462 ), ( 13, 167, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "cargo_truck", ( 3903, 3089, -268 ), ( 15, 89, 1 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "cargo_truck", ( 4844, 4758, -533 ), ( 10, 89, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "motorcycle", ( 2376, 1482, -305 ), ( 0, 50, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "motorcycle", ( 3559, 6840, -440 ), ( 0, 89, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "motorcycle", ( 5762, 11484, 24 ), ( 5, 172, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "motorcycle", ( 5655, 13480, -195 ), ( 5, 135, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "little_bird", ( 2767, 2841, -390 ), ( 0, 26, 0 ) );
    level._id_14643["ambush0"] = var_0;
    var_0 = [];
    level._id_14643["ambush1"] = var_0;
    var_0 = [];
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "jeep", ( 2280, 13376, -247 ), ( 0, 10, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "jeep", ( 3207, 18179, -140 ), ( 10, 108, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "jeep", ( -340, 18379, -227 ), ( 0, 4, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "jeep", ( -3845, 24293, -350 ), ( 0, 180, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "jeep", ( -11345, 29188, -159 ), ( 10, 243, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "jeep", ( -14299, 29725, -119 ), ( 10, 203, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "jeep", ( -16523, 30842, -116 ), ( 10, 168, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "jeep", ( -1774, 20829, -216 ), ( 8, 89, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "jeep", ( -3859, 25542, -322 ), ( 5, 179, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "jeep", ( -8995, 29006, -190 ), ( 2, 244, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "jeep", ( -16186, 31745, -150 ), ( 5, 164, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "tac_rover", ( -6269, 22133, -305 ), ( 3, 63, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "tac_rover", ( -12165, 30346, -170 ), ( 6, 172, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "tac_rover", ( 2788, 16410, -167 ), ( 10, 96, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "tac_rover", ( 3128, 15428, -220 ), ( 0, 126, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "tac_rover", ( 637, 19690, -200 ), ( 0, 43, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "tac_rover", ( 293, 22204, -330 ), ( 0, 68, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "tac_rover", ( -7115, 25702, -365 ), ( 0, 177, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "tac_rover", ( -9974, 27807, -170 ), ( 10, 234, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "tac_rover", ( -13632, 27017, -326 ), ( 10, 80, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "cargo_truck", ( 5681, 16665, -182 ), ( 0, 228, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "cargo_truck", ( -488, 16534, -189 ), ( 0, 354, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "cargo_truck", ( 2649, 21247, -170 ), ( 0, 135, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "cargo_truck", ( -5463, 23766, -345 ), ( 0, 88, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "motorcycle", ( -16983, 32110, -159 ), ( 10, 214, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "motorcycle", ( 1609, 19892, -170 ), ( 0, 120, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "motorcycle", ( -1767, 23633, -355 ), ( 0, 180, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "little_bird", ( -5800, 24591, -290 ), ( 0, 180, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "little_bird", ( -5800, 25196, -290 ), ( 0, 180, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "little_bird", ( 354, 17585, 0 ), ( 0, -110, 0 ) );
    level._id_14643["ambush2"] = var_0;
    var_0 = [];
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "motorcycle", ( -34526, 20832, 388 ), ( 5, 265, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "motorcycle", ( -34562, 21170, 408 ), ( 5, 273, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "jeep", ( -19007, 30179, -43 ), ( 15, 95, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "cargo_truck", ( -19238, 30226, -42 ), ( 15, 95, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "tac_rover", ( -17834, 32062, -32 ), ( 15, 171, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "jeep", ( -19630, 32924, -32 ), ( 15, 274, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "tac_rover", ( -21596, 32149, 12 ), ( 15, 184, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "jeep", ( -22235, 32084, 44 ), ( 15, 187, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "jeep", ( -31825, 19233, 317 ), ( 10, 200, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "jeep", ( -31023, 17433, -122 ), ( 10, 281, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "jeep", ( -31234, 14697, -187 ), ( 10, 267, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "jeep", ( -33733, 21830, 222 ), ( 10, 310, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "tac_rover", ( -21796, 31408, 38 ), ( 15, 217, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "cargo_truck", ( -32072, 23612, 153 ), ( 15, 221, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "jeep", ( -26182, 30991, 172 ), ( 15, 157, -2 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "cargo_truck", ( -29228, 29372, 444 ), ( 15, 42, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "jeep", ( -27215, 32315, 267 ), ( 15, 262, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "tac_rover", ( -31878, 27374, 281 ), ( 15, 164, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "tac_rover", ( -33634, 18752, 200 ), ( 0, 290, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "tac_rover", ( -33834, 15921, 97 ), ( 10, 302, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "tac_rover", ( -35665, 22205, 855 ), ( 10, 285, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "motorcycle", ( -20233, 32621, -120 ), ( 0, 289, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "motorcycle", ( -24009, 31375, 25 ), ( 0, 160, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "motorcycle", ( -34925, 24098, 410 ), ( 0, 298, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "little_bird", ( -29610, 29751, 400 ), ( 0, 87, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "jeep", ( -28933, 30081, 378 ), ( 10, 150, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "motorcycle", ( -32536, 30612, 940 ), ( 5, 282, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "motorcycle", ( -35140, 29376, 1449 ), ( 5, 216, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "tac_rover", ( -29212, 31900, 445 ), ( 10, 254, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "tac_rover", ( -31087, 30665, 584 ), ( 10, 252, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "jeep", ( -13135, 25412, -397 ), ( 359, 182, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "cargo_truck", ( -15349, 30005, -88 ), ( 3, 208, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "motorcycle", ( -16745, 27933, -349 ), ( 3, 159, 0 ) );
    level._id_14643["ambush3"] = var_0;
    var_0 = [];
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "jeep", ( -32215, 16768, -65 ), ( 0, 287, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "jeep", ( -30765, 10840, -55 ), ( 0, 236, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "jeep", ( -32171, 6952, -121 ), ( 0, 289, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "jeep", ( -32511, 4293, -245 ), ( 0, 358, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "jeep", ( -34192, 22026, 207 ), ( 3, 299, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "jeep", ( -30598, 19928, -138 ), ( 3, 286, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "jeep", ( -33534, 26277, 110 ), ( 2, 317, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "tac_rover", ( -31249, 6897, -102 ), ( 0, 246, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "tac_rover", ( -33647, 28877, 756 ), ( 10, 210, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "tac_rover", ( -32621, 24645, 61 ), ( 0, 244, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "tac_rover", ( -30229, 5409, -181 ), ( 0, 241, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "tac_rover", ( -31368, 9106, 5 ), ( 0, 262, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "tac_rover", ( -32342, 776, -230 ), ( 0, 276, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "tac_rover", ( -33256, 13352, 114 ), ( 0, 279, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "tac_rover", ( -31411, 12583, -134 ), ( 0, 274, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "motorcycle", ( -32454, 19807, -8 ), ( 6, 299, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "motorcycle", ( -31428, 19420, 273 ), ( 1, 290, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "cargo_truck", ( -31453, 5813, -127 ), ( 0, 243, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "cargo_truck", ( -30397, 12789, -105 ), ( 0, 190, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "cargo_truck", ( -31310, 2900, -210 ), ( 15, 355, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "cargo_truck", ( -31343, 2750, -210 ), ( 15, 178, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "cargo_truck", ( -31305, 2605, -210 ), ( 20, 360, 0 ) );
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "cargo_truck", ( -31947, 19370, 15 ), ( 14, 287, 0 ) );
    level._id_14643["ambush4"] = var_0;
    var_0 = [];
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "jeep", ( -32757, -16900, -276 ), ( 0, 264, 0 ) );
    level._id_14643["ambush5"] = var_0;
    var_0 = [];
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "jeep", ( -31110, -29996, -177 ), ( 0, 323, 0 ) );
    level._id_14643["ambush6"] = var_0;
    var_0 = [];
    var_0[var_0.size] = enemygunship_updatedebugflashlight( "jeep", ( -10440, -41230, 145 ), ( 0, 30, 0 ) );
    level._id_14643["ambush7"] = var_0;
}

enemygunship_updatedebugflashlight( var_0, var_1, var_2 )
{
    var_3 = spawnstruct();
    var_3.refname = var_0;
    var_3.origin = var_1;
    var_3.angles = var_2;
    return var_3;
}

extractsilentcountdown( var_0 )
{
    if ( getdvarint( "scr_br_x2_vehicle_set_enabled", 1 ) == 0 )
        return;

    if ( !isdefined( level._id_14643 ) )
        return;

    var_1 = level._id_14643[var_0];

    if ( !isdefined( var_1 ) )
        return;

    var_2 = getdvarfloat( "scr_br_x2_vehicle_set_wait", 0.5 );

    if ( var_2 > 0 )
    {
        if ( var_2 > 0 )
            wait( var_2 );
        else
            waitframe();
    }

    var_3 = [];

    foreach ( var_5 in var_1 )
    {
        waitframe();
        var_3[var_3.size] = extractshowicontoplayer( var_5.refname, var_5.origin, var_5.angles );
    }

    level._id_1463E[var_0] = var_3;
}

extractshowicontoplayer( var_0, var_1, var_2 )
{
    if ( level.vehiclecount >= getdvarint( "scr_br_x2_vehicle_count_max", 104 ) )
        return undefined;

    var_3 = spawnstruct();
    var_4 = spawnstruct();
    var_4.origin = var_1;
    var_4.angles = var_2;
    var_5 = scripts\mp\gametypes\br_vehicles.gsc::tryspawnavehicle( var_0, var_4, "X2_spawns", var_3 );
    return var_5;
}

engagementcount( var_0 )
{
    var_0 scripts\cp_mp\vehicles\vehicle_damage::_id_14141( var_0 );
    var_0 scripts\cp_mp\vehicles\vehicle_interact::vehicle_interact_deregisterinstance( var_0 );
    var_0 scripts\cp_mp\vehicles\vehicle_tracking::vehicle_tracking_deregisterinstance( var_0 );
    var_0 scripts\cp_mp\vehicles\vehicle_occupancy::vehicle_occupancy_deregisterinstance( var_0 );
    var_0 scripts\cp_mp\vehicles\vehicle_spawn::vehicle_spawn_deregisterinstance( var_0.vehiclename, var_0 getentitynumber() );
    var_0 scripts\cp_mp\vehicles\vehicle_tracking::_deletevehicle( var_0 );
}

enemymarker( var_0 )
{
    for ( var_1 = 0; var_1 <= var_0; var_1++ )
    {
        var_2 = "ambush" + var_1;

        if ( level._id_1463E[var_2].size <= 0 )
            continue;

        var_3 = [];

        foreach ( var_5 in level._id_1463E[var_2] )
        {
            if ( !isdefined( var_5 ) || !isdefined( var_5.origin ) )
                continue;

            var_6 = extracthelipadwatchforhelileaving( var_5.origin, 5000 );

            if ( isdefined( var_5.owner ) || !var_5.isempty || var_6.size > 0 )
            {
                var_3[var_3.size] = var_5;
                continue;
            }

            engagementcount( var_5 );
        }

        level._id_1463E[var_2] = var_3;
    }
}

extracthelipadwatchforhelileaving( var_0, var_1 )
{
    var_2 = [];
    var_3 = var_1 * var_1;

    foreach ( var_5 in level.players )
    {
        var_6 = distancesquared( var_5.origin, var_0 );

        if ( var_6 < var_3 )
            var_2[var_2.size] = var_5;
    }

    return var_2;
}

extrascore4( var_0, var_1, var_2, var_3 )
{
    return 1;
}

entity_movingplatform_update()
{
    return ( -64642, -39932, 1509 );
}

enemy_push_players_logic( var_0, var_1, var_2, var_3 )
{
    var_4 = spawnstruct();
    var_4.origin = var_1;
    var_4.angles = var_2;
    var_4._id_11F2F = var_3;
    var_4.vehicle_occupancy_isneutraltoplayer = [];
    var_5 = level.getpubliceventchance[var_0].vehicle_occupancy_isneutraltoteam.size;
    level.getpubliceventchance[var_0].vehicle_occupancy_isneutraltoteam[var_5] = var_4;
}

exfil_heli_landing( var_0 )
{
    if ( level.getpubliceventchance[var_0].vehicle_occupancy_isneutraltoteam.size > 0 )
    {
        var_1 = level.getpubliceventchance[var_0].vehicle_occupancy_isneutraltoteam;

        foreach ( var_3 in var_1 )
        {
            if ( !isdefined( var_3.vehicle_occupancy_isneutraltoplayer ) )
                continue;

            foreach ( var_5 in var_3.vehicle_occupancy_isneutraltoplayer )
            {
                if ( isdefined( var_5 ) )
                    var_5 kill();
            }
        }
    }
}

extractplunderheliinvulnerable( var_0 )
{
    if ( level.getpubliceventchance[var_0].vehicle_occupancy_isneutraltoteam.size > 0 )
    {
        var_1 = level.getpubliceventchance[var_0].vehicle_occupancy_isneutraltoteam;

        foreach ( var_5, var_3 in var_1 )
        {
            var_4 = extractplunderhelihealth( var_3.origin, var_3.angles, var_3._id_11F2F );
            level.getpubliceventchance[var_0].vehicle_occupancy_isneutraltoteam[var_5].vehicle_occupancy_isneutraltoplayer = var_4;
        }
    }
}

extractplunder( var_0, var_1 )
{
    var_0 = scripts\engine\utility::drop_to_ground( var_0, 130 );
    var_2 = scripts\mp\mp_agent::spawnnewagentaitype( "enemy_lw_br_juggernaut_x2", var_0, var_1 );

    if ( !isdefined( var_2 ) )
        return undefined;

    var_2.team = scripts\mp\gametypes\br_movingtrain_armored.gsc::run_openexfil_spawn();

    if ( isdefined( level.teamnamelist ) && !scripts\engine\utility::array_contains( level.teamnamelist, var_2.team ) )
        level.teamnamelist = scripts\engine\utility::array_add( level.teamnamelist, var_2.team );

    var_3 = getdvarint( "scr_x2_health_agent", 3000 );
    var_2.loadout_giveweaponobj = 1;
    var_2.maxhealth = var_3;
    var_2.health = var_3;
    return var_2;
}

extractplunderhelihealth( var_0, var_1, var_2 )
{
    var_3 = [];

    if ( var_2 > 1 )
    {
        var_4 = 130;
        var_5 = 360.0 / var_2;

        for ( var_6 = 0; var_6 < var_2; var_6++ )
        {
            var_7 = var_6 * var_5;
            var_8 = vectortoangles( ( cos( var_7 ), sin( var_7 ), 0 ) );
            var_9 = anglestoforward( var_8 ) * var_4;
            var_10 = var_0 + var_9;
            var_3[var_6] = extractplunder( var_10, var_1 );
        }
    }
    else
        var_3[0] = extractplunder( var_0, var_1 );

    return var_3;
}

extract_dialogue_played()
{
    level.agent_funcs["actor_enemy_lw_br_juggernaut_x2"]["on_damaged"] = scripts\mp\subway\fast_travel_subway_station::callbacksoldieragentdamaged;
    level.agent_funcs["actor_enemy_lw_br_juggernaut_x2"]["gametype_on_damage_finished"] = scripts\mp\subway\fast_travel_subway_station::callbacksoldieragentgametypedamagefinished;
    level.agent_funcs["actor_enemy_lw_br_juggernaut_x2"]["gametype_on_killed"] = scripts\mp\subway\fast_travel_subway_station::callbacksoldieragentgametypekilled;
}

registerscriptedagents()
{
    scripts\mp\mp_agent::init_agent( "mp/iw8_default_agent_definition.csv" );
    scripts\engine\scriptable::scriptable_setinitcallback( ::_id_12F60 );
}

_id_12F60()
{
    if ( !scripts\engine\utility::flag_exist( "scriptables_ready" ) )
        scripts\engine\utility::flag_init( "scriptables_ready" );

    scripts\engine\utility::flag_set( "scriptables_ready" );
}

extractupdateiconsframeend()
{
    exfil_sequence( "startOutro" );
    scripts\engine\utility::flag_set( "no_crate_spawning" );

    foreach ( var_1 in level.players )
    {
        var_1._id_1463A = 1;
        var_1 thread explosion_init();
        var_1 thread extra_bomb_explode_vfx_func( "scn_x2_bombers_intro_siren_lr", var_1, 13.5 );
    }

    level.watch_for_objective_failed = 1;
    level.playerkillstreakgetownerlookatignoreents = 0;
    level.brking_initpostmain = 1;
    level.delay_makeuseable = 0;
    level._id_133D8 = 1;
    wait 16;
    level notify( "tease_bombers" );
    extractupdateicons();
    level waittill( "strike_3" );
    wait 0.1;
    setmusicstate( "" );
    var_3 = entisvehicle();
    thread explosivemodoverride( var_3, 0 );
    level waittill( "strike_4" );
    thread equipgasmaskbr();
    expiredlootleaderinstance();
}

extractupdateicons()
{
    exfil_sequence( "startMainOutroFlow" );
    wait 5;
    thread exposed_node();
    wait 2;
    enemygunship_watchweaponimpact();
    enemygunship_watchdebuglocation();
    _id_12C06();
    thread extractthink( 3 );
    thread enter_maze_ai_combat( 17 );
}

extactioncancel()
{
    enter_numbers_debug_start( 1 );
    extra_enemies( 12, 0, 1 );
    expiredbydeath( "mp_warzone_intro_x2", 1 );
}

enemygunship_getshotgoal( var_0 )
{
    level endon( "game_ended" );

    if ( var_0 )
    {
        thread enter_combat_maze_ai();
        level waittill( "bink_complete" );
    }
    else
    {

    }

    stopcinematicforall();
    enemygunship_getfiretime( 0, 0, 1 );
}

exposed_node()
{
    level endon( "game_ended" );
    enter_numbers_debug_start( 1 );
    exitvehicle_oldturnrate( "mp_warzone_intro2_x2", 12, 1, 0, 1 );
    level notify( "bink_intro2_over" );
    enter_numbers_debug_start( 0 );
}

enter_combat_maze_ai()
{
    level endon( "game_ended" );

    foreach ( var_1 in level.players )
    {
        var_1 clearsoundsubmix( "fade_to_black_all_except_music_and_scripted3", 0.3 );
        var_1 clearsoundsubmix( "fade_to_black_all", 0.3 );
        var_1 setclientomnvar( "ui_br_bink_overlay_state", 6 );
    }

    wait 0.3;

    foreach ( var_1 in level.players )
        var_1 setclientomnvar( "ui_br_bink_overlay_state", 4 );
}

extractthink( var_0 )
{
    level endon( "game_ended" );
    wait( var_0 );
    extractunlockablechance( 0 );
    thread extraction_helicoptor_total_plunder();
    thread extracttablet_init( 22 );
}

extractunlockablechance( var_0 )
{
    level notify( "stop_planes" );
    thread extractunlockablelootid( var_0 );
    thread extractquest_unlockablelootid( entityplunderbankalldeposited(), 210, 2 );
    thread extractupdatehud( 5 );
}

enter_maze_ai_combat( var_0 )
{
    exfil_sequence( "flowExfilObjective" );
    level endon( "game_ended" );
    var_1 = getdvarfloat( "scr_x2_vision_set_fade_time", 4 );
    wait( var_0 );
    exitdriver();
    extracting( "mp_don4_outro_x2", var_1 );
    var_2 = gettime() * 0.001;
    thread extractiontime( 0, var_2 );
}

expiredlootleaderinstance()
{
    foreach ( var_1 in level.players )
    {
        var_1.deletequestcircle = 1;
        var_1 scripts\mp\laststand::playanim_aibegindismountturret( "self_revive_success", var_1 );
    }

    thread eyeoffnotehandler();
    enter_numbers_debug_start( 1 );
    enter_combat_callback( 1, 0 );
    waitframe();
    wait 4;
    extra_enemies( 12, 0, 1 );
    var_3 = expiredbydeath( "mp_warzone_x2_outro", 1 );
    var_4 = 0;

    if ( var_4 )
    {
        stopcinematicforall();
        enter_numbers_debug_start( 0 );
        enemygunship_getfiretime( 0, 0, 1 );
        level.watch_for_objective_failed = 0;
    }
    else
    {
        enter_combat_callback( 1, 0 );
        waitframe();
        stopcinematicforall();
        enemygunship_getfiretime( 0, 0, 1 );
        level.defensefactormod = 0;
        level.defend_spawn_crates = 0;
        level thread scripts\mp\gamelogic::forceend();
        level waittill( "game_cleanup" );
        wait 2;

        foreach ( var_1 in level.players )
        {
            if ( !isdefined( var_1 ) )
                continue;

            var_1 clearsoundsubmix( "fade_to_black_all", 0.5 );
        }
    }

    level.blackoverlay destroy();
}

extractquest_missionitem()
{
    var_0 = newhudelem();
    var_0.x = 0;
    var_0.y = 0;
    var_0 setshader( "black", 640, 480 );
    var_0.alignx = "left";
    var_0.aligny = "top";
    var_0.horzalign = "fullscreen";
    var_0.vertalign = "fullscreen";
    var_0.sort = -1;
    var_0.alpha = 1;
    var_0 sendcollectedclientanticheatdata( 1 );
    return var_0;
}

enemygunship_watchweaponimpact()
{
    level endon( "game_ended" );
    thread scripts\mp\gametypes\br_vehicles.gsc::deleteextantvehicles();
    enemygunship_watchtargets( ( 0, 0, 0 ) );
}

enemygunship_watchtargets( var_0 )
{
    var_1 = 250000;
    var_2 = canceljoins( undefined, undefined, var_0, var_1 );

    if ( isdefined( var_2 ) )
    {
        foreach ( var_4 in var_2 )
        {
            if ( !scripts\mp\gametypes\br_pickups.gsc::update_gamebattles_char_loc( var_4, 0 ) )
                continue;

            if ( var_4 getscriptableisreserved() && !isdefined( var_4.embassy_main ) )
                continue;

            scripts\mp\gametypes\br_pickups.gsc::_id_11A21( var_4 );
        }
    }
}

extractiontime( var_0, var_1 )
{
    level endon( "game_ended" );
    wait( var_0 );
    eomawardplayerxp();
    wait 1.8;
    extractionmethod();
    extractplayers( var_1 );
}

extractplayers( var_0 )
{
    foreach ( var_2 in level.disable_super_in_turret.onmaprestart )
    {
        var_3 = spawn( "script_model", var_2.origin );
        var_3 setmodel( "x2_military_old_recon_station" );
        var_4 = ( 0, 3, 30 );
        var_5 = spawn( "script_model", var_2.origin + var_4 );
        var_5 scripts\mp\gameobjects::sethintobject( undefined, "HINT_BUTTON", undefined, &"BR_REVEAL_X2_EVENT/SIGNAL_POSITION", undefined, "duration_none", undefined, 350, 90, 80, 90 );
        var_5 istacmapactive();
        var_5 hide();

        foreach ( var_7 in var_2._id_11E36 )
        {
            var_5 showtoplayer( var_7 );
            var_5 enableplayeruse( var_7 );
            playfx( level._effect["vfx_br_x2_exfill_beacon"], var_2.origin, undefined, undefined, var_7 );
            var_5 thread _id_14056( var_7 );
        }

        var_5 thread init_relic_no_ammo_mun( var_2.origin, 400, var_2._id_11E36, var_2._id_11F8A, var_0 );
    }
}

_id_14056( var_0 )
{
    level endon( "game_ended" );
    self endon( "death" );
    self waittillmatch( "trigger", var_0 );
    self hidefromplayer( var_0 );
    self disableplayeruse( var_0 );
    playfx( level._effect["vfx_br_x2_flare_exfill_r"], self.origin );
    var_0 scripts\cp\vehicles\vehicle_compass_cp::_id_120A4( "charm_x2" );
}

init_relic_no_ammo_mun( var_0, var_1, var_2, var_3, var_4 )
{
    level endon( "game_ended" );
    self endon( "death" );
    self waittill( "trigger", var_5 );
    var_6 = 0.0;
    var_7 = getdvarfloat( "scr_x2_strike_1", 9 );
    var_8 = getdvarfloat( "scr_x2_strike_2", 12 );
    var_9 = getdvarfloat( "scr_x2_strike_3", 10 );
    var_10 = getdvarfloat( "scr_x2_strike_4", 8 );
    var_11 = 2.5;
    var_6 = var_7 + var_8 + var_9 + var_10 + var_11;
    var_12 = gettime() * 0.001 - var_4;
    var_13 = var_6 - var_12;

    if ( var_13 <= 0 )
        var_13 = 30;

    _id_131C4( "waypoint_captureneutral_br", "neutral", "BR_REVEAL_X2_EVENT/ESTABLISHING_COMMUNICATIONS", 1 );
    var_14 = spawn( "trigger_radius", var_0, 0, int( var_1 ), int( var_1 ) );
    var_15 = scripts\mp\gametypes\obj_dom.gsc::setupobjective( var_14, undefined, undefined, 1, 0 );
    var_15.flagmodel hide();
    var_15.visibilitymanuallycontrolled = 1;
    var_15.onlyexecutefromthefront = var_2;
    var_15.getrandompointincirclewithindistance = 1;
    var_15.objidnum = var_3;
    var_15 scripts\mp\gameobjects::setcapturebehavior( "single_progress" );
    var_15 scripts\mp\gameobjects::setusetime( var_13 );
    var_15 scripts\mp\gameobjects::setclaimteam( "none" );
    var_15 scripts\mp\gameobjects::setvisibleteam( "any", undefined, 1 );
    var_15.onuseupdate = ::_id_1388C;
    var_15.usecondition = ::_id_1388D;
    var_15.onenduse = scripts\mp\gametypes\obj_dom.gsc::dompoint_onuseend;
    var_15.oncontested = scripts\mp\gametypes\obj_dom.gsc::dompoint_oncontested;
    var_15.onuncontested = scripts\mp\gametypes\obj_dom.gsc::dompoint_onuncontested;
    var_15.onunoccupied = scripts\mp\gametypes\obj_dom.gsc::dompoint_onunoccupied;
    var_15.onpinnedstate = scripts\mp\gametypes\obj_dom.gsc::dompoint_onpinnedstate;
    var_15.onunpinnedstate = scripts\mp\gametypes\obj_dom.gsc::dompoint_onunpinnedstate;
    exfil_sequence( "Objective #" + var_3 + " converted into capture objective." );
}

_id_131C4( var_0, var_1, var_2, var_3 )
{
    level.waypointcolors[var_0] = var_1;
    level.waypointbgtype[var_0] = 1;
    level.waypointstring[var_0] = var_2;
    level.waypointshader[var_0] = "ui_mp_br_mapmenu_icon_extraction_objective";
    level.waypointpulses[var_0] = var_3;
}

_id_1388D( var_0 )
{
    if ( isdefined( var_0 ) && scripts\engine\utility::array_contains( self.onlyexecutefromthefront, var_0 ) )
        return 1;

    return 0;
}

_id_1388C( var_0, var_1, var_2, var_3 )
{
    var_4 = 0.95;

    if ( var_1 > var_4 )
    {
        self.curprogress = var_4 * self.usetime;
        self.teamprogress[self.claimteam] = self.curprogress;
    }

    if ( var_1 < 1.0 && !level.gameended )
        _id_12427( var_1, var_0 );

    if ( var_1 > 0.05 && var_2 && !istrue( self.didstatusnotify ) )
        self.didstatusnotify = 1;
}

_id_12427( var_0, var_1 )
{
    if ( !isdefined( self.lastsfxplayedtime ) )
        self.lastsfxplayedtime = gettime();

    if ( self.lastsfxplayedtime + 995 < gettime() )
    {
        self.lastsfxplayedtime = gettime();
        var_2 = "";
        var_0 = int( floor( var_0 * 10 ) );
        var_2 = "mp_dom_capturing_tick_0" + var_0;
        self.visuals[0] playsoundtoteam( var_2, var_1 );
    }
}

extractionmethod()
{
    foreach ( var_1 in level.players )
    {
        if ( isalive( var_1 ) )
            var_1 scripts\mp\hud_message::showsplash( "br_x2_exfil" );
    }
}

eomawardplayerxp()
{
    foreach ( var_3, var_1 in level.disable_super_in_turret.onmaprestart )
    {
        var_2 = scripts\mp\objidpoolmanager::requestobjectiveid( 99 );
        scripts\mp\objidpoolmanager::objective_playermask_hidefromall( var_2 );
        scripts\mp\objidpoolmanager::objective_add_objective( var_2, "current", var_1.origin + ( 0, 0, 80 ), "ui_mp_br_mapmenu_icon_extraction_tablet_x2" );
        scripts\mp\objidpoolmanager::update_objective_setbackground( var_2, 1 );
        scripts\mp\objidpoolmanager::_id_11F82( var_2, var_1._id_11E36 );
        level.disable_super_in_turret.onmaprestart[var_3]._id_11F8A = var_2;
    }
}

exitdriver()
{
    enemy_vehicle_setup();
    var_0 = entityplunderlosealldeposited();
    var_1 = getdvarint( "scr_x2_exfil_points_failsafe_enable", 1 ) == 1;

    if ( var_1 )
    {
        exfil_sequence( "Failsafe is enabled." );
        var_2 = 0;
        var_3 = "";

        foreach ( var_5 in level.players )
        {
            if ( !isdefined( var_5._id_14657 ) )
            {
                var_3 = var_3 + ( var_5.name + ", " );
                var_2++;
            }
        }

        if ( isdefined( level.disable_super_in_turret.onmaprestart ) )
            exfil_sequence( "Exfil points are already assigned. Skipping assignation." );

        if ( var_2 == 0 )
            exfil_sequence( "All players have assigned points. Skipping assignation." );
        else
            exfil_sequence( "Some players (" + var_2 + ") have unassigned points : " + var_3 );

        if ( !isdefined( level.disable_super_in_turret.onmaprestart ) && var_2 > 0 )
            level.disable_super_in_turret.onmaprestart = enemy_spawnnewscrambler( var_0 );

        thread equipmentuse();
    }
    else
        level.disable_super_in_turret.onmaprestart = enemy_spawnnewscrambler( var_0 );

    exfil_retreat();
}

enemy_spawnnewscrambler( var_0 )
{
    var_1 = getdvarfloat( "scr_x2_exfil_distance", 150 );

    foreach ( var_4, var_3 in var_0 )
        var_0[var_4]._id_11E36 = [];

    foreach ( var_6 in level.players )
    {
        var_7 = undefined;
        var_8 = undefined;

        foreach ( var_4, var_3 in var_0 )
        {
            var_10 = entisalivevehicle( var_3.origin, var_6.origin );
            var_11 = abs( var_10 - var_1 );

            if ( !isdefined( var_8 ) || var_11 < var_8 )
            {
                var_7 = var_4;
                var_8 = var_11;
            }
        }

        var_0[var_7]._id_11E36[var_0[var_7]._id_11E36.size] = var_6;
        var_6._id_14657 = var_0[var_7];
    }

    exfil_sequence( "Exfil points have been assigned to all players." );

    foreach ( var_4, var_3 in var_0 )
    {
        if ( var_3._id_11E36.size == 0 )
            var_0[var_4] = undefined;
    }

    return scripts\engine\utility::array_removeundefined( var_0 );
}

exfil_retreat()
{
    foreach ( var_6, var_1 in level.disable_super_in_turret.onmaprestart )
    {
        var_2 = "Exfil Point #" + var_6 + " Players : ";

        foreach ( var_4 in var_1._id_11E36 )
        {
            var_2 = var_2 + ( var_4.name + ", " );

            if ( var_4._id_14657 != var_1 )
                exfil_sequence( "Player " + var_4.name + " assignation and exfil assignation are different!" );
        }

        exfil_sequence( var_2 );
    }
}

equipmentuse()
{
    level endon( "game_ended" );
    level endon( "stop_bomb" );
    var_0 = getdvarfloat( "scr_x2_exfil_delay_verify_visibility", 0.05 );

    for (;;)
    {
        if ( var_0 <= 0 )
            waitframe();
        else
            wait( var_0 );

        enemy_sentry_debug();
    }
}

enemy_sentry_debug()
{
    foreach ( var_1 in level.disable_super_in_turret.onmaprestart )
    {
        if ( isdefined( var_1._id_11F8A ) )
            scripts\mp\objidpoolmanager::_id_11F82( var_1._id_11F8A, scripts\engine\utility::array_removeundefined( var_1._id_11E36 ) );
    }
}

entityplunderlosealldeposited()
{
    var_0 = [];
    var_1 = entity_movingplatform_update();
    var_2 = level.br_level.br_circleradii[0];
    var_3 = getdvarfloat( "scr_x2_exfil_height", 50 );
    var_0 = scripts\mp\gametypes\br_ending.gsc::propminigamefinish( [], var_1, 1 );

    if ( level.script == "mp_br_mechanics" )
        return var_0;

    var_4 = 0;

    foreach ( var_7, var_6 in var_0 )
    {
        if ( !var_4 && distance2d( var_6.origin, var_1 ) > var_2 )
            var_4 = 1;

        if ( var_4 || var_6.origin[2] >= var_3 )
            var_0[var_7] = undefined;
    }

    return scripts\engine\utility::array_removeundefined( var_0 );
}

enemy_vehicle_setup()
{
    if ( isdefined( level.disable_super_in_turret.onmaprestart ) )
    {
        exfil_sequence( "All existing exfil objectives cancelled." );

        foreach ( var_1 in level.disable_super_in_turret.onmaprestart )
        {
            if ( isdefined( var_1._id_11F8A ) )
            {
                scripts\mp\objidpoolmanager::returnobjectiveid( var_1._id_11F8A );
                var_1._id_11F8A = undefined;
            }
        }
    }
}

enter_numbers_end()
{
    var_0 = level.squaddata;

    if ( scripts\mp\menus::brking_updateteamscore() )
        var_0 = [ level.squaddata["allies"] ];

    return var_0;
}

entisalivevehicle( var_0, var_1 )
{
    var_2 = distance2d( var_0, var_1 );
    var_3 = 0.0254 * var_2;
    return var_3;
}

extracttablet_init( var_0 )
{
    level endon( "game_ended" );
    wait( var_0 );
    var_1 = getdvarfloat( "scr_x2_bomb_duration", 60 );
    level thread _hidesafecircleui::chase( var_1 );
}

exfil_spawners_triggered( var_0 )
{
    var_1 = var_0.damage;

    if ( istrue( self.inlaststand ) && isdefined( level._id_12F8F ) && level._id_12F8F >= 3 )
    {
        var_2 = var_0.meansofdeath == "MOD_TRIGGER_HURT" && var_0.objweapon.basename == "iw8_gunless";

        if ( !var_2 || istrue( level.disable_super_in_turret.unset_ignoreall_after_notify ) )
            var_1 = 0;

        if ( var_1 >= self.health )
            var_1 = self.health - 1;
    }
    else if ( istrue( self._id_1463A ) || isdefined( level._id_12F8F ) && level._id_12F8F > 3 )
    {
        if ( var_1 >= self.health )
            var_1 = self.health - 1;
    }

    return var_1;
}

extraction_helicoptor_total_plunder()
{
    level endon( "game_ended" );
    level waittill( "bomb_started" );
    var_0 = [];
    var_0[var_0.size] = getdvarfloat( "scr_x2_strike_1", 9 );
    var_0[var_0.size] = getdvarfloat( "scr_x2_strike_2", 12 );
    var_0[var_0.size] = getdvarfloat( "scr_x2_strike_3", 10 );
    var_0[var_0.size] = getdvarfloat( "scr_x2_strike_4", 8 );
    var_1 = 10;
    extracting( "mp_don4_outro_shadow_x2", var_1 );

    foreach ( var_7, var_3 in var_0 )
    {
        if ( var_3 < 0 )
            continue;

        if ( var_7 == 2 )
            thread engagementtime( var_3 - 1.5, 4 );

        wait( var_3 );
        level._id_12F8F = var_7 + 1;

        foreach ( var_5 in level.players )
        {
            if ( isdefined( var_5 ) )
                thread exfil_objective( var_5, var_7 + 1 );
        }
    }
}

exfil_objective( var_0, var_1 )
{
    level endon( "game_ended" );
    var_0 endon( "disconnect" );
    thread exit_level( var_1, var_0 );
    wait 1;
    var_2 = anglestoforward( var_0.angles );
    var_3 = var_0.origin + var_2 * 300;
    var_4 = var_0.maxhealth / 2;
    var_5 = 0;
    var_6 = 6;
    level thread _hidesafecircleui::_id_12E21( var_3, 0, var_0 );
    wait 0.15;

    switch ( var_1 )
    {
        case 1:
            var_0 extract_ismissionweapon();
            break;
        case 3:
            scripts\mp\gametypes\br.gsc::scriptednode( var_0 );
            var_0._id_1463A = 0;
            var_4 = 9999;
            var_5 = 1;
            var_6 = 3.5;
            var_0 scripts\mp\utility\player::hidehudenable();
            var_0.littlebirdsmg = 1;
            break;
        case 4:
            var_3 = var_0.origin;
            break;
    }

    var_0 extratimeincreasecountcap( var_6, var_5, 1 );

    if ( !istrue( var_0.unset_relic_trex ) && var_1 <= 3 )
        var_0 dodamage( var_4, var_3, var_0, undefined, "MOD_EXPLOSIVE", "artillery_mp" );

    var_0._id_1463A = 1;
    level notify( "strike_" + var_1 );
}

engagementtime( var_0, var_1 )
{
    level endon( "game_ended" );
    wait( var_0 );

    foreach ( var_3 in level.players )
        var_3 scripts\common\utility::allow_mantle( 0 );

    wait( var_1 );

    foreach ( var_3 in level.players )
        var_3 scripts\common\utility::allow_mantle( 1 );
}

extract_ismissionweapon()
{
    var_0 = self.meleeweapons;

    if ( var_0.size == 0 )
        var_0 = [ "iw8_fists_mp" ];

    self takeallweapons();

    foreach ( var_2 in var_0 )
    {
        self giveweapon( var_2 );
        self assignweaponmeleeslot( var_2 );
        self switchtoweapon( var_2 );
    }
}

extratimeincreasecountcap( var_0, var_1, var_2 )
{
    var_1 = istrue( var_1 );
    var_2 = istrue( var_2 );

    if ( scripts\mp\utility\perk::_hasperk( "specialty_stun_resistance" ) )
        scripts\mp\utility\perk::removeperk( "specialty_stun_resistance" );

    scripts\mp\weapons::setplayerstunned();
    thread scripts\mp\weapons::cleanupconcussionstun( var_0 );
    scripts\cp_mp\utility\shellshock_utility::_stopshellshock();

    if ( var_2 )
    {
        if ( var_1 )
            scripts\cp_mp\utility\shellshock_utility::_shellshock( "flash_grenade_mp_x2", "bottom", var_0, 1 );
        else
            scripts\cp_mp\utility\shellshock_utility::_shellshock( "mp_don4_x2_explosion_outro", "bottom", var_0, 1 );
    }
    else
        scripts\cp_mp\utility\shellshock_utility::_shellshock( "mp_don4_x2_explosion", "bottom", var_0, 1 );
}

extractunlockablelootid( var_0 )
{
    level endon( "game_ended" );
    level endon( "stop_planes" );
    var_1 = getdvarint( "scr_x2_planes_enable", 1 );

    if ( var_1 <= 0 )
        return;

    if ( !isdefined( level.disable_super_in_turret._id_123AC ) )
        level.disable_super_in_turret._id_123AC = 0;

    foreach ( var_3 in level.players )
        var_3 setclienttriggeraudiozonepartialwithfade( "br_x2_bombers_attack", 3, "reverb", "mix", "filter", "ambient" );

    var_5 = getdvarfloat( "scr_x2_planes_delay", 5.5 );
    var_6 = 0;

    for (;;)
    {
        thread extractlocale_onentergulag( entityplunderbankalldeposited(), var_6 );
        var_6++;
        wait( var_5 );
    }
}

extractlocale_onentergulag( var_0, var_1 )
{
    level endon( "game_ended" );
    level endon( "stop_planes" );
    var_2 = 300;
    var_0 = ( var_0[0] + -10000, var_0[1] + -8000, -6000 );
    var_3 = vectortoangles( ( cos( var_2 ), sin( var_2 ), 0 ) );
    var_4 = scripts\engine\utility::spawn_tag_origin( var_0, var_3 );
    var_5 = [];
    var_6 = [ "plane3", "plane4", "plane5" ];

    if ( istrue( level.disable_super_in_turret.unset_ignoreall_after_notify ) )
        var_6 = [ "plane3" ];

    foreach ( var_10, var_8 in var_6 )
    {
        var_9 = extractlocale_islocaleavailable( ( 0, 0, 0 ) );
        var_9.animname = var_8;
        var_9 useanimtree( level.scr_animtree[var_8] );
        var_9 unmarkkeyframedmover( 1 );
        var_5[var_10] = var_9;
    }

    thread enemy_traversal_management( var_4, var_5, var_1 );
    var_4 scripts\common\anim::anim_single( var_5, "x2_plane", undefined, 17 );
    level notify( "end_wave_" + var_1 );
}

enemy_traversal_management( var_0, var_1, var_2 )
{
    level endon( "game_ended" );
    var_3 = var_1.size + 1;
    level.disable_super_in_turret._id_123AC = level.disable_super_in_turret._id_123AC + var_3;
    level scripts\engine\utility::_id_143AD( "stop_planes", "end_wave_" + var_2 );

    foreach ( var_5 in var_1 )
        var_5 delete();

    var_0 delete();
    level.disable_super_in_turret._id_123AC = level.disable_super_in_turret._id_123AC - var_3;
}

extractlocale_onrespawn( var_0 )
{
    level notify( "stop_planes" );

    if ( !isdefined( level.disable_super_in_turret._id_123AC ) )
        level.disable_super_in_turret._id_123AC = 0;

    var_1 = ( -50000, -15000, 0 );
    var_2 = ( 12000, 0, 0 );
    var_3 = 6;

    for ( var_4 = 0; var_4 < var_3; var_4++ )
    {
        var_5 = var_0 + var_1 + var_4 * var_2;
        thread extractlocale_onentergulag( var_5, var_4 );
    }
}

extractlocale_islocaleavailable( var_0 )
{
    var_1 = spawn( "script_model", var_0 );
    var_1 setmodel( "veh8_mil_air_ca_ger_bomber_117_group_ultralow" );
    var_1.angles = ( 0, 0, 0 );
    return var_1;
}

entityplunderbankalldeposited()
{
    var_0 = scripts\engine\utility::array_removeundefined( level.players );
    return scripts\mp\gametypes\br_ending.gsc::get_center_of_array( var_0 );
}

extractupdatehud( var_0 )
{
    level endon( "game_ended" );
    level endon( "stop_planes" );
    var_1 = getdvarint( "scr_x2_shadows_enable", 1 );

    if ( var_1 <= 0 )
        return;

    wait( var_0 );
    setdvar( "NPONLLLSPL", 0.8 );
    setdvar( "LSNRQTOKRR", 1 );
    setdvar( "NTLKNLNPLK", 2 );
    level.disable_super_in_turret._id_119DC = [];
    thread equipname();
    var_2 = 210;
    var_3 = ( cos( var_2 + 90 ), sin( var_2 + 90 ), 0 );
    var_4 = var_3 * 6500;

    for (;;)
    {
        var_5 = entityplunderbankalldeposited();
        thread extractquest_alwaysallowdeposit( var_5, var_2 );
        thread extractquest_alwaysallowdeposit( var_5 + var_4, var_2 );
        thread extractquest_alwaysallowdeposit( var_5 - var_4, var_2 );
        wait 25;
    }
}

equipname()
{
    level endon( "game_ended" );
    level waittill( "stop_planes" );
    enemygunship_watchplanedistance();
}

enemygunship_watchplanedistance()
{
    if ( isdefined( level.disable_super_in_turret._id_1374A ) )
        level.disable_super_in_turret._id_1374A delete();

    level.disable_super_in_turret._id_1374A = undefined;

    if ( isdefined( level.disable_super_in_turret._id_119DC ) )
    {
        for ( var_0 = 0; var_0 < level.disable_super_in_turret._id_119DC.size; var_0++ )
        {
            var_1 = level.disable_super_in_turret._id_119DC[var_0];

            if ( isdefined( var_1 ) )
                var_1 delete();
        }
    }

    level.disable_super_in_turret._id_119DC = [];
}

extractquest_alwaysallowdeposit( var_0, var_1 )
{
    level endon( "game_ended" );
    var_2 = extractquest_missionweapon( var_0, var_1, "vfx_br_x2_plane_shadow_multiple" );

    for ( var_3 = 0; var_3 <= level.disable_super_in_turret._id_119DC.size; var_3++ )
    {
        if ( !isdefined( level.disable_super_in_turret._id_119DC[var_3] ) )
        {
            level.disable_super_in_turret._id_119DC[var_3] = var_2;
            break;
        }
    }

    wait 40;

    if ( isdefined( var_2 ) )
        var_2 delete();
}

extractquest_unlockablelootid( var_0, var_1, var_2 )
{
    level endon( "game_ended" );
    level endon( "stop_planes" );
    wait( var_2 );
    var_3 = extractquest_missionweapon( var_0, var_1, "vfx_br_x2_square_shadow" );

    if ( isdefined( level.disable_super_in_turret._id_1374A ) )
        level.disable_super_in_turret._id_1374A delete();

    level.disable_super_in_turret._id_1374A = var_3;
    wait 120;

    if ( isdefined( var_3 ) )
        var_3 delete();
}

extractquest_missionweapon( var_0, var_1, var_2 )
{
    var_0 = ( var_0[0], var_0[1], 2000 );
    var_3 = vectortoangles( ( cos( var_1 ), sin( var_1 ), 0 ) );
    var_4 = spawn( "script_model", var_0 );
    var_4 setmodel( var_2 );
    var_4.angles = var_3;
    return var_4;
}

exitvehicle_oldturnrate( var_0, var_1, var_2, var_3, var_4 )
{
    level endon( "game_ended" );
    extra_enemies( var_1, var_2, var_3 );
    expiredbydeath( var_0, var_4 );
    stopcinematicforall();
    enemygunship_getfiretime( 0, var_2, var_3 );
}

extra_enemies( var_0, var_1, var_2 )
{
    foreach ( var_4 in level.players )
    {
        if ( !isdefined( var_4 ) )
            continue;

        var_4 setclientomnvar( "ui_br_bink_overlay_state", var_0 );

        if ( var_1 )
            var_4 setsoundsubmix( "fade_to_black_all_except_music_and_scripted3", 0.5 );

        if ( var_2 )
            var_4 setsoundsubmix( "fade_to_black_all", 0.5 );
    }
}

enemygunship_getfiretime( var_0, var_1, var_2 )
{
    foreach ( var_4 in level.players )
    {
        if ( !isdefined( var_4 ) )
            continue;

        if ( var_1 )
            var_4 clearsoundsubmix( "fade_to_black_all_except_music_and_scripted3", 0.5 );

        if ( var_2 )
            var_4 clearsoundsubmix( "fade_to_black_all", 0.5 );

        var_4 setclientomnvar( "ui_br_bink_overlay_state", var_0 );
    }
}

exfil_spots_objs_settings( var_0, var_1 )
{
    if ( var_0 == "bink_complete" )
        level notify( "bink_complete" );
}

expirationtimer( var_0, var_1 )
{
    level notify( "bink_start" );
    playcinematicforall( var_0, 1, var_1 );
}

expiredbydeath( var_0, var_1 )
{
    var_2 = 0;
    var_3 = 0;
    var_4 = getdvarint( "scr_x2_max_attempt_binks", 1 );

    if ( var_4 < 1 )
        var_4 = 1;

    while ( !var_3 && var_2 < var_4 )
    {
        expirationtimer( var_0, var_1 );

        if ( var_2 == 0 )
        {
            switch ( var_0 )
            {
                case "mp_warzone_x2_outro":
                    waitframe();
                    enter_combat_callback( 0, 0 );
                    level.blackoverlay = extractquest_missionitem();
                    break;
            }
        }

        var_5 = scripts\engine\utility::_id_143BF( 3, "bink_complete" );
        var_3 = var_5 == "timeout";

        if ( !var_3 )
            exfil_sequence( "Failed to play bink '" + var_0 + "', attempt #" + ( var_2 + 1 ) + ", waittill return value is " + var_5 );

        var_2++;

        if ( !var_3 && var_2 < var_4 )
        {
            stopcinematicforall();
            enemygunship_getfiretime( 0, 0, 0 );
            waitframe();
            extra_enemies( 12, 0, 0 );
        }
    }

    if ( var_0 == "mp_warzone_intro_x2" )
        level thread enemygunship_watchdamage();

    if ( var_3 )
    {
        switch ( var_0 )
        {
            case "mp_warzone_intro_x2":
                wait 19;
                enter_numbers_debug_start( 0 );
                thread enemygunship_getshotgoal( var_3 );
                break;
            case "mp_warzone_x2_outro":
            case "mp_warzone_intro2_x2":
                wait 7.5;

                foreach ( var_7 in level.players )
                    var_7 setclientomnvar( "ui_br_bink_overlay_state", 10 );

                break;
        }

        level waittill( "bink_complete" );
    }
    else
    {
        switch ( var_0 )
        {
            case "mp_warzone_intro_x2":
                stopcinematicforall();
                enter_numbers_debug_start( 0 );
                enemygunship_getfiretime( 0, 0, 1 );
                break;
        }
    }

    return var_3;
}

enemygunship_watchdamage()
{
    wait 16;
    scripts\mp\gametypes\br_movingtrain.gsc::tr_findvehicle( 1 );
}

enter_combat_callback( var_0, var_1 )
{
    foreach ( var_3 in level.players )
        thread scripts\cp_mp\utility\game_utility::fadetoblackforplayer( var_3, var_0, var_1 );

    if ( var_1 > 0 )
        wait( var_1 );
}

enter_numbers_debug_start( var_0, var_1 )
{
    foreach ( var_3 in level.players )
        var_3 scripts\mp\utility\player::_freezecontrols( var_0, var_1 );
}

equip_trophies()
{
    level endon( "game_ended" );

    foreach ( var_1 in level.players )
    {
        if ( !isdefined( var_1 ) )
            continue;

        var_1 scripts\cp\vehicles\vehicle_compass_cp::_id_120A4( "emblem_1_x2" );
    }
}

equipgasmaskbr()
{
    foreach ( var_1 in level.players )
    {
        if ( !isdefined( var_1 ) )
            continue;

        var_1 scripts\cp\vehicles\vehicle_compass_cp::_id_120A4( "rpd_blueprint" );
    }
}

equipprimarypickup( var_0, var_1 )
{
    if ( var_0 scripts\cp_mp\vehicles\vehicle::isvehicle() )
        var_0 = var_0.owner;

    if ( !isdefined( var_0 ) || !isplayer( var_0 ) )
        return;

    if ( !isdefined( var_0._id_14656 ) )
        var_0 exclude_me();

    var_0._id_14656["train"] = var_0._id_14656["train"] + var_1;

    for ( var_2 = scripts\mp\gametypes\br_public.gsc::round_enemy_stuck_logic( var_0.team, var_0.squadindex ); var_0._id_14656["train"] > 1000; var_0._id_14656["train"] = var_0._id_14656["train"] - 1000 )
    {
        var_0 thread scripts\mp\utility\points::giveunifiedpoints( "br_x2_train_damage" );
        extractgroundpos( var_0, var_2, level.ent_delete_by_targetname );
    }
}

equipsecondarypickup( var_0, var_1 )
{
    if ( var_0 scripts\cp_mp\vehicles\vehicle::isvehicle() )
        var_0 = var_0.owner;

    if ( !isdefined( var_0 ) || !isplayer( var_0 ) )
        return;

    var_2 = var_0 getxuid();

    if ( !isdefined( var_0._id_14656 ) )
        var_0 exclude_me();

    var_0._id_14656["turret"] = var_0._id_14656["turret"] + var_1;

    for ( var_3 = scripts\mp\gametypes\br_public.gsc::round_enemy_stuck_logic( var_0.team, var_0.squadindex ); var_0._id_14656["turret"] > 500; var_0._id_14656["turret"] = var_0._id_14656["turret"] - 500 )
    {
        var_0 thread scripts\mp\utility\points::giveunifiedpoints( "br_x2_turret_damage" );
        extractgroundpos( var_0, var_3, level.ent_model );
    }

    if ( self.health <= 0 )
    {
        foreach ( var_5 in level.players )
            var_5 thread scripts\mp\utility\points::giveunifiedpoints( "br_x2_turret_disabled" );
    }
}

extractgroundpos( var_0, var_1, var_2 )
{
    foreach ( var_4 in var_1 )
    {
        if ( !isdefined( var_4 ) )
            continue;

        if ( var_4 == var_0 )
            continue;

        if ( enemy_waittill_seen( var_4 ) )
        {
            var_4 thread scripts\mp\utility\points::giveunifiedpoints( "br_x2_driver_assist" );
            scripts\mp\gametypes\br_movingtrain_armored.gsc::_id_13FCF( var_4, 105 );
        }
    }
}

enemy_waittill_seen( var_0 )
{
    if ( var_0 scripts\cp_mp\utility\player_utility::isinvehicle() )
    {
        var_1 = var_0 scripts\cp_mp\utility\player_utility::getvehicle();

        if ( !isdefined( var_1 ) )
            return 0;

        var_2 = scripts\cp_mp\vehicles\vehicle_occupancy::vehicle_occupancy_getdriver( var_1, 1 );

        if ( isdefined( var_2 ) && var_2 == var_0 )
        {
            var_3 = scripts\cp_mp\vehicles\vehicle_occupancy::vehicle_occupancy_getalloccupants( var_1, 1 );

            if ( isdefined( var_3 ) && var_3.size > 1 )
                return 1;

            var_4 = scripts\mp\utility\player::getplayersinradius( var_1.origin, 200 );

            foreach ( var_6 in var_4 )
            {
                if ( !isdefined( var_6 ) )
                    continue;

                if ( var_6 == var_0 )
                    continue;

                var_7 = var_6 getgroundentity();

                if ( isdefined( var_7 ) && var_7 == var_1 )
                    return 1;
            }
        }
    }

    return 0;
}

escort_vehicle_push_volume()
{
    level endon( "game_ended" );
    scripts\mp\flags::gameflagwait( "prematch_done" );

    foreach ( var_1 in level.players )
        var_1 exclude_me();
}

exclude_me()
{
    self._id_14656 = [];
    self._id_14656["train"] = 0;
    self._id_14656["turret"] = 0;
}

excludedteams()
{
    level endon( "game_ended" );
    scripts\mp\flags::gameflagwait( "prematch_done" );

    foreach ( var_1 in level.players )
        var_1 scripts\mp\utility\perk::giveperk( "specialty_surveillance" );
}

extractquest_helipadid()
{
    level endon( "game_ended" );
    self.itemsdropped = 0;
    var_0 = [ [ "brloot_weapon_lm_t9accurate_lege", 5 ], [ "brloot_super_munitionsbox", 10 ], [ "brloot_weapon_lm_t9light_lege", 5 ], [ "brloot_ammo_762", 15 ], [ "brloot_weapon_lm_t9accurate_lege", 5 ], [ "brloot_ammo_rocket", 15 ], [ "brloot_weapon_lm_t9light_lege", 5 ] ];
    var_1 = spawnstruct();
    var_1.origin = self.origin;
    var_1.angles = self.angles;
    var_1.dropstruct = scripts\mp\gametypes\br_pickups.gsc::test_ai_anim();
    var_1.dropstruct.ml_p3_to_safehouse_transition = 250;
    var_1.dropstruct.silencer_pick_up_monitor = 150;
    var_2 = self.angles + ( 0, 45, 0 );

    foreach ( var_4 in var_0 )
    {
        var_5 = var_4[0];
        var_6 = var_4[1];

        if ( scripts\mp\gametypes\br_lootcache.gsc::get_bonus_targets( var_5 ) )
        {
            for ( var_7 = 0; var_7 < var_6; var_7++ )
            {
                var_8 = scripts\mp\gametypes\br_lootcache.gsc::_id_11A41( var_5, var_1.dropstruct, self.origin + ( 0, 0, var_1.dropstruct.silencer_pick_up_monitor ), var_2, 0, 0 );
                var_1.dropstruct.silencer_pick_up_monitor = var_1.dropstruct.silencer_pick_up_monitor + 3;
                self.itemsdropped++;
                waitframe();
            }
        }
    }
}

exfil_spawning_logic()
{
    level endon( "game_ended" );
    level waittill( "bink_complete" );
    setmusicstate( "mx_train_approach_1" );
    level waittill( "activateMortar" );
    setmusicstate( "" );
    level waittill( "finishtrain_splash" );
    setmusicstate( "mx_train_critical" );
    level waittill( "train_destroyed" );
    setmusicstate( "" );
    level waittill( "bink_start" );
    setmusicstate( "mx_plane_outro_cine" );
}

explode_fx()
{
    self endon( "disconnect" );
    self waittill( "infil_jump_done" );
    thread expiredlootleaderenabled( "mode_desc1", 0, 1 );
    thread expiredlootleaderenabled( "mode_desc2", 0, 1 );
    thread expiredlootleaderenabled( "mode_desc3", 0, 1 );
    thread explosionspots();
    thread explosive_barrel();
    self endon( "bomb_used" );

    while ( !self isonground() )
        waitframe();

    thread expiredlootleaderenabled( "objective1_desc", 1, 1 );
}

explosive_barrel()
{
    level endon( "game_ended" );
    self endon( "disconnect" );
    level endon( "train_destroyed" );
    level waittill( "car_vulnerable" );
    scripts\mp\hud_message::showsplash( "br_x2_train_stopped" );
    thread expiredlootleaderenabled( "car_vulnerable", 1, 1 );
    wait 10;

    while ( level._id_145F1._id_13CCA < 12 )
    {
        level waittill( "train_part_destroyed" );

        switch ( level._id_145F1._id_13CCA )
        {
            case 6:
                thread expiredlootleaderenabled( "destroy_part6", 1.5, 1 );
                break;
            case 11:
                thread expiredlootleaderenabled( "destroy_part11", 1.5, 1 );
                break;
            default:
                break;
        }
    }

    for (;;)
    {
        level waittill( "car_destroyed" );

        if ( level._id_14635 == 7 )
            thread expiredlootleaderenabled( "destroy_car7", 1.5, 1 );
    }
}

explosionspots()
{
    level endon( "game_ended" );
    self endon( "disconnect" );
    level endon( "train_destroyed" );

    for (;;)
    {
        level waittill( "train_incoming" );

        switch ( level.initextractionlocations )
        {
            case 1:
                thread expiredlootleaderenabled( "train_incoming1", 3, 1 );
                level waittill( "train_braking" );
                thread expiredlootleaderenabled( "train_stopped1", 1, 1 );
                break;
            case 2:
                if ( istrue( level._id_13396 ) )
                    thread expiredlootleaderenabled( "train_incoming2", 1, 1 );

                break;
            default:
                break;
        }
    }
}

explosion_init()
{
    level endon( "game_ended" );
    self endon( "disconnect" );
    thread expiredlootleaderenabled( "outro_victory", 5.5, 1 );
    level waittill( "tease_bombers" );
    thread expiredlootleaderenabled( "outro_bombers_tease", 1, 0 );
    level waittill( "bink_intro2_over" );
    thread expiredlootleaderenabled( "outro_bombers", 3, 0 );
    level waittill( "strike_1" );
    thread expiredlootleaderenabled( "outro_exfil_coming", 0.5, 0 );
    var_0 = self._id_14657;
    var_1 = distance( var_0.origin, self.origin );

    if ( var_1 >= 2700 )
        thread expiredlootleaderenabled( "outro_keep_running", 8, 0 );

    level waittill( "strike_2" );
    thread expiredlootleaderenabled( "outro_exfil_almost_over", 5.5, 0 );
}

expiredlootleaderenabled( var_0, var_1, var_2 )
{
    level endon( "game_ended" );
    self endon( "disconnect" );

    if ( isdefined( var_1 ) && var_1 > 0 )
        wait( var_1 );

    if ( isdefined( var_2 ) && var_2 == 1 )
        scripts\mp\gametypes\br_public.gsc::dmztut_endgamewithreward( var_0, self, 0 );
    else
    {
        var_3 = lookupsoundlength( game["dialog"][var_0], 1 ) / 1000.0;
        self queuedialogforplayer( game["dialog"][var_0], var_0, var_3 );
    }
}

extendcirclelist()
{
    level endon( "game_ended" );
    level waittill( "drop_resuply" );
    var_0 = randomint( 2 );
    var_1 = "resuply_drop" + var_0;

    foreach ( var_3 in level.players )
        var_3 thread expiredlootleaderenabled( var_1, 0, 1 );
}

entisvehicle()
{
    var_0 = undefined;

    if ( level.script == "mp_don4" )
    {
        var_0 = spawnstruct();
        var_0.origin = ( 4555.72, -36115.3, -200.848 );
        var_0.angles = ( 0, -156.66, 0 );
        var_1 = getdvarfloat( "scr_x2_exfil_x_offset", 1000 );
        var_2 = getdvarfloat( "scr_x2_exfil_y_offset", 600 );
        var_0.origin = var_0.origin + ( var_1, var_2, 0 );
    }
    else
    {
        if ( !isdefined( level.disable_super_in_turret.onmaprestart ) )
            exitdriver();

        var_0 = level.disable_super_in_turret.onmaprestart[0];
    }

    var_3 = getdvarfloat( "scr_x2_exfil_angle", -60 );
    var_0.angles = ( 0, var_3, 0 );
    return var_0;
}

explosivemodoverride( var_0, var_1 )
{
    level endon( "game_ended" );
    level.disable_super_in_turret.unset_ignoreall_after_notify = 1;
    thread extra_glow_sticks_init( var_0 );
    level.disable_super_in_turret.onlineprimaryoverride = [];
    var_2 = scripts\engine\utility::spawn_tag_origin( var_0.origin, var_0.angles );
    scripts\engine\utility::exploder( "x2_se_juggernaut" );
    var_3 = 1;

    while ( var_3 )
    {
        var_3 = getdvarint( "scr_x2_exfil_loop", 0 ) > 0;
        level.disable_super_in_turret.update_game_cyber = var_3;

        foreach ( var_5 in level.players )
        {
            if ( !isdefined( var_5 ) )
                continue;

            var_5 thread extactionstart( var_2 );
            var_5 thread enemy_spawners();
            var_5 setclientdvar( "LTMOQONPQ", 1 );
            var_5 setclientdvar( "QTSPTNLOL", 90 );
        }

        scripts\engine\utility::_id_143BF( 10, "strike_4" );
        level notify( "stop_bomb" );
        enter_combat_callback( 1, 0 );
        waitframe();

        foreach ( var_5 in level.players )
        {
            var_5 setclientdvar( "LTMOQONPQ", 0 );
            var_5 setclientdvar( "QTSPTNLOL", 65 );
        }
    }

    level.disable_super_in_turret.unset_ignoreall_after_notify = 0;
    scripts\engine\utility::kill_exploder( "x2_se_juggernaut" );

    foreach ( var_5 in level.players )
    {
        var_5 scripts\mp\utility\player::hidehuddisable();
        var_5 playershow();
        var_5 clearclienttriggeraudiozone( 0 );
    }

    if ( var_1 )
    {
        wait 2;
        enter_combat_callback( 0, 0 );

        foreach ( var_5 in level.players )
        {
            var_5 scripts\mp\utility\player::_freezecontrols( 0 );
            var_5 clearsoundsubmix( "fade_to_black_all_except_music_and_scripted3", 0.5 );
            var_5 clearsoundsubmix( "fade_to_black_all", 0.5 );
        }
    }

    level notify( "stop_planes" );
}

extra_glow_sticks_init( var_0 )
{
    level endon( "game_ended" );
    var_1 = 0;

    foreach ( var_3 in level.players )
    {
        if ( !var_1 )
            var_3 scripts\mp\utility\player::_freezecontrols( 1 );

        var_3 clearsoundsubmix( "deaths_door_mp", 0.3 );
        var_3 setorigin( var_0.origin );
        var_3 scripts\mp\utility\player::hidehudenable();
        var_3 playerhide();
    }

    extracting( "mp_don4_exfil_x2", 0 );
    extractlocale_onrespawn( var_0.origin );
    _hidesafecircleui::_id_13B3F( 1100 );
}

extractmissionhelipadmodel( var_0 )
{
    for ( var_1 = 1; var_1 <= 3; var_1++ )
    {
        var_2 = "guy" + var_1;
        var_3 = extractposition( ( 0, 0, 0 ), ( 0, 0, 0 ) );
        explosive_cars( var_0, var_3, var_2 );
        level.disable_super_in_turret.onlineprimaryoverride[var_2] = var_3;
    }

    var_4 = extractquest_removequestinstance( ( 0, 0, 0 ), ( 0, 0, 0 ) );
    explosive_cars( var_0, var_4, "guy4" );
    level.disable_super_in_turret.onlineprimaryoverride["guy4"] = var_4;
}

explosive_cars( var_0, var_1, var_2 )
{
    var_1.animname = var_2;
    var_1 useanimtree( level.scr_animtree[var_2] );
    var_0 thread scripts\common\anim::anim_single_solo( var_1, "x2_exfil" );

    if ( isdefined( var_1.headmodel ) )
        var_1.headmodel scriptmodelplayanim( level.scr_animname[var_2]["x2_exfil_mute"] );

    if ( isdefined( var_1._id_14595 ) )
        var_1._id_14595 scriptmodelplayanim( level.scr_animname[var_2]["x2_exfil_mute"] );
}

extactionstart( var_0 )
{
    level endon( "game_ended" );
    var_1 = spawn( "script_arms", ( 0, 0, 0 ), 0, 0, self );
    var_1.angles = ( 0, 0, 0 );
    var_1 useanimtree( #animtree );
    var_1 hide();
    var_1 showtoplayer( self );
    self._id_12651 = var_1;
    var_2 = 0;

    if ( !var_2 )
        self cameralinkto( var_1, "tag_camera", 1, 1 );

    var_1 animscripted( "exfil", var_0.origin, var_0.angles, %br_exfil_x2_player );
    var_1 scriptmodelplayanim( "br_exfil_x2_player" );
    var_1 waittillmatch( "exfil", "end" );
    self cameraunlink();
    self stopanimscriptsceneevent();
    self._id_12651 = undefined;
    var_1 delete();
}

enemygunship_watchexfilsequencestart()
{
    var_0 = [ "guy1", "guy2", "guy3", "guy4" ];

    foreach ( var_2 in var_0 )
    {
        var_3 = level.disable_super_in_turret.onlineprimaryoverride[var_2];

        if ( isdefined( var_3 ) )
        {
            if ( isdefined( var_3.headmodel ) )
                var_3.headmodel delete();

            if ( isdefined( var_3._id_14595 ) )
                var_3._id_14595 delete();

            var_3 delete();
        }
    }
}

extractquest_removequestinstance( var_0, var_1 )
{
    return extractlocale_removelocaleinstance( var_0, var_1, "body_mp_western_fireteam_west_ar_1_1", "head_mp_western_fireteam_west_ar_1_1", undefined );
}

extractposition( var_0, var_1 )
{
    return extractlocale_removelocaleinstance( var_0, var_1, "body_opforce_juggernaut_x2", "head_opforce_juggernaut_x2", "weapon_wm_lm_dblmg_juggernaut" );
}

extractlocale_removelocaleinstance( var_0, var_1, var_2, var_3, var_4 )
{
    var_5 = spawn( "script_model", var_0 );
    var_5 setmodel( var_2 );
    var_5.angles = var_1;

    if ( isdefined( var_3 ) )
    {
        var_6 = spawn( "script_model", var_0 );
        var_6 setmodel( var_3 );
        var_6 linkto( var_5, "j_spine4", ( 0, 0, 0 ), ( 0, 0, 0 ) );
        var_5.headmodel = var_6;
    }

    if ( isdefined( var_4 ) )
    {
        var_7 = spawn( "script_model", var_0 );
        var_7 setmodel( var_4 );
        var_7 linkto( var_5, "j_gun", ( 0, 0, 0 ), ( 0, 0, 0 ) );
        var_5._id_14595 = var_7;
    }

    return var_5;
}

enemy_spawners()
{
    level endon( "game_ended" );
    self endon( "disconnect" );
    self setblurforplayer( 5, 0 );
    wait 0.5;
    self setblurforplayer( 0, 2 );
    wait 2;
    self setblurforplayer( 5, 0.5 );
    wait 0.5;
    self setblurforplayer( 0, 0.5 );
    wait 2;
    self setblurforplayer( 6, 0.5 );
    wait 0.5;
    self setblurforplayer( 0, 0.5 );
    wait 2;
    self setblurforplayer( 7, 0.5 );
    wait 0.5;
    self setblurforplayer( 0, 1 );
}

enemy_validate_node_proximity( var_0, var_1 )
{
    level endon( "game_ended" );
    var_2 = spawnstruct();
    var_2.streakname = "precision_airstrike";
    var_2.owner = level.players[0];
    var_2.score = 0;
    var_2.shots_fired = 0;
    var_2.hits = 0;
    var_2.damage = 0;
    var_2.kills = 0;
    var_2.setuptimelimit = 1;
    var_2.brmini_ontimelimit = 0;
    var_2.burst_fire_turret = 0.65;
    var_2.animname = %mp_alfa10_flyin;
    var_2._id_1360D = 1;
    var_2._id_12186 = 1;
    var_3 = undefined;
    var_4 = undefined;
    var_5 = 24000;
    var_6 = 6500;
    var_7 = 950;
    var_8 = 1500;
    var_9 = 215;
    var_10 = ( 0, var_1, 0 );
    var_11 = undefined;
    var_12 = scripts\cp_mp\killstreaks\airstrike::getflightpath( var_0, var_10, var_5, 1, var_7, var_6, var_8, var_2.streakname, var_11 );
    var_13 = [];
    var_13[var_13.size] = ( 0, 0, 0 );
    var_13[var_13.size] = ( var_9, var_9, 0 );
    var_13[var_13.size] = ( -1 * var_9, -1 * var_9, 0 );
    var_13[var_13.size] = ( 2 * var_9, 2 * var_9, 0 );
    var_13[var_13.size] = ( -2 * var_9, -2 * var_9, 0 );

    foreach ( var_16, var_15 in var_13 )
        var_13[var_16] = var_0 + _id_12D9D( var_15, var_1 );

    level thread scripts\cp_mp\killstreaks\airstrike::doplanestrike( var_13[0], var_12["startPoint"], var_12["endPoint"], var_7, var_3, var_2, var_2.animname, var_2.owner, var_4 );
    wait 0.1;
    level thread scripts\cp_mp\killstreaks\airstrike::doplanestrike( var_13[1], var_12["startPoint"], var_12["endPoint"], var_7, var_3, var_2, var_2.animname, var_2.owner, var_4 );
    level thread scripts\cp_mp\killstreaks\airstrike::doplanestrike( var_13[2], var_12["startPoint"], var_12["endPoint"], var_7, var_3, var_2, var_2.animname, var_2.owner, var_4 );
    wait 0.1;
    var_2._id_1360D = 0;
    level thread scripts\cp_mp\killstreaks\airstrike::doplanestrike( var_13[3], var_12["startPoint"], var_12["endPoint"], var_7, var_3, var_2, var_2.animname, var_2.owner, var_4 );
    level thread scripts\cp_mp\killstreaks\airstrike::doplanestrike( var_13[4], var_12["startPoint"], var_12["endPoint"], var_7, var_3, var_2, var_2.animname, var_2.owner, var_4 );
}

extra_collision()
{
    if ( isdefined( self.streakinfo.burst_fire_turret ) && isdefined( self.streakinfo.animname ) )
        self setanimrate( self.streakinfo.animname, self.streakinfo.burst_fire_turret );
}

escape_if_player_is_in_hangar( var_0, var_1, var_2, var_3, var_4 )
{
    var_0 endon( "death" );

    if ( !istrue( var_0.streakinfo._id_1360D ) )
        return;

    if ( isdefined( var_0.streakinfo.burst_fire_turret ) )
        var_1 = ( var_1 + 1.25 ) / var_0.streakinfo.burst_fire_turret;
    else
        var_1 = var_1;

    var_5 = var_0.flightdir;
    var_0.bulletpoint setmodel( "ks_airstrike_target_mp_x2" );
    scripts\cp_mp\hostmigration::hostmigration_waitlongdurationwithpause( var_1 );
    var_6 = 5;
    var_7 = ( 0, 0, 0 );
    var_8 = var_7;
    var_0.bulletpoint setscriptablepartstate( "bullet_impact", "on", 0 );
    var_9 = 0;
    var_10 = 0;
    var_11 = [ var_3 - var_5 * 512, var_3 - var_5 * 256, var_3, var_3 + var_5 * 256, var_3 + var_5 * 512 ];
    var_12 = var_3[2] + var_0.flightheight * 3;

    for ( var_13 = 0; var_13 < var_6; var_13++ )
    {
        var_14 = -50;
        var_15 = 150;

        while ( var_9 < var_10 + 4 )
        {
            var_16 = scripts\cp_mp\killstreaks\airstrike::callstrike_getrandomshotoffset( var_14, var_15, var_11[var_13], var_0.angles );
            var_17 = var_0 gettagorigin( "tag_turret_fx" ) * ( 1, 1, 0 ) + ( 0, 0, var_12 ) + var_5 * 1000;
            var_18 = vectornormalize( var_16 - var_17 );
            var_19 = var_16 + var_18 * 30000;
            var_20 = scripts\engine\trace::ray_trace( var_17, var_19, undefined, scripts\engine\trace::create_contents( 0, 1, 0, 1, 0, 1, 0 ) );
            var_21 = var_20["position"];
            var_22 = var_20["normal"];
            var_23 = var_21 + var_22 * 10;
            var_24 = vectornormalize( var_21 - var_0 gettagorigin( "tag_turret_fx" ) );
            var_25 = vectorcross( var_24, ( 0, 0, 1 ) );
            var_26 = vectorcross( var_25, var_24 );
            var_0 thread scripts\cp_mp\killstreaks\airstrike::callstrike_playmultitracerfx( scripts\engine\utility::getfx( "airstrike_tracer" ), var_23, var_24, var_26 );
            var_0.bulletpoint thread scripts\cp_mp\killstreaks\airstrike::moveanddamagepoint( var_9 + 1, var_23 );
            var_8 = var_21;
            var_9++;
            var_0.bulletpoint.streakinfo.shots_fired++;
            var_14 = var_14 + 20;
            var_15 = var_15 + 40;
            var_12 = var_12 - 200;

            if ( var_12 < var_0.flightheight )
                var_12 = var_0.flightheight;

            wait 0.05;
        }

        var_10 = var_9;
    }

    var_0 notify( "fire_finished" );
    var_0.bulletpoint setscriptablepartstate( "bullet_impact", "off", 0 );
}

exit_open( var_0, var_1, var_2, var_3, var_4, var_5, var_6 )
{
    var_0 endon( "death" );
    level endon( "game_ended" );
    var_0 thread scripts\cp_mp\killstreaks\airstrike::airstrike_delayplayscriptable( 0.05 );
    var_7 = 1.65 / var_6.burst_fire_turret;
    var_8 = 6.917 / var_6.burst_fire_turret;
    var_9 = ( var_4 + 1.25 ) / var_6.burst_fire_turret;
    var_10 = 30;
    var_0.player_waittilljumpedfromc130 = spawn( "script_model", var_1 );
    var_0.player_waittilljumpedfromc130 setmodel( "ks_airstrike_mp" );
    var_0.player_waittilljumpedfromc130 dontinterpolate();
    var_0.player_waittilljumpedfromc130 thread scripts\cp_mp\killstreaks\airstrike::airstrike_playapproachfx( var_7 );
    var_0.player_waittilljumpedfromc130 thread scripts\cp_mp\killstreaks\airstrike::airstrike_playflybyfx( var_8 );
    var_0.player_waittilljumpedfromc130 thread scripts\cp_mp\killstreaks\airstrike::airstrike_playflyoutfx( var_9 );
    var_0.player_waittilljumpedfromc130 thread scripts\cp_mp\killstreaks\airstrike::airstrike_handleflyoutfxdeath( var_10 );
    var_0.player_waittilljumpedfromc130 thread scripts\cp_mp\killstreaks\airstrike::branalytics_selfrevive( var_0 );
}

_id_12D9D( var_0, var_1 )
{
    var_2 = sin( var_1 );
    var_3 = cos( var_1 );
    var_4 = var_0[0] * var_3 - var_0[1] * var_2;
    var_5 = var_0[0] * var_2 + var_0[1] * var_3;
    return ( var_4, var_5, var_0[2] );
}

fadeoutoverlay( var_0 )
{
    var_1 = int( level._id_13737[var_0.team][var_0.squadindex]._id_13BEE );

    foreach ( var_3 in level.squaddata[var_0.team][var_0.squadindex].players )
    {
        if ( !isdefined( var_3 ) )
            continue;

        var_3 _calloutmarkerping_handleluinotify_added::_id_1313E( "ui_br_x2_client_data", 0, 18, var_1 );
    }
}

handlerocketkillsgiverockets( var_0 )
{
    level endon( "game_ended" );
    self endon( "death" );

    if ( !isdefined( var_0 ) )
        var_0 = 5;

    wait( var_0 );

    if ( isdefined( self ) )
        self delete();
}

extractionlocation()
{
    if ( isdefined( level._id_145F1 ) && isdefined( level._id_145F1._id_13C8D ) )
        playfx( level._effect["vfx_br_x2_flare_attack_r"], self.origin );
}

escort_intro_pre_anim_wait()
{
    level endon( "game_ended" );

    foreach ( var_1 in level.players )
    {
        if ( !isdefined( var_1 ) )
            continue;

        var_1 setsoundsubmix( "br_x2_default_mix" );
    }
}

execution_debug()
{
    level endon( "game_ended" );
    scripts\engine\utility::flag_wait( "wztrain_anim_playing" );
    wait 1;

    if ( !isdefined( level._id_145F1 ) || !isdefined( level._id_145F1._id_13C8D ) )
        return;

    var_0 = level._id_145F1._id_13C8D[0];

    for ( var_1 = 0; var_1 < level._id_145F1._id_13C8D.size; var_1++ )
    {
        if ( soundexists( "veh_cargotrain_lp_" + var_1 ) )
            level._id_145F1._id_13C8D[var_1].wz_tease playloopsound( "veh_cargotrain_lp_" + var_1 );
    }

    var_0 playloopsound( "veh_cargotrain_locomotive_dist_lp" );

    foreach ( var_3 in level.players )
    {
        if ( !isdefined( var_3 ) )
            continue;

        var_3 setsoundsubmix( "br_x2_train_moving" );
    }

    level waittill( "buffTurrets" );
    setglobalsoundcontext( "x2_event", "turrets_buffed", 0.1 );
    level waittill( "x2SuperInterupt" );
    var_0 stoploopsound();

    for ( var_1 = 0; var_1 < level._id_145F1._id_13C8D.size; var_1++ )
        level._id_145F1._id_13C8D[var_1].wz_tease stoploopsound();
}

eyeoffnotehandler()
{
    level endon( "game_ended" );

    foreach ( var_1 in level.players )
    {
        if ( !isdefined( var_1 ) )
            continue;

        var_1 clearsoundsubmix( "br_x2_train_idle" );
        var_1 clearsoundsubmix( "br_x2_train_moving" );
        var_1 clearsoundsubmix( "br_x2_train_destroyed" );
    }

    wait 6;

    foreach ( var_1 in level.players )
    {
        if ( !isdefined( var_1 ) )
            continue;

        var_1 clearsoundsubmix( "br_x2_outro_ending" );
    }
}

f11lights( var_0 )
{
    level endon( "game_ended" );

    if ( !isdefined( level._id_145F1 ) || !isdefined( level._id_145F1._id_13C8D ) )
        return;

    var_1 = level._id_145F1._id_13C8D[0].wz_tease;
    var_1 setscriptablepartstate( "movement", "accel" );
    thread f14_current_inputseq( "br_x2_train_moving", 3, "br_x2_train_idle", 4, 0 );
}

f11onarmoryswitchon( var_0, var_1 )
{
    level endon( "game_ended" );

    if ( !isdefined( level._id_145F1 ) || !isdefined( level._id_145F1._id_13C8D ) )
        return;

    var_2 = level._id_145F1._id_13C8D[0].wz_tease;

    if ( istrue( var_1 ) )
        var_2 setscriptablepartstate( "movement", "brake" );
    else
        var_2 setscriptablepartstate( "movement", "brake_short" );

    thread f14_current_inputseq( "br_x2_train_idle", var_0, "br_x2_train_moving", 3, var_0 );
}

f14_current_inputseq( var_0, var_1, var_2, var_3, var_4 )
{
    level endon( "game_ended" );

    foreach ( var_6 in level.players )
    {
        if ( !isdefined( var_6 ) )
            continue;

        var_6 setsoundsubmix( var_0, var_1 );
    }

    wait( var_4 );

    foreach ( var_6 in level.players )
    {
        if ( !isdefined( var_6 ) )
            continue;

        var_6 clearsoundsubmix( var_2, var_3 );
    }
}

f14_current_inputamt( var_0 )
{
    level endon( "game_ended" );

    if ( !isdefined( level._id_145F1 ) || !isdefined( level._id_145F1._id_13C8D ) )
        return;

    wait( var_0 );
    var_1 = level._id_145F1._id_13C8D[0].wz_tease;
    var_1 playsoundonmovingent( "veh_horn_cargotrain_wake" );
}

f11scriptlighttoggle( var_0 )
{
    level endon( "game_ended" );

    if ( !isdefined( level._id_145F1 ) || !isdefined( level._id_145F1._id_13C8D ) )
        return;

    wait( var_0 );
    var_1 = level._id_145F1._id_13C8D[0].wz_tease;
    var_1 playsoundonmovingent( "veh_horn_cargotrain_buffed_weapon" );
}

exit_level( var_0, var_1 )
{
    if ( !isdefined( var_1 ) )
        return;

    if ( var_0 <= 1 )
        var_1 playlocalsound( "scn_x2_ac130_bomb_incoming_01", undefined, undefined, 1 );
    else if ( var_0 == 2 )
        var_1 playlocalsound( "scn_x2_ac130_bomb_incoming_02", undefined, undefined, 1 );
    else if ( var_0 == 3 )
    {
        wait 0.2;
        var_1 clearclienttriggeraudiozone( 0 );
        var_1 playlocalsound( "scn_x2_outro_part1_lr", undefined, undefined, 1 );
        var_1 clearallsoundsubmixes( 0.1 );
        var_1 setsoundsubmix( "br_x2_outro_ending" );
        wait 5.6;
        var_1 playlocalsound( "scn_x2_outro_part2_lr", undefined, undefined, 1 );
    }
}

eyeonnotehandler( var_0 )
{
    level endon( "game_ended" );

    for ( var_1 = 0; var_1 < level._id_145F1._id_13C8D.size; var_1++ )
    {
        if ( var_1 > 0 )
        {
            playfxontag( level._effect["vfx_br_x2_brake_sparks_car"], level._id_145F1._id_13C8D[var_1].wz_tease, "tag_origin" );
            continue;
        }

        playfxontag( level._effect["vfx_br_x2_brake_sparks_loco"], level._id_145F1._id_13C8D[var_1].wz_tease, "tag_origin" );
    }

    wait( var_0 );

    for ( var_1 = 0; var_1 < level._id_145F1._id_13C8D.size; var_1++ )
    {
        if ( var_1 > 0 )
        {
            stopfxontag( level._effect["vfx_br_x2_brake_sparks_car"], level._id_145F1._id_13C8D[var_1].wz_tease, "tag_origin" );
            continue;
        }

        stopfxontag( level._effect["vfx_br_x2_brake_sparks_loco"], level._id_145F1._id_13C8D[var_1].wz_tease, "tag_origin" );
    }
}

extractmissionhelipadscriptable( var_0, var_1 )
{
    if ( scripts\engine\utility::flag_exist( "no_crate_spawning" ) && scripts\engine\utility::flag( "no_crate_spawning" ) )
        return;

    if ( !isdefined( var_0 ) || !isarray( var_0 ) )
        return;

    extractcountdownmsg();

    foreach ( var_3 in var_0 )
    {
        var_4 = spawnstruct();
        var_4.origin = scripts\engine\utility::drop_to_ground( var_3, 150, -1000 );
        var_4.clear_legacy_pickup_munitions = spawn( "script_model", var_4.origin );
        var_4.clear_legacy_pickup_munitions setmodel( "ks_airdrop_crate_br" );
        level.fnhidefoundintel = 8000;

        if ( isdefined( var_1 ) )
            level.fnhidefoundintel = var_1;

        var_5 = scripts\mp\gametypes\br_c130airdrop.gsc::fn_spec_op_post_customization( undefined, var_3, 1 );
        var_6 = distance( var_5.startpt, var_5.endpt );
        var_7 = scripts\mp\gametypes\br_c130.gsc::getc130speed() * 1.2;
        var_8 = var_6 / var_7;
        var_9 = scripts\mp\gametypes\br_c130airdrop.gsc::fntrapdeactivation( var_5, var_6, var_7, var_8 );
        var_9.mode_can_play_ending = ::mode_can_play_ending;
        var_9 scripts\mp\gametypes\br_c130airdrop.gsc::fob( 1, "heavy_weapon_crate", "inactive", var_4 );
    }
}

mode_can_play_ending( var_0, var_1, var_2, var_3 )
{
    level endon( "no_crate_spawning" );
    var_4 = self.startpt;
    var_5 = self.centerpt;
    var_6 = self.speed;
    var_7 = distance2d( var_4, var_5 ) / var_6;
    var_8 = 0;
    var_9 = 0;
    wait( var_7 );
    level notify( "drop_resuply" );
    var_10 = var_3.origin;
    var_11 = scripts\cp_mp\killstreaks\airdrop::minshotstostage3acc( var_10 + ( 0, 0, level.fnhidefoundintel - 100 ), var_10, self.angles, var_1, var_2, var_3._id_11EAB );
    var_11 setscriptablepartstate( "objective", "heavy_weapon_public" );
    var_11.ml_p2_func = var_3;
    var_11._id_134E2 = self._id_134E2;
    level._id_1463D[level._id_1463D.size] = var_11;
}

extractcountdownmsg()
{
    enemyhasuavkill();

    foreach ( var_1 in level._id_1463D )
        level._id_1463B[level._id_1463B.size] = var_1;

    level._id_1463D = [];
}

enemyhasuavkill( var_0 )
{
    if ( !isdefined( level._id_1463B ) || level._id_1463B.size <= 0 )
    {
        level._id_1463B = [];
        return;
    }

    if ( !isdefined( var_0 ) )
        var_0 = 0;

    var_1 = [];

    foreach ( var_3 in level._id_1463B )
    {
        if ( !isdefined( var_3 ) || !isdefined( var_3.origin ) )
            continue;

        var_4 = scripts\common\utility::playersinsphere( var_3.origin, 5000 );

        if ( var_0 || var_4.size <= 0 )
        {
            var_3 thread scripts\cp_mp\killstreaks\airdrop::destroycrate( 1 );
            continue;
        }

        var_1[var_1.size] = var_3;
    }

    level._id_1463B = var_1;
}

enemygunship_watchdebuglocation()
{
    foreach ( var_1 in level._id_1463D )
        level._id_1463B[level._id_1463B.size] = var_1;

    level._id_1463D = [];
    enemyhasuavkill( 1 );
}

_id_11D03()
{
    level endon( "game_ended" );

    for (;;)
    {
        foreach ( var_1 in level.players )
            var_1.heli_orbit_logic = scripts\mp\utility\player::getplayersinradius( var_1.origin, 500, var_1.team, var_1 );

        wait 1;
    }
}

_id_12171( var_0 )
{
    if ( !scripts\engine\utility::flag( "wztrain_anim_playing" ) )
        return 0;

    if ( scripts\mp\flags::gameflag( "x2_train_destroyed" ) )
        return 0;

    if ( !isalive( var_0 ) )
        return 0;

    if ( var_0 scripts\cp_mp\utility\player_utility::isinvehicle() )
        return 0;

    if ( var_0 isskydiving() || var_0 isparachuting() )
        return 0;

    if ( isdefined( var_0._id_1286F ) && distance( var_0.origin, var_0._id_1286F.origin ) < 200 )
        return 0;

    var_1 = getdvarint( "scr_x2_overdrive_distance", 1500 );
    var_2 = 0;

    foreach ( var_4 in level._id_145F1._id_13C8D )
    {
        if ( var_4.wz_tease.get_remaining_bots <= 0 )
            continue;

        var_5 = distance2d( var_4.origin, var_0.origin );

        if ( var_5 < var_1 )
        {
            var_2 = 1;
            break;
        }
    }

    if ( var_2 )
    {
        if ( !isdefined( var_0.watch_for_players_approaching_tugofwar ) )
            return 0;
        else if ( gettime() - var_0.watch_for_players_approaching_tugofwar > 3000 )
            return 0;
    }
    else
        var_0.watch_for_players_approaching_tugofwar = gettime();

    return 1;
}

_id_1260C()
{
    level endon( "game_ended" );
    scripts\mp\flags::gameflagwait( "x2_ambush1_completed" );

    for (;;)
    {
        foreach ( var_1 in level.players )
        {
            if ( _id_12171( var_1 ) )
            {
                if ( !isdefined( var_1._id_1216F ) || !istrue( var_1._id_1216F ) )
                {
                    var_1._id_1216F = 1;
                    var_1 allowsupersprint( 1 );
                    var_1 _id_12543();
                    var_1 setclientomnvar( "ui_privateevent_timer_type", 4 );
                }

                var_1 setclientomnvar( "ui_privateevent_timer", var_1.watch_for_players_approaching_tugofwar + 3000 );
                var_1 refreshsprinttime();
                continue;
            }

            if ( istrue( var_1._id_1216F ) )
            {
                var_1._id_1216F = 0;
                var_1 setclientomnvar( "ui_privateevent_timer_type", 0 );
                var_1 _id_1253D();
            }
        }

        wait 0.1;
    }
}

_id_12543()
{
    self.movespeedscaler = 1.2;
    scripts\mp\weapons::updatemovespeedscale();
    self lerpfovbypreset( "zombiedefault" );

    if ( !scripts\mp\gametypes\br_public.gsc::shouldlink() )
    {
        scripts\mp\utility\perk::giveperk( "specialty_sprintmelee" );
        scripts\mp\utility\perk::giveperk( "specialty_sprintads" );
        scripts\mp\utility\perk::giveperk( "specialty_marathon" );
    }

    thread _id_11D14();
    _id_12542();
}

get_associated_keycard()
{
    var_0 = level._id_145F1._id_13C8D[0].wz_tease.lb_wood_surf_dmg_scalar;

    if ( isdefined( var_0 ) && var_0 > 2 )
        return 0;

    return 1;
}

_id_11D14()
{
    level endon( "game_ended" );
    self notify( "stopOverdriveAudio" );
    self endon( "stopOverdriveAudio" );

    for (;;)
    {
        wait 30;

        if ( get_associated_keycard() == 1 )
            expiredlootleaderenabled( "overdrive_nag", 0, 1 );
    }
}

_id_1253D()
{
    self notify( "stopOverdriveAudio" );

    if ( !scripts\mp\gametypes\br_public.gsc::shouldlink() )
    {
        scripts\mp\utility\perk::removeperk( "specialty_sprintmelee" );
        scripts\mp\utility\perk::removeperk( "specialty_sprintads" );
        scripts\mp\utility\perk::removeperk( "specialty_marathon" );
    }

    self.movespeedscaler = 1;
    scripts\mp\weapons::updatemovespeedscale();
    self lerpfovbypreset( "default_2seconds" );
    _id_1253C();
}

_id_12542()
{
    self._id_12147 = self.operatorcustomization.suit;
    self.operatorcustomization.suit = "actionhero_mp";
    scripts\mp\utility\player::_setsuit( "actionhero_mp" );
}

_id_1253C()
{
    self.operatorcustomization.suit = self._id_12147;
    scripts\mp\utility\player::_setsuit( self._id_12147 );
    self._id_12147 = undefined;
}

exfilchopper( var_0 )
{
    var_0 waittill( "spawned_player" );
    var_0 visionsetnakedforplayer( level._id_142D1, 0 );

    if ( !isdefined( var_0._id_1463C ) )
        var_0._id_1463C = scripts\mp\utility\outline::outlineenableforall( var_0, "outline_depth_x2", "lowest" );

    var_0.heli_landing_volumes = [];
}

_id_13251()
{
    level endon( "game_ended" );
    scripts\mp\flags::gameflagwait( "prematch_done" );
    thread _id_12C06();

    foreach ( var_1 in level.players )
        var_1 thread move_to_track_end();
}

move_to_track_end()
{
    level endon( "game_ended" );
    self waittill( "br_jump" );

    if ( !isdefined( self._id_1463C ) )
        self._id_1463C = scripts\mp\utility\outline::outlineenableforall( self, "outline_depth_x2", "lowest" );
}

_id_12C06()
{
    level endon( "game_ended" );

    foreach ( var_1 in level.players )
    {
        if ( isdefined( var_1._id_1463C ) )
        {
            scripts\mp\utility\outline::outlinedisable( var_1._id_1463C, var_1 );
            var_1._id_1463C = undefined;
        }
    }
}

extra_bomb_explode_vfx_func( var_0, var_1, var_2 )
{
    level endon( "game_ended" );
    var_1 endon( "disconnect" );
    wait( var_2 );
    var_1 playsoundtoplayer( var_0, var_1 );
}

exit_laser_panel_anim_sequence()
{
    scripts\mp\gametypes\br_movingtrain.gsc::_id_13CB4( 0 );
}

existingkills()
{
    scripts\mp\gametypes\br_movingtrain.gsc::_id_13CB4( 1 );
}

extractlocale_checkiflocaleisavailable( var_0 )
{
    var_1 = 0;

    if ( isdefined( level._id_14640 ) )
    {
        foreach ( var_3 in level._id_14640 )
        {
            if ( !isdefined( var_3 ) )
                continue;

            if ( var_3.health > 0 && isdefined( var_3.currenttarget ) && var_3.currenttarget == var_0 )
                var_1 = var_1 | var_0 scripts\mp\perks\perkfunctions::roof_rpg_covers( var_3 );
        }
    }

    return var_1;
}

exfill_chopper_dialogue( var_0 )
{
    if ( isplayer( var_0 ) )
        return 0;

    if ( !isdefined( level._id_145F1 ) || !isdefined( level._id_145F1._id_13C8D ) )
        return 0;

    foreach ( var_2 in level._id_145F1._id_13C8D )
    {
        if ( var_2 == var_0 )
            return level.ss_entergulag;
        else if ( isdefined( var_2.wz_tease.frontturret ) && var_2.wz_tease.frontturret == var_0 )
            return level.ss_ontimerexpired;
        else if ( isdefined( var_2.wz_tease.rearturret ) && var_2.wz_tease.rearturret == var_0 )
            return level.ss_ontimerexpired;
    }

    return 0;
}

exfil_sequence( var_0 )
{
    if ( getdvarint( "scr_x2_logs_enable", 1 ) )
        logstring( "[X2] " + var_0 );
}
